"use strict";(self.webpackChunk_1001fonts=self.webpackChunk_1001fonts||[]).push([[7908],{76060:(e,t,a)=>{a.d(t,{Ce:()=>d,Sk:()=>c,mk:()=>l});var n=a(37588),s=a(68188),r=a.n(s);const o=e=>e.ok?Promise.resolve(e.json()):Promise.reject(e),i=e=>"application/json"===e.headers.get("content-type")?e.json().then((e=>Promise.reject(e))):Promise.reject(e);class c{constructor(){this.injectActivityProfileUrls=e=>(e.forEach((e=>{e.profileUrl=r().generate("user_profile",{slug:e.username})})),e),this.createActivityFilter=e=>{const t=e=>""!==e;return{actions:e.actions.filter(t),users:{only:e.users.filter(t),not:e.excludeMe?[e.whoami]:[]}}}}static checkUsername(e,t,a,s,o,i){(0,n.ajax)({type:"HEAD",url:r().generate("username-check",{username:e}),headers:{"X-Token":t},statusCode:{200:a,403:o,404:s,406:i,409:o,412:()=>console.error("invalid token!")},global:!1})}static checkEmail(e,t,a,s){(0,n.ajax)({type:"HEAD",url:r().generate("email-check",{email:e}),headers:{"X-Token":t},statusCode:{200:a,404:s,412:()=>console.error("invalid token!")},global:!1})}static updateReply(e,t,a){const s=r().generate("update_reply",{id:e});(0,n.ajax)({url:s,type:"PUT",success:a,data:{reply:t},dataType:"json"})}static deleteReply(e,t,a){const s=r().generate("delete_reply",{id:e});(0,n.ajax)({url:s,type:"DELETE",success:a,dataType:"json",headers:{"x-csrf-token":t}})}static deleteThread(e,t,a,s){const o=r().generate("delete_thread",{board_slug:e,id:t});(0,n.ajax)({url:o,type:"DELETE",success:s,dataType:"json",headers:{"x-csrf-token":a}})}static patchThread(e,t,a,s){const o=r().generate("update_thread",{board_slug:e,id:t});(0,n.ajax)({url:o,type:"PATCH",success:s,data:a,dataType:"json"})}static loadButtons(e,t){(0,n.getJSON)(r().generate("get-editor-features",{type:e}),t)}static updateFontSampleText(e,t,a){(0,n.post)(r().generate("typeface_font_update_text",{slug:e}),{text:t},a,"json")}static toggleFavorite(e,t,a){(0,n.ajax)({url:e,type:"POST",success:t,error:a,dataType:"json",global:!1})}async getComments(e){return fetch(r().generate("typeface_comments",{slug:e})).then((e=>e.json()))}deleteComment(e,t,a){const s=r().generate("typeface_comment_delete",{slug:e,id:t});(0,n.ajax)({type:"DELETE",url:s,dataType:"json",success:a})}addComment(e,t,a){const s=r().generate("typeface_comment_add",{slug:e});(0,n.post)(s,{typeface_comment:{body:t}},a,"json")}async getTypefaceActivities(e){return fetch(r().generate("get_typeface_activities",{slug:e})).then((e=>e.json()))}updateTypefaceObjectOrder(e,t,a,s){const o=r().generate("typeface_update_objects_order",{slug:e,objects:s});(0,n.post)(o,{order:t},a,"json")}updateFontOrder(e,t,a){this.updateTypefaceObjectOrder(e,t,a,"fonts")}updateIllustrationOrder(e,t,a){this.updateTypefaceObjectOrder(e,t,a,"illustrations")}getThread(e,t,a){(0,n.getJSON)(r().generate("thread_get",{board_slug:e,id:t}),a)}postReply(e,t,a,s){const o=r().generate("post_reply",{board_slug:e,id:t});(0,n.post)(o,{reply:a},s,"json")}async updateTypefaceDescription(e,t){return fetch(r().generate("typeface_update_description",{slug:e}),{method:"POST",body:JSON.stringify({typeface:t}),headers:d.is_json}).then((e=>e.json()))}async uploadIllustrations(e,t){return fetch(r().generate("typeface_illustration_upload_files",{slug:e}),{method:"POST",body:t}).then(o).catch(i)}async createTypefaceTag(e,t,a){return fetch(e,{method:"POST",body:JSON.stringify({tags:t,isAuthor:a}),headers:d.is_json}).then(o).catch(i)}async deleteTypefaceTag(e,t,a){return fetch(e,{method:"DELETE",body:JSON.stringify({tags:t,isAuthor:a}),headers:d.is_json}).then(o).catch(i)}async getIllustrations(e){return fetch(r().generate("typeface_illustration_upload_status",{uuid:e}),{method:"GET"}).then(o).catch(i)}async uploadAvatar(e,t){return fetch(r().generate("upload_user_avatar",{slug:e}),{method:"POST",body:t})}async updateAvatarService(e,t){return fetch(r().generate("update_user_avatar_service",{slug:e}),{method:"POST",body:JSON.stringify({service:t}),headers:d.is_json}).then(o).catch(i)}async deleteAvatar(e){return fetch(r().generate("delete_user_avatar",{slug:e}),{method:"DELETE"})}static async updateFontCharInfo(e,t,a){return fetch(r().generate("typeface_charmaps_update",{slug:e}),{signal:a,headers:{...d.accept_json,...d.is_json},method:"POST",body:JSON.stringify(t)}).then(o).catch(i)}static async getFontCharInfo(e,t){return fetch(r().generate("typeface_charmaps",{slug:e}),{signal:t,headers:{...d.accept_json}}).then(o).catch(i)}}const l=new c,d={accept_json:{Accept:"application/json"},is_json:{"Content-Type":"application/json; charset=UTF-8"}}},8476:(e,t,a)=>{a.r(t),a.d(t,{ConditionalWrapper:()=>n});const n=e=>{let{condition:t,wrapper:a,children:n}=e;return t?a(n):n}},4880:(e,t,a)=>{a.r(t),a.d(t,{FontawesomeIcon:()=>o});var n=a(11504),s=a(3268),r=a.n(s);const o=e=>{const t=e.faNamespace||"fas",a=e.customClass||"".concat(t," ").concat(e.faIcon," ").concat(e.extraClass||"");return n.createElement("i",{className:a,onClick:e.onClick,title:e.title,"aria-hidden":"true"})};o.propTypes={faNamespace:r().string,faIcon:r().string,extraClass:r().string,customClass:r().string,onClick:r().func,title:r().string}},20304:(e,t,a)=>{a.r(t),a.d(t,{useValidContext:()=>s});var n=a(11504);const s=(e,t)=>{const a=n.useContext(e);return((e,t)=>{if(void 0===e)throw new Error("".concat(t," undefined. Are you missing a Provider?"))})(a,t),a}},348:(e,t,a)=>{a.r(t),a.d(t,{BorderSpinner:()=>c,SmallSpinner:()=>i,Spinner:()=>o});var n=a(11504),s=a(75328);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}const o=(0,n.forwardRef)(((e,t)=>{let{className:a}=e;return n.createElement(s.c,{ref:t,animation:"border",role:"status",size:"sm",className:a},n.createElement("span",{className:"sr-only"},"Loading..."))})),i=()=>n.createElement(s.c,{animation:"border",role:"status",size:"sm"},n.createElement("span",{className:"visually-hidden"},"Loading...")),c=(0,n.forwardRef)((function(e,t){const{className:a,...o}=e;return n.createElement(s.c,r({ref:t,animation:"border",role:"status",className:a},o),n.createElement("span",{className:"visually-hidden"},"Loading..."))}))},90248:(e,t,a)=>{a.r(t),a.d(t,{CharBox:()=>i});var n=a(11504),s=a(3268),r=a.n(s),o=a(89324);const i=e=>{let{char:t,fontFamily:a,className:s,onClick:r,fontSize:i=o.defaultFontSize}=e;return n.createElement("div",{className:"char-box  ".concat(null!=s?s:"").trim(),onClick:r,role:"cell"},n.createElement("div",{className:"char-letter",style:{fontFamily:a,fontSize:i}},t),n.createElement("div",{className:"default-char"},t))};i.propTypes={char:r().string.isRequired,fontFamily:r().string.isRequired,className:r().string,onClick:r().func,fontSize:r().number}},98128:(e,t,a)=>{a.r(t),a.d(t,{CharmapAdminButtons:()=>m});var n=a(87264),s=a(33144),r=a(26460),o=a(11504),i=a(2832),c=a(11208),l=a(95416),d=a(71272),u=a(6424),h=a(40996),p=a(3268),f=a.n(p);const m=()=>{const{isPending:e}=(0,c.useCharmap)(),{clear:t,selected:a,updateBogus:r,updatePotentiallyBogus:u,updateValid:h,resetChars:p}=(0,i.useCharmapAdmin)();return(0,o.useEffect)((()=>{const e=e=>{if(a.length)switch(e.key){case"b":r();break;case"v":h();break;case"n":u();break;case"c":p();break;case"Escape":t()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[t,p,a.length,r,u,h]),o.createElement(n.c,null,o.createElement(s.c,{className:"ms-1"},o.createElement(g,{id:"bogus-btn",variant:"danger",onClick:r,disabled:e,text:l.O.trans("font-details.charmaps.editor.buttons.bogus.text"),tooltip:l.O.trans("font-details.charmaps.editor.buttons.bogus.tooltip")}),o.createElement(g,{id:"valid-btn",variant:"success",onClick:h,disabled:e,text:l.O.trans("font-details.charmaps.editor.buttons.valid.text"),tooltip:l.O.trans("font-details.charmaps.editor.buttons.valid.tooltip")}),o.createElement(g,{id:"potentially-bogus-btn",variant:"warning",onClick:u,disabled:e,text:l.O.trans("font-details.charmaps.editor.buttons.potentially-bogus.text"),tooltip:l.O.trans("font-details.charmaps.editor.buttons.potentially-bogus.tooltip")}),o.createElement(g,{id:"reset-btn",variant:"outline-secondary",onClick:p,disabled:e,text:l.O.trans("font-details.charmaps.editor.buttons.reset.text"),tooltip:l.O.trans("font-details.charmaps.editor.buttons.reset.tooltip")})),o.createElement(s.c,{className:"ms-1"},o.createElement(g,{id:"clear-btn",variant:"outline-primary",onClick:t,disabled:e,text:l.O.trans("font-details.charmaps.editor.buttons.clear.text"),tooltip:l.O.trans("font-details.charmaps.editor.buttons.clear.tooltip")},a.length>0&&o.createElement(d.c,{bg:"secondary",className:"ms-1"},a.length))))},g=e=>{let{id:t,variant:a,onClick:n,disabled:s,text:i,tooltip:c,children:l}=e;return o.createElement(h.c,{overlay:o.createElement(u.c,{id:"".concat(t,"-tooltip")},c)},o.createElement(r.c,{id:t,size:"sm",variant:a,onClick:n,disabled:s},i,l))};g.propTypes={id:f().string.isRequired,variant:f().string.isRequired,onClick:f().func.isRequired,disabled:f().bool.isRequired,text:f().string.isRequired,tooltip:f().string.isRequired,children:f().node}},2832:(e,t,a)=>{a.r(t),a.d(t,{CharmapAdminProvider:()=>h,charmapReducer:()=>d,emptyState:()=>c,stateActions:()=>l,useCharmapAdmin:()=>p});a(29708);var n=a(11504),s=a(20304),r=a(3268),o=a.n(r),i=a(11208);const c={bogus:[],valid:[],potentiallyBogus:[],selected:[]},l={INIT:"init",ADD_SELECTION:"addSelection",REMOVE_SELECTION:"removeSelection",CLEAR_SELECTION:"clearSelection",UPDATE:"update",RESET:"reset"},d=(e,t)=>{switch(t.type){case l.INIT:return{...e,...t.data};case l.ADD_SELECTION:return(()=>{let a=t.selection;Array.isArray(a)||(a=[a]);const n=e.selected;return a=a.filter((e=>!n.includes(e))),{...e,selected:[...e.selected,...a]}})();case l.REMOVE_SELECTION:return{...e,selected:[...e.selected.filter((e=>e!==t.char))]};case l.CLEAR_SELECTION:return{...e,selected:[]};case l.UPDATE:return(t=>{const a={...e},n=e.selected;return a[t]=[...a[t],...n],Object.keys(a).filter((e=>e!==t&&"selected"!==e)).map((e=>{a[e]=a[e].filter((e=>!n.includes(e)))})),a})(t.collection);case l.RESET:return(()=>{const t={...e},a=e.selected;return["valid","bogus","potentiallyBogus"].forEach((e=>{t[e]=t[e].filter((e=>!a.includes(e)))})),t})();default:throw Error("Unknown action.")}},u=(0,n.createContext)(void 0),h=e=>{let{niceId:t,children:a}=e;const{data:s,isPending:r,update:o}=(0,i.useCharmap)(),[h,p]=(0,n.useReducer)(d,c);(0,n.useEffect)((()=>{r||p({type:l.INIT,data:{valid:s.data.validChars,bogus:s.data.bogusChars,potentiallyBogus:s.data.potentiallyBogusChars}})}),[s,r]);const f=(0,n.useCallback)((e=>{const t=d(h,e);o({valid:t.valid,bogus:t.bogus,potentiallyBogus:t.potentiallyBogus})}),[h,o]),m=(0,n.useCallback)((()=>{p({type:l.CLEAR_SELECTION})}),[]),g=(0,n.useCallback)((()=>{const e={type:l.UPDATE,collection:"bogus"};p(e),f(e)}),[f]),y=(0,n.useCallback)((()=>{const e={type:l.UPDATE,collection:"valid"};p(e),f(e)}),[f]),E=(0,n.useCallback)((()=>{const e={type:l.UPDATE,collection:"potentiallyBogus"};p(e),f(e)}),[f]),b=(0,n.useCallback)((()=>{const e={type:l.RESET};p(e),f(e)}),[f]),v=(0,n.useCallback)((e=>{p({type:l.ADD_SELECTION,selection:e})}),[]),C=(0,n.useCallback)((e=>{p({type:l.REMOVE_SELECTION,char:e})}),[]),S={niceId:t,clear:m,bogus:h.bogus,updateBogus:g,potentiallyBogus:h.potentiallyBogus,updatePotentiallyBogus:E,valid:h.valid,updateValid:y,addSelection:v,removeSelection:C,selected:h.selected,resetChars:b};return n.createElement(u.Provider,{value:S},a)};h.propTypes={niceId:o().string.isRequired,children:o().node.isRequired};const p=()=>(0,s.useValidContext)(u,"CharmapAdminContext")},11208:(e,t,a)=>{a.r(t),a.d(t,{CharmapProvider:()=>g,unloadFontFace:()=>p,useCharmap:()=>y});a(54004),a(31072),a(29708);var n=a(76060),s=a(72916),r=a(3268),o=a.n(r),i=a(20304),c=a(11504),l=a(91368),d=a(89324);const u=(0,c.createContext)(void 0);const h=async(e,t)=>{const a=new FontFace(e,"url('data:font/woff2;base64,".concat(t,"') format('woff2')"));return await async function(e){return document.fonts.add(e),await e.load(),e}(a)},p=e=>{e.loaded.then((()=>{document.fonts.delete(e)}))},f=async(e,t)=>{let{niceId:a}=e,{signal:s}=t;const r=a.replaceAll(".","_");try{const e=await n.Sk.getFontCharInfo(a,s);return{data:e,font:await h(r,e.fontUrlBase64),fontFaceName:r}}catch(e){throw new Error(e.detail)}},m=async(e,t)=>{let[a,s,r]=e,{signal:o}=t;try{const e=await n.Sk.updateFontCharInfo(s,a,o);return{data:e,font:await h(r,e.fontUrlBase64),fontFaceName:r}}catch(e){throw new Error(e.detail)}},g=e=>{let{niceId:t,isAdmin:a,charsPerPage:n,children:r}=e;const{data:o,error:i,isPending:h,run:p}=(0,s.Ck)({promiseFn:f,deferFn:m,niceId:t}),[g,y]=(0,c.useState)(d.defaultFontSize),E=(0,c.useCallback)((e=>{p(e,t,o.fontFaceName)}),[o,t,p]),b=(0,c.useCallback)(((e,t)=>{y((0,l.calculateCharLetterFontSize)([...e.querySelectorAll(".char-letter")],t))}),[]);return c.createElement(u.Provider,{value:{niceId:t,isAdmin:a,charsPerPage:n,data:o,error:i,isPending:h,update:E,fontSize:g,calculateFontSize:b}},r)};g.propTypes={niceId:o().string.isRequired,isAdmin:o().bool.isRequired,charsPerPage:o().number.isRequired,children:o().node.isRequired};const y=()=>(0,i.useValidContext)(u,"CharmapContext")},91368:(e,t,a)=>{a.r(t),a.d(t,{calculateCharLetterFontSize:()=>n});const n=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(e.length===t.length){var n,s;const t=e.filter((e=>/[A-Za-z]/.test(e.textContent)));let r=0,o=0,i=null!==(n=t[0])&&void 0!==n?n:null,c=null!==(s=t[0])&&void 0!==s?s:null;t.forEach((e=>{r<e.offsetHeight&&(r=e.offsetHeight,i=e),o<e.offsetWidth&&(o=e.offsetWidth,c=e)}));let l=parseFloat(a.getComputedStyle(i).fontSize);const d=.7;if(i.offsetHeight>d*i.parentNode.offsetHeight||c.offsetWidth>d*c.parentNode.offsetWidth)for(;i.offsetHeight>d*i.parentNode.offsetHeight||c.offsetWidth>d*c.parentNode.offsetWidth;)l--,i.style.fontSize=l+"px",c.style.fontSize=l+"px";else for(;i.offsetHeight<d*i.parentNode.offsetHeight&&c.offsetWidth<d*c.parentNode.offsetWidth;)if(l++,i.style.fontSize=l+"px",c.style.fontSize=l+"px",i.offsetHeight>d*i.parentNode.offsetHeight||c.offsetWidth>d*c.parentNode.offsetWidth){l--,i.style.fontSize=l+"px",c.style.fontSize=l+"px";break}return l}return 0}},89324:(e,t,a)=>{a.r(t),a.d(t,{defaultFontSize:()=>y,destroy:()=>w,init:()=>_});a(29708);var n=a(11504),s=a(28352),r=a(3268),o=a.n(r),i=a(97688),c=a(26460),l=a(4880),d=a(90248),u=a(11208),h=a(98128),p=a(8476),f=a(348),m=a(95416),g=a(6992);const y=48,E=(0,n.lazy)((()=>a.e(6704).then(a.bind(a,76704)).then((e=>({default:e.CharBoxEditor}))))),b=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,2832)).then((e=>({default:e.CharmapAdminProvider}))))),v=()=>n.createElement("div",{className:"d-flex mx-1 px-1 align-items-center"},n.createElement(f.BorderSpinner,{className:"me-1"}),m.O.trans("js.loading-charmap")),C=e=>{let{error:t}=e;return n.createElement(g.c,{className:"mx-1",variant:"danger"},"Error: ",t.message)};C.propTypes={error:o().object.isRequired};const S=e=>{let{niceId:t,isAdmin:a,charsPerPage:s}=e;return n.createElement(u.CharmapProvider,{niceId:t,isAdmin:a,charsPerPage:s},n.createElement(T,null))};S.propTypes={niceId:o().string.isRequired,isAdmin:o().bool.isRequired,charsPerPage:o().number.isRequired};const T=()=>{const{data:e,error:t,isPending:a,isAdmin:s,charsPerPage:r,niceId:o,fontSize:i}=(0,u.useCharmap)(),[f,m]=(0,n.useState)(r);(0,n.useEffect)((()=>()=>{e&&e.font&&(0,u.unloadFontFace)(e.font)}),[e]);const g=(0,n.useCallback)((()=>{m((e=>e+r))}),[r]);if(a&&!e)return n.createElement(v,null);if(t)return n.createElement(C,{error:t});const y=e.data,S=y.chars.slice(0,f);return n.createElement(n.Fragment,null,n.createElement(p.ConditionalWrapper,{condition:s,wrapper:e=>n.createElement(b,{niceId:o},e)},s&&n.createElement(h.CharmapAdminButtons,null),n.createElement(k,{chars:S},S.map(((t,a)=>s?n.createElement(E,{key:a,char:t,fontFamily:e.fontFaceName,fontData:y,fontSize:i}):n.createElement(d.CharBox,{key:a,char:t,fontFamily:e.fontFaceName,fontSize:i})))),y.chars.length>f&&n.createElement("div",{className:"show-more-charmap"},n.createElement(c.c,{type:"button",id:"show-more-characters",variant:"secondary",onClick:g},n.createElement(l.FontawesomeIcon,{faIcon:"fa-plus"})," Show more characters"))))},k=e=>{let{chars:t,children:a}=e;const{calculateFontSize:s}=(0,u.useCharmap)(),r=(0,n.useRef)(null),o=(0,n.useCallback)(((e,t)=>{s(e,t)}),[s]);return(0,n.useEffect)((()=>{t.length&&o(r.current,t)}),[t,t.length,o]),n.createElement("div",{className:"charmap-container",ref:r},a)};k.propTypes={chars:o().arrayOf(o().string).isRequired,children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired};const _=e=>{const t=e.dataset.niceid,a=!!e.dataset.isAdmin,r=(0,i.intval)(e.dataset.charsPerPage,10),o=s.createRoot(e);return o.render(n.createElement(S,{niceId:t,isAdmin:a,charsPerPage:r})),o},w=e=>{e.unmount()}},96056:(e,t,a)=>{a.d(t,{O:()=>n});const n=(e,t)=>{const a=document.getElementById(e);if(a){const e=a.textContent;if(!isNaN(e)){const n=!0===t?1:-1;a.textContent=parseInt(e,10)+n+""}}}},14792:(e,t,a)=>{a.d(t,{_:()=>o});var n=a(37588),s=a.n(n),r=a(37588);function o(e){e instanceof r||(e=s()(e)),e.find("img[data-src]").each((async(e,t)=>{const a=s()(t);a.attr("src",a.data("src")),a.on("load",(()=>a.removeAttr("data-src")))}))}},87908:(e,t,a)=>{a.d(t,{U9:()=>C,IH:()=>v,QW:()=>k,Mx:()=>S,uk:()=>T});a(29708);var n=a(37588),s=a.n(n),r=(a(95296),a(13400),a(46693),a(14792)),o=a(53660),i=a(2704);function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l=e=>{o.a.dispatchEvent(i._.UPDATE_ADDED_ILLUSTRATIONS_COUNT,e)},d={dots:!0,infinite:!0,focusOnSelect:!0,speed:300,slidesToShow:3,centerMode:!0,variableWidth:!0,responsive:[{breakpoint:2560,settings:{slidesToShow:1}}]};class u{constructor(){c(this,"init",(()=>{if(this.carousel.length){this.initCarousel(),o.a.addEventListener(i._.ILLUSTRATION_ADDED,(e=>{this.addIllustration(e.data.illustrations,e.data.slug,e.data.order)})),o.a.addEventListener(i._.ILLUSTRATION_DELETED,(e=>{this.removeIllustration(e.data.id)})),o.a.addEventListener(i._.ILLUSTRATION_REORDER,(e=>{let{data:t}=e;return this.reorderSlides(t)}));const e=s()(".illustration-manager");if(e.length){this.carousel.find(".slick-arrow,.slick-dots").hover((()=>{e.hide()}),(()=>{e.show()}))}}})),c(this,"addIllustration",((e,t,a)=>{this.carousel.slick("unslick"),this.carousel.append('<img class="img-fluid"\n                               src="'.concat(e.big,'"\n                               srcset="').concat(e.thumb," 576w, ").concat(e.big,'"\n                               alt="').concat(t," illustration ").concat(a,'"\n                               data-order="').concat(a,'"/>')),this.carousel.find("img").sort(((e,t)=>s()(e).data("order")-s()(t).data("order"))).appendTo(this.carousel),this.initCarousel(),this.carousel.slick("slickGoTo",0),l(1)})),c(this,"removeIllustration",(e=>{const t=this.carousel.slick("getSlick"),a=new RegExp("-".concat(e,"-big\\."));t.$slides.each(((e,t)=>{const n=s()(t),r=n.find("img");r.length&&a.test(r.prop("src"))&&this.carousel.slick("slickRemove",n.data("slickIndex"))})),l(-1),this.updateSlidesToShow()})),c(this,"updateSlidesToShow",(()=>{const e=this.carousel.slick("slickGetOption","slidesToShow");this.carousel.find("img").length-1<=e&&this.carousel.slick("slickSetOption","slidesToShow",1,!0)})),c(this,"reorderSlides",(e=>{let{newOrder:t}=e;this.carousel.slick("unslick");const a=this.carousel.find("img");this.carousel.empty();const n={};a.each(((e,a)=>{const s=a.alt.split(" ").at(-1);let r=t.findIndex((e=>e===parseInt(s)));n[r]=a}));let s=Object.values(n);this.carousel.append(s),this.initCarousel(),this.carousel.slick("slickGoTo",0)}))}get carousel(){return this._carousel||(this._carousel=s()(".carousel")),this._carousel}get numImages(){return this.carousel.find("img").length}initCarousel(){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object.assign({},d,{slidesToShow:e>d.slidesToShow?d.slidesToShow:t})}(this.numImages);this.carousel.slick(e)}}var h=a(96056),p=a(89324),f=a(29926);const m=e=>s()(e.currentTarget),g=s()("#browsing-toolbar"),y="sticky";let E=!1,b=!1;function v(){E=!0}function C(){E=!1}function S(){return E}function T(){b=!0}function k(){return b}const _=e=>e.parent().find(".preview"),w=e=>{const t=_(m(e));if(g.hasClass("is-sticky")&&(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(t[0])){t.offset().top-s()(window).scrollTop()<=108&&(a=t.data("top")-108,s()("html, body").animate({scrollTop:a,easing:"linear",duration:400},0))}var a},O=e=>{const t=m(e);(0,r._)(t),(e=>{const t=e.find(".typeface-charmap");if(t.length){const a=(0,p.init)(t[0]);e.data("charmapRoot",a)}})(t)},N=async()=>{const e=document.querySelectorAll(".typeface-extra-info");e.length&&[...e].map((e=>{var t;f.aS.getOrCreateInstance(e,{toggle:!1}),(t=_(s()(e))).data("top",t.offset().top),e.addEventListener("show.bs.collapse",(e=>{O(e);const t=e.target.id;s()("."+t+"_btn").addClass("button-active");const a=s()("."+t+"_triangle");a&&a.show()})),e.addEventListener("shown.bs.collapse",(e=>I(m(e)))),e.addEventListener("hide.bs.collapse",(e=>{w(e);const t=e.target.id;s()("."+t+"_btn").removeClass("button-active");const a=s()("."+t+"_triangle");a&&a.hide()})),e.addEventListener("hidden.bs.collapse",(e=>P(m(e)))),e.addEventListener("hidden.bs.collapse",(e=>(e=>{const t=e.find(".typeface-charmap"),a=e.data("charmapRoot");t.length&&a&&(0,p.destroy)(a)})(m(e))))}))},I=e=>{_(e).addClass(y)},P=e=>{_(e).removeClass(y)};(new u).init(),Promise.all([a.e(7560),a.e(7412),a.e(2728),a.e(8068)]).then(a.bind(a,5980)).then((e=>{let{init:t}=e;t()})),Promise.all([a.e(7560),a.e(1088),a.e(8952),a.e(2728),a.e(3856),a.e(1126),a.e(5820)]).then(a.bind(a,32931)).then((e=>{let{init:t}=e;t()})),Promise.all([a.e(7560),a.e(1044)]).then(a.bind(a,51044)).then((e=>{let{init:t}=e;t()})),a.e(9428).then(a.bind(a,39428)).then((e=>{let{init:t}=e;t("author-typefaces")})),a.e(9356).then(a.bind(a,99356)).then((e=>{let{init:t}=e;t()})),N(),(async()=>{const e=s()(".btn-download"),t="typeface-download";e.length&&(o.a.addEventListener(t,(()=>(0,h.O)("downloads_counter",!0))),e.on("click",(()=>o.a.dispatchEvent(t))))})()}}]);