(self.webpackChunk_1001fonts=self.webpackChunk_1001fonts||[]).push([[3524,2748,5244,5596,1880,3924,6448,5776,948,347,2380,3432,856,7312,3428,5512,3552,5508,5864,3280,6724,520,2684,8832,8868,5292,8992,2052,6704,2012,2904,1126,3964],{74276:(e,t,a)=>{var n={"./activity/activities-by-day.jsx":74684,"./activity/activities-filter-provider.jsx":78288,"./activity/activities-filter.jsx":72016,"./activity/activities-provider.jsx":2696,"./activity/activities.jsx":41208,"./activity/activities.types.js":13464,"./activity/activity-actions.js":65536,"./activity/activity-component-factory.jsx":83376,"./activity/activity-component.jsx":58420,"./activity/activity-list.jsx":72632,"./activity/activity.jsx":14028,"./activity/all-activities.jsx":38500,"./activity/board-activity-tools.js":44204,"./activity/changeset-table.jsx":56548,"./activity/common-activity-info.jsx":75596,"./activity/components/activity-avatar.jsx":20560,"./activity/components/activity-date.jsx":18104,"./activity/components/activity-diff.jsx":78612,"./activity/components/activity-error.jsx":64376,"./activity/components/activity-headline.jsx":41936,"./activity/components/activity-icon.jsx":37928,"./activity/components/activity-typeface-info.jsx":65592,"./activity/components/external-link.jsx":63528,"./activity/components/index.js":71336,"./activity/components/loading.jsx":19216,"./activity/components/no-activities-found.jsx":94384,"./activity/components/no-publishing-activity-found.jsx":47720,"./activity/create-typeface-activity.jsx":65244,"./activity/filter.js":51392,"./activity/font-chars-edited-activity.jsx":42768,"./activity/forum-reply-activity.jsx":97312,"./activity/forum-thread-activity.jsx":856,"./activity/illustration-activity.jsx":41060,"./activity/publisher-updated-activity.jsx":10948,"./activity/scrape-marketplace-activity.jsx":55508,"./activity/tag-activity.jsx":92380,"./activity/typeface-activity-component.jsx":39444,"./activity/typeface-author-changed-activity.jsx":13552,"./activity/typeface-change-privacy-activity.jsx":52748,"./activity/typeface-comment-activity.jsx":43432,"./activity/typeface-deleted-activity.jsx":73428,"./activity/typeface-description-activity.jsx":76448,"./activity/typeface-font-text-change-activity.jsx":95864,"./activity/typeface-item-reorder-activity.jsx":23280,"./activity/typeface-level-change-activity.jsx":83924,"./activity/typeface-license-activity.jsx":28156,"./activity/typeface-link-activity.jsx":55512,"./activity/typeface-unpublished-activity.jsx":52728,"./activity/update-typeface-activity.jsx":51880,"./activity/user-auth-exception-activity.jsx":70520,"./activity/user-avatar-activity.jsx":46724,"./activity/user-banned-activity.jsx":78868,"./activity/user-change-activity.jsx":58832,"./activity/user-notification-activity.jsx":17984,"./activity/user-password-activity.jsx":92684,"./activity/user-password-attempt-activity.jsx":35292,"./activity/user-privacy-activity.jsx":95380,"./admin/all-activities-button.jsx":3304,"./admin/dashboard.jsx":79680,"./author/author-statistics-error.jsx":19040,"./author/author-statistics-no-data.jsx":12048,"./author/author-statistics-trending.jsx":94864,"./author/author-statistics-typeface-table.jsx":9460,"./avatar.jsx":6464,"./board/post-toolbar.jsx":23304,"./board/post.jsx":62948,"./board/quotes/quote-provider.jsx":95516,"./board/quotes/quotes-manager.js":53052,"./board/thread-editor.jsx":29872,"./board/thread-toolbar.jsx":18916,"./board/thread.jsx":16084,"./board/tool-button.jsx":81944,"./browsing/admin-filter.jsx":82052,"./browsing/color-picker.jsx":68992,"./browsing/font-previews-context.jsx":20404,"./chart/chart-settings.jsx":12944,"./comment.jsx":22104,"./conditional-wrapper.jsx":8476,"./counter.jsx":56280,"./edit-mode-provider.jsx":35664,"./editor/editor-buttons.jsx":78204,"./editor/maxfonts-editor.jsx":13392,"./flash-message.jsx":63672,"./fontawesome-icon.jsx":4880,"./hooks.jsx":208,"./hooks/context-utils.js":20304,"./hooks/dropbox-hook.jsx":26224,"./layout/media-components.jsx":40901,"./layout/privacy-picker.jsx":34936,"./lazy-image.jsx":93116,"./login-button.jsx":76340,"./profile/avatar-edit-icon.jsx":77356,"./profile/avatar-modal-provider.jsx":50656,"./profile/avatar-service-enum.jsx":14040,"./profile/avatar-service.jsx":21108,"./profile/facebook-avatar-service.jsx":24872,"./profile/google-avatar-service.jsx":68988,"./profile/gravatar-avatar-service.jsx":49896,"./profile/local-avatar-cropping-modal.jsx":49632,"./profile/local-avatar-service.jsx":58488,"./profile/profile-avatar-modal-body.jsx":95276,"./profile/profile-avatar-modal-footer.jsx":72216,"./profile/profile-avatar-modal-header.jsx":57360,"./profile/profile-avatar-modal.jsx":28208,"./profile/profile-avatar-provider.jsx":80872,"./profile/profile-avatar.jsx":55264,"./query-tags.jsx":46112,"./sample-text.jsx":82012,"./sample-text/sample-text-button.jsx":3020,"./sample-text/sample-text-editor.jsx":83040,"./sample-text/sample-text-form.jsx":77512,"./spinner.jsx":348,"./tag-cloud.jsx":35932,"./tags/sibling-tag.jsx":69960,"./tags/tag-form-provider.jsx":69932,"./tags/tag-form.jsx":19864,"./tags/tag-list.jsx":34992,"./tags/tags-provider.jsx":67944,"./tags/tags.jsx":12640,"./typeface-comment-form.jsx":37628,"./typeface-comments.jsx":5980,"./typeface-description.jsx":32931,"./typeface-statistics.jsx":99356,"./typeface/activity-info/last-activity-overview.js":76012,"./typeface/activity-info/typeface-activity-info.jsx":83884,"./typeface/charmap/char-box-editor.jsx":76704,"./typeface/charmap/char-box.jsx":90248,"./typeface/charmap/charmap-admin-buttons.jsx":98128,"./typeface/charmap/charmap-admin-context.jsx":2832,"./typeface/charmap/charmap-context.jsx":11208,"./typeface/charmap/charmap-utils.js":91368,"./typeface/charmaps.jsx":89324,"./typeface/exceptions/typeface-illustration-invalid-type-exception.jsx":75656,"./typeface/links/typeface-link-form.jsx":21992,"./typeface/links/typeface-link.jsx":57112,"./typeface/links/typeface-links.jsx":51044,"./typeface/list/typeface-activity-infos.jsx":37916,"./typeface/publishing-info/publishing-history-legacy-fallback.js":88832,"./typeface/publishing-info/publishing-history-tools.js":14788,"./typeface/publishing-info/publishing-history.js":98096,"./typeface/publishing-info/typeface-publishing-history.jsx":98584,"./typeface/typeface-activities.jsx":85075,"./typeface/typeface-download-count.jsx":76500,"./typeface/typeface-favorited-by-count.jsx":71893,"./typeface/typeface-illustration-gallery-dropbox.jsx":72904,"./typeface/walkthrough.jsx":6832};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=74276},96704:(e,t,a)=>{var n={"./author_statistics_charts_controller.js":80024};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=96704},29290:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});var n=a(12888);const r={"symfony--ux-chartjs--chart":class extends n.Mc{constructor(e){super(e),this.__stimulusLazyController=!0}initialize(){this.application.controllers.find((e=>e.identifier===this.identifier&&e.__stimulusLazyController))||a.e(8084).then(a.bind(a,45704)).then((e=>{this.application.register(this.identifier,e.default)}))}},"symfony--ux-react--react":class extends n.Mc{constructor(e){super(e),this.__stimulusLazyController=!0}initialize(){this.application.controllers.find((e=>e.identifier===this.identifier&&e.__stimulusLazyController))||a.e(9624).then(a.bind(a,69624)).then((e=>{this.application.register(this.identifier,e.default)}))}}}},80024:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(12888);const r=class extends n.Mc{connect(){this.element.addEventListener("chartjs:pre-connect",this._onPreConnect)}disconnect(){this.element.removeEventListener("chartjs:pre-connect",this._onPreConnect)}_onPreConnect(e){"bar"===e.detail.config.type&&"y"===e.detail.config.options.indexAxis&&(e.detail.config.options.plugins.datalabels.formatter=e=>e.x)}}},35032:(e,t,a)=>{"use strict";a.d(t,{i:()=>n});const n=e=>Intl.NumberFormat("en").format(e)},892:(e,t,a)=>{"use strict";a.d(t,{s:()=>l});var n=a(99020),r=a(11176),s=a(73568),i=a(71088);class c extends r.i{constructor(e){super({commonRoute:s.Yh,activityRoute:i.noop},e)}}const l=new c(n.U)},62452:(e,t,a)=>{"use strict";a.d(t,{M:()=>l,S:()=>c});var n=a(99020),r=a(11176),s=a(73568);class i extends r.i{constructor(e){super({commonRoute:s._G,activityRoute:s.Oy},e)}}const c=new i(n.U);class l{constructor(e){const t=JSON.parse(e);this.slug="unknown-author",this.name="".concat(t.slug," (missing)")}}},74684:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ActivitiesByDay:()=>c});var n=a(11504),r=a(348),s=a(72632),i=a(2696);const c=()=>{const{activities:e}=(0,i.useActivities)();return null===e?n.createElement(r.Spinner,{className:"ml-1"}):e.length?n.createElement(s.ActivityList,null):n.createElement("p",null,"No Activities this day, yet...")}},72016:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ActivitiesFilter:()=>h});a(29708);var n=a(11504),r=a(97540),s=a(70784),i=a(18248),c=a(33144),l=a(26460),o=a(68188),d=a.n(o),u=a(44472),m=a(95416),p=a(78288);const h=()=>{var e;const{filter:t,updateFilter:a,hasFilter:o}=(0,p.useActivitiesFilter)(),[h,v]=(0,n.useState)([]),[g,f]=(0,n.useState)([]),[y,E]=(0,n.useState)(!1),[b,A]=(0,n.useState)(""),[w,C]=(0,n.useState)([]),k=(e,t,a,n)=>{v(t),f(e),E(a),A(n)},S=(e,t)=>e.label.localeCompare(t.label);(0,n.useEffect)((()=>{(async()=>{const e=await fetch(d().generate("get_activity_actions")),t=(e=>{const t=[];return e.forEach((e=>{t.push({action:e,label:m.O.trans("activity.action.".concat(e,".title"))})})),t})(await e.json());C(t.sort(S))})()}),[]),(0,n.useEffect)((()=>{k(t.users,t.actions,t.excludeMe,t.search)}),[t]);const x=(0,n.useCallback)((e=>{e.preventDefault(),a({actions:h,users:g,excludeMe:y,search:b})}),[h,y,b,a,g]),T="mb-1 mb-sm-3 mb-xl-0";return n.createElement(r.c,{id:"activities-filter",className:"py-1 py-sm-2 px-sm-3 px-1 mb-1"},n.createElement(r.c.Group,{as:s.c},n.createElement(i.c,{sm:6,xl:3,className:T},n.createElement(r.c.Select,{id:"activity-filter-actions",onChange:e=>v([e.target.value]),value:null!==(e=h[0])&&void 0!==e?e:""},n.createElement("option",{key:"-1",value:""},m.O.trans("activity.form.action.placeholder")),w.map(((e,t)=>n.createElement("option",{key:t,value:e.action},e.label))))),n.createElement(i.c,{sm:6,xl:3,className:T},n.createElement(r.c.Control,{type:"text",placeholder:m.O.trans("activity.form.username.placeholder"),value:g,onChange:e=>f(e.target.value.split(","))})),n.createElement(i.c,{sm:6,xl:3,className:T},n.createElement(r.c.Control,{type:"text",placeholder:"Search",value:b,onChange:e=>A(e.target.value)})),n.createElement(i.c,{sm:6,xl:3,className:"".concat(T," d-flex align-items-start")},n.createElement(r.c.Check,{inline:!0,type:"checkbox",id:"activity-filter-exclude-me",className:"ps-0 pt-1 d-flex",checked:y,onChange:e=>E(e.target.checked)},n.createElement(r.c.Check.Input,{type:"checkbox"}),n.createElement(r.c.Check.Label,{style:{flex:1}},m.O.trans("activity.form.exclude.placeholder"))),n.createElement(c.c,{className:"d-flex flex-nowrap"},n.createElement(l.c,{variant:"primary",type:"submit",onClick:e=>x(e)},m.O.trans("activity.form.button.filter")),n.createElement(l.c,{variant:"secondary",type:"reset",onClick:e=>(e.preventDefault(),u.G.reset(),k([],[],!1,""),void(window.location.hash="")),disabled:!o},m.O.trans("activity.form.button.reset"))))))}},41208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Activities:()=>i});var n=a(11504),r=a(72632),s=a(2696);const i=()=>{const{activities:e}=(0,s.useActivities)();return e.length?n.createElement(r.ActivityList,null):n.createElement("p",null,"No Activities found, yet...")}},13464:(e,t,a)=>{"use strict";a.r(t),a.d(t,{UserActivityPropType:()=>s});var n=a(3268),r=a.n(n);const s=r().shape({action:r().string.isRequired,object_class:r().string.isRequired,logged_at:r().string.isRequired,object_id:r().string.isRequired,profileUrl:r().string.isRequired,username:r().string.isRequired,data:r().shape({provider:r().string.isRequired,image:r().string.isRequired}).isRequired})},58420:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ActivityComponent:()=>i});var n=a(11504),r=a(3268),s=a.n(r);class i extends n.Component{get activity(){return this.props.activity}}i.propTypes={activity:s().object.isRequired}},38500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AllActivities:()=>p});var n=a(3268),r=a.n(n),s=a(42760),i=a(70784),c=a(18248),l=a(72016),o=a(11504),d=a(2696),u=a(78288),m=a(41208);const p=e=>{let{whoami:t}=e;return o.createElement(s.c,null,o.createElement(u.ActivitiesFilterProvider,{whoami:t},o.createElement(d.ActivitiesProvider,null,o.createElement(l.ActivitiesFilter,null),o.createElement(i.c,null,o.createElement(c.c,null,o.createElement(m.Activities,null))))))};p.propTypes={whoami:r().string}},44204:(e,t,a)=>{"use strict";a.r(t),a.d(t,{getPostMarkup:()=>n});const n=e=>({__html:e.data.body})},56548:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ChangesetTable:()=>c});var n=a(11504),r=a(3268),s=a.n(r),i=a(33568);function c(e){const t=(e=>{const t=e.data,a={};function n(e){return(0,i.isObject)(e)&&(e=void 0!==e.__isInitialized__?null:JSON.stringify(e)),e}return(0,i.forEach)(t,((e,t)=>{a[t]={from:n(e.from),to:n(e.to)}})),a})(e.changeset);return Object.keys(t).length?n.createElement("table",{className:"table table-sm table-striped table-bordered table-hover"},n.createElement("thead",{className:"thead-dark"},n.createElement("tr",null,n.createElement("th",null,"Field"),n.createElement("th",null,"from"),n.createElement("th",null,"to"))),n.createElement("tbody",null,Object.keys(t).map((e=>n.createElement("tr",{key:e},n.createElement("td",null,e),n.createElement("td",null,t[e].from),n.createElement("td",null,t[e].to)))))):null}c.propTypes={changeset:s().object.isRequired}},75596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CommonActivityInfo:()=>o,default:()=>o});var n=a(11504),r=a(3268),s=a.n(r),i=a(71336),c=a(56548),l=a(40901);function o(e){const t=e.activity,a=t.action+"d";return n.createElement(l.MediaContainer,null,t.username&&n.createElement(i.ActivityAvatar,{username:t.username}),n.createElement(l.MediaContentContainer,null,n.createElement(i.ActivityHeadline,{username:t.username||"Undefined"}),n.createElement(i.ActivityDate,{date:t.logged_at}),n.createElement("div",null,a," ",n.createElement("em",null,t.object_class," (ID: ",t.object_id,")"),n.createElement(c.ChangesetTable,{changeset:t}))))}o.propTypes={activity:s().object.isRequired}},65244:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CreateTypefaceActivity:()=>c,default:()=>c});var n=a(11504),r=a(39444),s=a(71336),i=a(40901);class c extends r.default{renderActivity(e){return n.createElement(i.MediaContainer,null,n.createElement(s.ActivityAvatar,{username:this.user.slug}),n.createElement(i.MediaContentContainer,null,n.createElement(s.ActivityIcon,{activity:e,faIcon:"fa-file-upload",extraClass:"text-success"}),n.createElement(s.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(s.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(s.ActivityDate,{date:e.logged_at}),n.createElement("div",null,"Has been submitted!")))}}},42768:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FontCharsEditedActivity:()=>u,default:()=>u});var n=a(11504),r=a(39444),s=a(40901),i=a(71336),c=a(22748),l=a(95416),o=a(3268),d=a.n(o);class u extends r.default{renderActivity(e){return n.createElement(s.MediaContainer,null,n.createElement(i.ActivityAvatar,{username:this.user.slug}),n.createElement(s.MediaContentContainer,null,n.createElement(i.ActivityIcon,{activity:e,faIcon:"fa-font"}),n.createElement(i.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(i.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(i.ActivityDate,{date:e.logged_at}),n.createElement("div",{className:"my-1"},l.O.trans("activity.action.typeface.font.chars.edited.subheadline",{font:e.data.font})),e.data.chars&&n.createElement(c.c,{size:"sm",striped:!0,bordered:!0,hover:!0},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{scope:"row"},l.O.trans("font-details.charmaps.editor.buttons.bogus.text")),n.createElement("td",null,n.createElement(m,{value:e.data.chars.bogus}))),n.createElement("tr",null,n.createElement("th",{scope:"row"},l.O.trans("font-details.charmaps.editor.buttons.potentially-bogus.text")),n.createElement("td",null,n.createElement(m,{value:e.data.chars.potentiallyBogus}))),n.createElement("tr",null,n.createElement("th",{scope:"row"},l.O.trans("font-details.charmaps.editor.buttons.valid.text")),n.createElement("td",null,n.createElement(m,{value:e.data.chars.validated})))))))}}const m=e=>{let{value:t}=e;return n.createElement("pre",{className:"mb-0"},t)};m.propTypes={value:d().string.isRequired}},97312:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ForumReplyActivity:()=>p,default:()=>p});var n=a(11504),r=a(3268),s=a.n(r),i=a(71336),c=a(73568),l=a(58420),o=a(44204),d=a(40901);const u={"forum.reply.edit":{text:"changed reply",iconClass:""},"forum.reply.save":{text:"replied",iconClass:"text-success"},"forum.reply.deleted":{text:"deleted reply",iconClass:"text-danger"}},m=e=>{let{data:t,actionText:a}=e;return n.createElement("div",{className:"small text-muted"},n.createElement("strong",null,a)," in the forum thread"," ",n.createElement("a",{href:(0,c.KW)(t.board,t.thread_id)},t.thread)," in the ",t.board_name," forum")};m.propTypes={data:s().object.isRequired,actionText:s().string.isRequired};class p extends l.ActivityComponent{constructor(e){super(e)}render(){const e=this.activity;return n.createElement(d.MediaContainer,null,n.createElement(i.ActivityAvatar,{username:e.username}),n.createElement(d.MediaContentContainer,null,n.createElement(i.ActivityIcon,{activity:e,faIcon:"fa-comments",faNamespace:"far",extraClass:u[e.action].iconClass}),n.createElement(i.ActivityHeadline,{username:e.username}),(e=>{const t=e.data,a=e.action;return n.createElement(m,{data:t,actionText:u[a].text})})(e),n.createElement(i.ActivityDate,{date:e.logged_at}),n.createElement("div",{className:"comment",dangerouslySetInnerHTML:(0,o.getPostMarkup)(e)})))}}},856:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ForumThreadActivity:()=>v,default:()=>v});var n=a(11504),r=a(71336),s=a(73568),i=a(58420),c=a(3268),l=a.n(c),o=a(44204),d=a(65536),u=a(40901);const m={"forum.thread.create":{text:e=>n.createElement(n.Fragment,null,"posted ",n.createElement("strong",null,"a new thread")," to the ",e.board_name," forum",n.createElement("br",null)),iconClass:"text-success"},"forum.thread.edit":{iconClass:""},"forum.thread.deleted":{text:e=>n.createElement(n.Fragment,null,"deleted ",n.createElement("strong",null,"a thread")," on the ",e.board_name," forum",n.createElement("br",null)),iconClass:"text-danger"}},p=e=>{let{activity:t}=e;const a=t.data;return n.createElement("div",{className:"small text-muted"},n.createElement("strong",null,"updated thread")," ",n.createElement("a",{href:(0,s.KW)(a.board,t.object_id)},a.subject)," in forum ",a.board_name)};p.propTypes={activity:l().object.isRequired};const h=e=>{let{activity:t,actionText:a}=e;const r=t.data;return n.createElement("div",{className:"small text-muted"},a(r),n.createElement("a",{href:(0,s.KW)(r.board,t.object_id)},r.subject))};h.propTypes={activity:l().object.isRequired,actionText:l().func.isRequired};class v extends i.ActivityComponent{constructor(e){super(e)}render(){const e=this.activity;return n.createElement(u.MediaContainer,null,n.createElement(r.ActivityAvatar,{username:e.username}),n.createElement(u.MediaContentContainer,null,n.createElement(r.ActivityIcon,{activity:e,faIcon:"fa-comment",faNamespace:"far",extraClass:m[e.action].iconClass}),n.createElement(r.ActivityHeadline,{username:e.username}),(e=>{const t=e.action;return t===d.actions.FORUM_THREAD_EDIT.name?n.createElement(p,{activity:e}):n.createElement(h,{activity:e,actionText:m[t].text})})(e),n.createElement(r.ActivityDate,{date:e.logged_at}),n.createElement("div",{className:"comment",dangerouslySetInnerHTML:(0,o.getPostMarkup)(e)})))}}},41060:(e,t,a)=>{"use strict";a.r(t),a.d(t,{IllustrationActivity:()=>h,IllustrationCreatedContent:()=>m,IllustrationDeletedContent:()=>p,default:()=>h});a(54004);var n=a(11504),r=a(3268),s=a.n(r),i=a(39444),c=a(71336),l=a(40901),o=a(95416),d=a(33116),u=a.n(d);const m=e=>{var t;let{activity:a}=e;return n.createElement("div",null,n.createElement("img",{src:a.data.images.thumb,alt:"thumbnail",height:"150",loading:"lazy"}),n.createElement("p",null,n.createElement("small",null,o.O.trans("activity.action.typeface.illustration.created.create.text",{action:u()(null!==(t=a.data.label)&&void 0!==t?t:""),id:a.data.illustration_id}).trim())))};m.propTypes={activity:s().object.isRequired};const p=e=>{let{activity:t}=e;return n.createElement("div",null,n.createElement("p",null,o.O.trans("activity.action.typeface.illustration.created.delete.text",{id:t.data.illustration_id})))};p.propTypes={activity:s().object.isRequired};class h extends i.default{renderActivity(e){const t="created"===e.action.replace("typeface.illustration.",""),a=t?n.createElement(m,{activity:e}):n.createElement(p,{activity:e}),r=t?"text-success":"text-danger";return n.createElement(l.MediaContainer,null,n.createElement(c.ActivityAvatar,{username:this.user.slug}),n.createElement(l.MediaContentContainer,null,n.createElement(c.ActivityIcon,{activity:e,faIcon:"fa-image",extraClass:r}),n.createElement(c.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(c.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(c.ActivityDate,{date:e.logged_at}),a))}}},10948:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PublisherUpdatedActivity:()=>l,default:()=>l});a(54004);var n=a(11504),r=a(73568),s=a(39444),i=a(71336),c=a(40901);class l extends s.default{getActivityBody(e){return e.data.privacy?this.getActivityBodyV2(e):this.getActivityBodyV1(e)}getActivityBodyV2(e){const t=this.getAuthorLabel(e),a=e.data;let s,i=" is now fully published after ";return s=a.privacy.from===a.privacy.to?"having been "+a.level.to.toLowerCase():"having privacy set to "+a.privacy.to.toLowerCase(),a.type&&!0===a.type.semi&&(i=i.replace("fully","semi")),s=i+s,n.createElement("div",null,"The typeface made by ",n.createElement("a",{href:(0,r._G)(e.data.author)},t)," ",s,".")}getActivityBodyV1(e){const t=this.getAuthorLabel(e),a=e.data.level.to||e.data.level||"approved";return n.createElement("div",null,"The typeface made by ",n.createElement("a",{href:(0,r._G)(e.data.author)},t)," is now ",a.toLowerCase()," ","and public.")}getAuthorLabel(e){return e.data.author===e.data.poster?"himself":e.data.author}renderActivity(e){return n.createElement(c.MediaContainer,null,n.createElement(i.ActivityAvatar,{username:this.user.slug}),n.createElement(c.MediaContentContainer,null,n.createElement(i.ActivityIcon,{activity:e,faIcon:"fa-globe",extraClass:"text-success"}),n.createElement(i.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(i.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(i.ActivityDate,{date:e.logged_at}),this.getActivityBody(e)))}}},55508:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ScrapeMarketplaceActivity:()=>c,default:()=>c});var n=a(11504),r=a(39444),s=a(71336),i=a(40901);class c extends r.default{renderActivity(e){return n.createElement(i.MediaContainer,null,n.createElement(s.ActivityAvatar,{username:this.user.slug}),n.createElement(i.MediaContentContainer,null,n.createElement(s.ActivityIcon,{activity:e,faIcon:"fa-images",extraClass:"text-success"}),n.createElement(s.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(s.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(s.ActivityDate,{date:e.logged_at}),n.createElement("div",null,n.createElement("p",null,"Scraping ",n.createElement(s.ExternalLink,{url:e.data.url})),n.createElement("p",null,n.createElement("small",null,"All related illustration creation activities will be omitted!")))))}}},92380:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TagActivity:()=>l,default:()=>l});var n=a(11504),r=a(39444),s=a(71336),i=a(65536),c=a(40901);class l extends r.default{renderActivity(e){const t=e.data.tags,a=e.action===i.actions.TYPEFACE_FONT_TAG_DELETE.name,r=e.data.isAdminMode,l=a?"text-danger":"text-success",o=a?"Untagged":"Tagged";return n.createElement(c.MediaContainer,null,n.createElement(s.ActivityAvatar,{username:this.user.slug}),n.createElement(c.MediaContentContainer,null,n.createElement(s.ActivityIcon,{activity:e,faIcon:"fa-tags",extraClass:l}),n.createElement(s.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(s.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(s.ActivityDate,{date:e.logged_at}),n.createElement("div",null,o," the font ",e.data.font," with the tag",t.length>1?"s":"",": ",t.join(", "),r&&" (while Admin Mode was enabled)")))}}},39444:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceActivityComponent:()=>l,default:()=>l});a(29708);var n=a(58420),r=a(44472),s=a(71336),i=a(11504),c=a(62452);class l extends n.ActivityComponent{constructor(e){super(e),this.state={error:null,isLoaded:!1,typeface:{},user:{}}}get typefaceSlug(){return this.activity.object_id}get typeface(){return this.state.typeface}get activityUsername(){return this.activity.username}get user(){return this.state.user}componentDidMount(){const e=r.G.findForActivity(this.typefaceSlug).then((e=>{this.setState({typeface:e})}),(e=>{this.setState({error:e})})),t=c.S.findForActivity(this.activityUsername).then((e=>{this.setState({user:e})}));Promise.all([e,t]).then((()=>{this.setState({isLoaded:!0})}))}render(){const e=this.activity,{error:t,isLoaded:a}=this.state;return t?i.createElement(s.ActivityError,{error:t}):a?this.renderActivity(e):i.createElement(s.Loading,null)}renderActivity(e){throw new Error("Please override renderActivity(activity) method!")}}},13552:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceAuthorChangedActivity:()=>l,default:()=>l});var n=a(71336),r=a(11504),s=a(73568),i=a(39444),c=a(40901);class l extends i.default{renderActivity(e){return r.createElement(c.MediaContainer,null,r.createElement(n.ActivityAvatar,{username:this.user.slug}),r.createElement(c.MediaContentContainer,null,r.createElement(n.ActivityIcon,{activity:e,faIcon:"fa-people-arrows"}),r.createElement(n.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),r.createElement(n.ActivityTypefaceInfo,{typeface:this.typeface}),r.createElement(n.ActivityDate,{date:e.logged_at}),r.createElement("div",null,"Changed the author from",r.createElement("a",{href:(0,s._G)(e.data.old_author)}," ",e.data.old_author)," to",r.createElement("a",{href:(0,s._G)(e.data.new_author)}," ",e.data.new_author),".")))}}},52748:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceChangePrivacyActivity:()=>d,default:()=>u});var n=a(11504),r=a(3268),s=a.n(r),i=a(39444),c=a(71336),l=a(95416),o=a(40901);class d extends i.default{renderActivity(e){return n.createElement(o.MediaContainer,null,n.createElement(c.ActivityAvatar,{username:this.user.slug}),n.createElement(o.MediaContentContainer,null,n.createElement(c.ActivityIcon,{activity:e,faIcon:l.O.trans("activity.action.typeface.privacy.".concat(this.props.visibility,".icon"))}),n.createElement(c.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(c.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(c.ActivityDate,{date:e.logged_at}),n.createElement("div",null,l.O.trans("activity.action.typeface.privacy.".concat(this.props.visibility,".description")))))}}d.propTypes={activity:s().object.isRequired,visibility:s().string.isRequired};const u=d},43432:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceCommentActivity:()=>c,default:()=>c});a(54004);var n=a(11504),r=a(71336),s=a(39444),i=a(40901);class c extends s.default{get typefaceSlug(){return this.activity.data.typeface}renderActivity(e){const t=".deleted"===this.activity.action.replace("typeface.comment",""),a=t?"text-danger":"text-success",s={from:t?this.activity.data.body:"",to:t?"":this.activity.data.body};return n.createElement(i.MediaContainer,null,n.createElement(r.ActivityAvatar,{username:this.user.slug}),n.createElement(i.MediaContentContainer,null,n.createElement(r.ActivityIcon,{activity:e,faIcon:"fa-comment-alt",faNamespace:"far",extraClass:a}),n.createElement(r.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(r.ActivityTypefaceInfo,{typeface:this.typeface,anchor:"comments"}),n.createElement(r.ActivityDate,{date:e.logged_at}),n.createElement(r.ActivityDiff,{to:s.to,from:s.from})))}}},73428:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceDeletedActivity:()=>o,default:()=>o});var n=a(71336),r=a(11504),s=a(58420),i=a(4880),c=a(62452),l=a(40901);class o extends s.ActivityComponent{constructor(e){super(e),this.state={error:null,isLoaded:!1,user:{}}}get user(){return this.state.user}componentDidMount(){c.S.findForActivity(this.activity.username).then((e=>{this.setState({user:e,isLoaded:!0})}))}render(){const e=this.activity,{error:t,isLoaded:a}=this.state;if(t)return r.createElement(n.ActivityError,{error:t});if(a){const t=e.data;return r.createElement(l.MediaContainer,null,r.createElement(n.ActivityAvatar,{username:e.username}),r.createElement(l.MediaContentContainer,null,r.createElement(n.ActivityIcon,{activity:e,faIcon:"fa-trash",extraClass:"text-danger"}),r.createElement(n.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),r.createElement(n.ActivityDate,{date:e.logged_at}),r.createElement("div",null,r.createElement(i.FontawesomeIcon,{faIcon:"fa-exclamation-triangle",extraClass:"text-danger"}),"Typeface: ",t.name," (Slug: ",t.slug,") has been deleted!")))}return r.createElement(n.Loading,null)}}},76448:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceDescriptionActivity:()=>c,default:()=>c});var n=a(11504),r=a(39444),s=a(71336),i=a(40901);class c extends r.default{renderActivity(e){return n.createElement(i.MediaContainer,null,n.createElement(s.ActivityAvatar,{username:this.user.slug}),n.createElement(i.MediaContentContainer,{className:"overflow-hidden"},n.createElement(s.ActivityIcon,{activity:e,faIcon:"fa-clipboard"}),n.createElement(s.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(s.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(s.ActivityDate,{date:e.logged_at}),n.createElement(s.ActivityDiff,{to:this.activity.data.description.to,from:this.activity.data.description.from})))}}},95864:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceFontTextChangeActivity:()=>c,default:()=>c});var n=a(39444),r=a(71336),s=a(11504),i=a(40901);class c extends n.default{renderActivity(e){const t=e.data["font.text"];return s.createElement(i.MediaContainer,null,s.createElement(r.ActivityAvatar,{username:this.user.slug}),s.createElement(i.MediaContentContainer,null,s.createElement(r.ActivityIcon,{activity:e,faIcon:"fa-pencil-alt"}),s.createElement(r.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),s.createElement(r.ActivityTypefaceInfo,{typeface:this.typeface}),s.createElement(r.ActivityDate,{date:e.logged_at}),s.createElement("h6",null,e.data.font),s.createElement(r.ActivityDiff,{to:t.to,from:t.from})))}}},23280:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceItemReorderActivity:()=>l,default:()=>l});a(54004);var n=a(71336),r=a(11504),s=a(39444),i=a(4880),c=a(40901);class l extends s.default{renderActivity(e){const t=e.action.replace("typeface.reorder.",""),a="illustrations"===t?"fa-image":"fa-font";return r.createElement(c.MediaContainer,null,r.createElement(n.ActivityAvatar,{username:this.user.slug}),r.createElement(c.MediaContentContainer,null,r.createElement(n.ActivityIcon,{activity:e,faIcon:"fa-arrows-alt-v"}),r.createElement(n.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),r.createElement(n.ActivityTypefaceInfo,{typeface:this.typeface}),r.createElement(n.ActivityDate,{date:e.logged_at}),r.createElement("div",null,r.createElement(i.FontawesomeIcon,{faIcon:"fa-arrows-alt-v"}),r.createElement(i.FontawesomeIcon,{faIcon:a})," Changed ",t," order.")))}}},83924:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceLevelChangeActivity:()=>l,default:()=>l});var n=a(11504),r=a(39444),s=a(71336),i=a(95416),c=a(40901);class l extends r.default{renderActivity(e){return n.createElement(c.MediaContainer,null,n.createElement(s.ActivityAvatar,{username:this.user.slug}),n.createElement(c.MediaContentContainer,null,n.createElement(s.ActivityIcon,{activity:e,faIcon:"fa-exchange-alt"}),n.createElement(s.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(s.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(s.ActivityDate,{date:e.logged_at}),n.createElement("div",{dangerouslySetInnerHTML:{__html:i.O.trans("activity.action.typeface.level.changed.description",{from:e.data.level.from,to:e.data.level.to})}})))}}},28156:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceLicenseActivity:()=>o,default:()=>o});var n=a(11504),r=a(39444),s=a(71336),i=a(4880),c=a(95416),l=a(40901);class o extends r.default{constructor(e){super(e),this.getIconClass=e=>c.O.trans("font.license.icon-class.".concat(e)).split(" ")[1],this.getBtnClass=e=>c.O.trans("font.license.button-class.".concat(e))}renderActivity(e){const t=e.data.license;return n.createElement(l.MediaContainer,null,n.createElement(s.ActivityAvatar,{username:this.user.slug}),n.createElement(l.MediaContentContainer,null,n.createElement(s.ActivityIcon,{activity:e,faIcon:"fo-money",faNamespace:"fa"}),n.createElement(s.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(s.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(s.ActivityDate,{date:e.logged_at}),n.createElement("div",{className:"license-change"},t.name,n.createElement("div",{className:"btn-group btn-group-sm mt-1 d-block",role:"group"},n.createElement("button",{type:"button",className:"btn ".concat(this.getBtnClass(t.allowCommercial))},"Commercial ",n.createElement(i.FontawesomeIcon,{faIcon:this.getIconClass(t.allowCommercial)})),n.createElement("button",{type:"button",className:"btn ".concat(this.getBtnClass(t.allowModification))},"Modification ",n.createElement(i.FontawesomeIcon,{faIcon:this.getIconClass(t.allowModification)})),n.createElement("button",{type:"button",className:"btn ".concat(this.getBtnClass(t.allowDistribution))},"Redistribution ",n.createElement(i.FontawesomeIcon,{faIcon:this.getIconClass(t.allowDistribution)}))))))}}},55512:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceLinkActivity:()=>d,default:()=>d});a(54004);var n=a(71336),r=a(11504),s=a(39444),i=a(40901);const c=e=>{let t;switch(e){case"added":t="text-success";break;case"deleted":t="text-danger";break;default:t=null}return t},l=e=>{let t;switch(e){case"added":case"updated":t="+";break;case"deleted":t="-";break;default:t=null}return t},o=e=>"added"===e||"updated"===e?"bg-success":"bg-danger";class d extends s.default{renderActivity(e){const t=e.action.replace("typeface.link.","");let a=null;return e.data.url_old&&(a=r.createElement("div",{className:"link-change ".concat(o("deleted"))},r.createElement("div",{className:"prefix"},l("deleted")),r.createElement(n.ExternalLink,{url:e.data.url_old}))),r.createElement(i.MediaContainer,null,r.createElement(n.ActivityAvatar,{username:this.user.slug}),r.createElement(i.MediaContentContainer,null,r.createElement(n.ActivityIcon,{activity:e,faIcon:"fa-link",extraClass:c(t)}),r.createElement(n.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),r.createElement(n.ActivityTypefaceInfo,{typeface:this.state.typeface}),r.createElement(n.ActivityDate,{date:e.logged_at}),r.createElement("div",{className:"link-change ".concat(o(t))},a,r.createElement("div",{className:"prefix"},l(t)),r.createElement(n.ExternalLink,{url:e.data.url}))))}}},52728:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceUnpublishedActivity:()=>l,default:()=>l});var n=a(39444),r=a(71336),s=a(11504),i=a(40901),c=a(73568);class l extends n.default{getAuthorLabel(e){return e.data.author===e.data.poster?"himself":e.data.author}renderActivity(e){const t=this.getAuthorLabel(e);return s.createElement(i.MediaContainer,null,s.createElement(r.ActivityAvatar,{username:this.user.slug}),s.createElement(i.MediaContentContainer,null,s.createElement(r.ActivityIcon,{activity:e,faIcon:"fa-globe",extraClass:"text-danger"}),s.createElement(r.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),s.createElement(r.ActivityTypefaceInfo,{typeface:this.typeface}),s.createElement(r.ActivityDate,{date:e.logged_at}),s.createElement("div",null,"The Typeface made by ",s.createElement("a",{href:(0,c._G)(e.data.author)},t)," is now unpublished after setting ",(a="level",e.data[a].from!==e.data[a].to?"approval status to ".concat(e.data.level.to):"privacy to ".concat(e.data.privacy.to)))));var a}}},51880:(e,t,a)=>{"use strict";a.r(t),a.d(t,{UpdateTypefaceActivity:()=>c,default:()=>c});var n=a(11504),r=a(39444),s=a(71336),i=a(40901);class c extends r.default{renderActivity(e){return n.createElement(i.MediaContainer,null,n.createElement(s.ActivityAvatar,{username:this.user.slug}),n.createElement(i.MediaContentContainer,null,n.createElement(s.ActivityIcon,{activity:e,faIcon:"fa-code-branch"}),n.createElement(s.ActivityHeadline,{username:this.user.name,slug:this.user.slug}),n.createElement(s.ActivityTypefaceInfo,{typeface:this.typeface}),n.createElement(s.ActivityDate,{date:e.logged_at}),n.createElement("div",null,"Uploaded a ",n.createElement("strong",null,"new version"),"!")))}}},70520:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(71336),r=a(11504),s=a(95416),i=a(13464);const c=e=>{let{activity:t}=e;const a=s.O.trans("user-profile.social-media.provider.".concat(t.data.provider,".name")),i=s.O.trans("user-profile.social-media.provider.".concat(t.data.provider,".icon")).split(" ");return r.createElement("div",{className:"media"},r.createElement(n.ActivityAvatar,{username:t.username}),r.createElement("div",{className:"media-body"},r.createElement(n.ActivityIcon,{activity:t,extraClass:"text-danger",faIcon:i[1],faNamespace:i[0]}),r.createElement(n.ActivityHeadline,{username:t.username,slug:t.username}),r.createElement(n.ActivityDate,{date:t.logged_at}),r.createElement("div",null,s.O.trans("activity.action.".concat(t.action,".description"),{user:t.username,provider:a}))))};c.propTypes={activity:i.UserActivityPropType.isRequired};const l=c},46724:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(71336),r=a(11504),s=a(95416),i=a(13464);const c=e=>{let{activity:t}=e;return r.createElement("div",{className:"media"},r.createElement(n.ActivityAvatar,{username:t.username}),r.createElement("div",{className:"media-body"},r.createElement(n.ActivityIcon,{activity:t,faIcon:s.O.trans("activity.action.".concat(t.action,".icon"))}),r.createElement(n.ActivityHeadline,{username:t.username,slug:t.username}),r.createElement("div",{className:"activity-typeface-info small text-muted"},"for user ",r.createElement("a",{href:"/users/".concat(t.object_id)},t.object_id)),r.createElement(n.ActivityDate,{date:t.logged_at}),r.createElement("div",{"data-testid":"activity-description"},s.O.trans("activity.action.".concat(t.action,".description"),{newProvider:t.data.provider}))))};c.propTypes={activity:i.UserActivityPropType.isRequired};const l=c},78868:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(11504),r=a(71336),s=a(40901),i=a(3268),c=a.n(i),l=a(95416),o=a(73568);const d=e=>{let{activity:t}=e;return n.createElement(s.MediaContainer,null,n.createElement(r.ActivityAvatar,{username:t.username}),n.createElement(s.MediaContentContainer,{className:"overflow-hidden"},n.createElement(r.ActivityIcon,{activity:t,faIcon:"fa-user"}),n.createElement(r.ActivityHeadline,{username:t.username,slug:t.username}),n.createElement(r.ActivityDate,{date:t.logged_at}),n.createElement("div",{"data-testid":"activity-description",dangerouslySetInnerHTML:{__html:l.O.trans("activity.action.user.bannedStatus.changed.description",{user:t.object_id,userLink:(0,o._G)(t.object_id),from:l.O.trans("activity.action.user.bannedStatus.changed.status.".concat(t.data.from)),to:l.O.trans("activity.action.user.bannedStatus.changed.status.".concat(t.data.to))})}})))};d.propTypes={activity:c().shape({action:c().string.isRequired,object_class:c().string.isRequired,logged_at:c().string.isRequired,object_id:c().string.isRequired,profileUrl:c().string.isRequired,username:c().string.isRequired,data:c().shape({from:c().number.isRequired,to:c().number.isRequired}).isRequired}).isRequired}},58832:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(11504),r=a(71336),s=a(40901),i=a(3268),c=a.n(i),l=a(95416),o=a(73568);const d=e=>{let{activity:t}=e;return n.createElement(s.MediaContainer,null,n.createElement(r.ActivityAvatar,{username:t.username}),n.createElement(s.MediaContentContainer,{className:"overflow-hidden"},n.createElement(r.ActivityIcon,{activity:t,faIcon:"fa-user"}),n.createElement(r.ActivityHeadline,{username:t.username,slug:t.username}),n.createElement(r.ActivityDate,{date:t.logged_at}),n.createElement("div",{"data-testid":"activity-description",dangerouslySetInnerHTML:{__html:l.O.trans("activity.action.".concat(t.action,".description"),{user:t.object_id,userLink:(0,o._G)(t.object_id)})}}),n.createElement(r.ActivityDiff,{from:t.data.from?t.data.from:"",to:t.data.to?t.data.to:""})))};d.propTypes={activity:c().shape({action:c().string.isRequired,object_class:c().string.isRequired,logged_at:c().string.isRequired,object_id:c().string.isRequired,profileUrl:c().string.isRequired,username:c().string.isRequired,data:c().shape({from:c().string,to:c().string}).isRequired}).isRequired}},92684:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(71336),r=a(11504),s=a(3268),i=a.n(s),c=a(95416);const l=e=>{let{activity:t}=e;return r.createElement("div",{className:"media"},r.createElement(n.ActivityAvatar,{username:t.username}),r.createElement("div",{className:"media-body"},r.createElement(n.ActivityIcon,{activity:t,faIcon:c.O.trans("activity.action.".concat(t.action,".icon"))}),r.createElement(n.ActivityHeadline,{username:t.username,slug:t.username}),r.createElement("div",{className:"activity-typeface-info small text-muted"},"for user ",r.createElement("a",{href:"/users/".concat(t.object_id)},t.object_id)),r.createElement(n.ActivityDate,{date:t.logged_at}),r.createElement("div",{"data-testid":"activity-description"},c.O.trans("activity.action.".concat(t.action,".description")))))};l.propTypes={activity:i().shape({action:i().string.isRequired,object_class:i().string.isRequired,logged_at:i().string.isRequired,object_id:i().string.isRequired,profileUrl:i().string.isRequired,username:i().string.isRequired}).isRequired};const o=l},35292:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(11504),r=a(71336),s=a(40901),i=a(3268),c=a.n(i),l=a(95416),o=a(73568);const d=e=>{let{activity:t}=e;return n.createElement(s.MediaContainer,null,n.createElement(r.ActivityAvatar,{username:t.username}),n.createElement(s.MediaContentContainer,{className:"overflow-hidden"},n.createElement(r.ActivityIcon,{activity:t,faIcon:"fa-user",extraClass:!0===t.data.successful?"text-success":"text-danger"}),n.createElement(r.ActivityHeadline,{username:t.username,slug:t.username}),n.createElement(r.ActivityDate,{date:t.logged_at}),n.createElement("div",{"data-testid":"activity-description",dangerouslySetInnerHTML:{__html:t.data.successful?l.O.trans("activity.action.user.password.attempt.successfulText",{user:t.object_id,userLink:(0,o._G)(t.object_id)}):l.O.trans("activity.action.user.password.attempt.errorText",{user:t.object_id,userLink:(0,o._G)(t.object_id),error:t.data.error_message})}})))};d.propTypes={activity:c().shape({action:c().string.isRequired,object_class:c().string.isRequired,logged_at:c().string.isRequired,object_id:c().string.isRequired,profileUrl:c().string.isRequired,username:c().string.isRequired,data:c().shape({successful:c().oneOfType([c().number,c().bool]).isRequired,error_message:c().string}).isRequired}).isRequired}},3304:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AllActivitiesButton:()=>o});var n=a(95416),r=a(26460),s=a(11504),i=a(3268),c=a.n(i),l=a(78288);const o=e=>{let{activitiesUri:t}=e;const{filter:a,hasFilter:i,getHash:c}=(0,l.useActivitiesFilter)(),o=(0,s.useCallback)((e=>{let t=e;return i&&(t+="#".concat(c(a))),t}),[a,c,i]);return s.createElement(r.c,{variant:"primary",href:o(t),className:"my-1"},n.O.trans("admin.dashboard.activities.see-all"))};o.propTypes={activitiesUri:c().string.isRequired}},79680:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Dashboard:()=>E});var n=a(11504),r=a(3268),s=a.n(r),i=a(42760),c=a(70784),l=a(18248),o=a(95416),d=a(74684),u=a(17412),m=a.n(u),p=a(72016),h=a(3304),v=a(78288),g=a(2696);const f=m()(),y=m()().subtract(1,"day"),E=e=>{let{whoami:t,activitiesUri:a}=e;return n.createElement(i.c,null,n.createElement(v.ActivitiesFilterProvider,{whoami:t},n.createElement(p.ActivitiesFilter,null),n.createElement(c.c,null,n.createElement(g.ActivitiesProvider,{day:f},n.createElement(l.c,{xs:12,md:6},n.createElement("h2",null,o.O.trans("admin.dashboard.activities.today")),n.createElement(d.ActivitiesByDay,null))),n.createElement(g.ActivitiesProvider,{day:y},n.createElement(l.c,{xs:12,md:6},n.createElement("h2",null,o.O.trans("admin.dashboard.activities.yesterday")),n.createElement(d.ActivitiesByDay,null)))),n.createElement(c.c,null,n.createElement(l.c,null,n.createElement(h.AllActivitiesButton,{activitiesUri:a})))))};E.propTypes={whoami:s().string.isRequired,activitiesUri:s().string.isRequired}},19040:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AuthorStatisticsError:()=>o});var n=a(18248),r=a(6992),s=a(95416),i=a(11504),c=a(3268),l=a.n(c);const o=e=>{let{titleTransKey:t,withHeadline:a=!0}=e;return i.createElement(n.c,{lg:6,className:"px-0 px-sm-3"},a&&i.createElement("h2",null,s.O.trans(t)),i.createElement(r.c,{variant:"danger"},"An error occured, please try again later."))};o.propTypes={titleTransKey:l().string.isRequired,withHeadline:l().bool}},12048:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AuthorStatisticsNoData:()=>o});var n=a(18248),r=a(6992),s=a(95416),i=a(11504),c=a(3268),l=a.n(c);const o=e=>{let{titleTransKey:t,textTransKey:a="author-statistics.no-data",withHeadline:c=!0}=e;return i.createElement(n.c,{lg:6,className:"px-0 px-sm-3"},c&&i.createElement("h2",null,s.O.trans(t)),i.createElement(r.c,{variant:"info"},s.O.trans(a)))};o.propTypes={titleTransKey:l().string.isRequired,textTransKey:l().string,withHeadline:l().bool}},94864:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AuthorStatisticsTrending:()=>A,default:()=>w});var n=a(11504),r=a(3268),s=a.n(r),i=a(80131),c=a(81556),l=a(68188),o=a.n(l),d=a(17412),u=a.n(d),m=a(76060),p=a(72916),h=a(12048),v=a(95360),g=a(19040),f=a(348);i.kR.register(i.Yz,i.o5,i.o9,i.KW,i.gv,i.e_,i.GW);const y=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],E={plugins:{datalabels:!1},scales:{y:{ticks:{stepSize:1},font:{size:10}},x:{font:{size:10}}}},b="author-statistics.trending.title",A=e=>{let{author_slug:t}=e;const a=m.Ce.accept_json,{data:r,error:s,isPending:i}=(0,p.SC)(o().generate("author_statistics_top10_downloaded",{slug:t}),{headers:a},{json:!0});return i?n.createElement(f.BorderSpinner,null):s?n.createElement(g.AuthorStatisticsError,{titleTransKey:b,withHeadline:!1}):(0,v.t7)(r)?n.createElement(h.AuthorStatisticsNoData,{titleTransKey:b,textTransKey:"author-statistics.trending.no-data",withHeadline:!1}):n.createElement(c.sP,{data:(e=>{const t=[];let a=0;return Object.keys(e).forEach((n=>{const r=e[n];t.push({label:r.name,backgroundColor:y[a],borderColor:y[a++],fill:!1,pointRadius:1,data:r.stats.map((e=>{return{x:(t=e,u()(t.key_as_string).format("MMM Do")),y:e.doc_count};var t}))})})),{datasets:t}})(r),options:E})};A.propTypes={author_slug:s().string.isRequired};const w=A},9460:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AuthorStatisticsTypefaceTable:()=>w,default:()=>C});a(29708);var n=a(11504),r=a(22748),s=a(1600),i=a(75328),c=a(3268),l=a.n(c),o=a(4880),d=a(95416),u=a(71272),m=a(56280),p=a(59324),h=a(35032),v=a(95360),g=a(19040),f=a(12048),y=a(72916),E=a(76060),b=a(73568);const A="author-statistics.downloads.title",w=e=>{let{author_slug:t}=e;const[a,c]=(0,n.useState)(1),[l,w]=(0,n.useState)(null),C=(0,n.useRef)(0),[k,S]=(0,n.useState)([]),[x,T]=(0,n.useState)({downloads:0,favs:0}),{data:_,isPending:O,isRejected:R,reload:I}=(0,y.SC)((0,b.k5)(t,a),{headers:E.Ce.accept_json},{json:!0,onResolve:e=>j(e),onReject:e=>{const t=e.response?e.response.status:500;t>=500&&t<600&&C.current<5?(C.current=C.current+1,I()):w(e)}}),j=(0,n.useCallback)((e=>{S(k.concat(e.items)),T({downloads:e.totals.downloads,favs:e.totals.favs})}),[k]),P=(0,n.useMemo)((()=>!!_&&a<Math.ceil(_.totals.typefaces/50)),[_,a]),N=(0,n.useCallback)((()=>{c((e=>e+1))}),[]),[q]=(0,s.c)({loading:O||R,hasNextPage:P,onLoadMore:N}),D=(0,n.useCallback)((function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=["mx-1"];return!1===r&&s.push("d-none","d-sm-inline-block"),n.createElement(n.Fragment,null,n.createElement(o.FontawesomeIcon,{extraClass:"mr-1",faIcon:a}),n.createElement("span",{className:s.join(" ")},d.O.trans(t)),n.createElement(u.c,{bg:"danger"},n.createElement(m.SimpleCounter,{count:e})))}),[]);if(!O){if(l)return n.createElement(g.AuthorStatisticsError,{titleTransKey:A});if((0,v.t7)(k))return n.createElement(f.AuthorStatisticsNoData,{titleTransKey:A,textTransKey:"author-statistics.no-data"})}return n.createElement(n.Fragment,null,n.createElement(p.c,{horizontal:"sm",className:"d-s-none"},n.createElement(p.c.Item,{className:"d-flex align-items-center w-100 w-sm-50"},D(x.downloads,"font-details.statistics.counts.downloads","fa-download",!0)),n.createElement(p.c.Item,{className:"d-flex align-items-center w-100 w-sm-50"},D(x.favs,"font-details.statistics.counts.favorites","fa-heart",!0))),n.createElement(r.c,{striped:!0,bordered:!0,hover:!0,size:"sm"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"#"),n.createElement("th",null,d.O.trans("author-statistics.downloads.font")),n.createElement("th",{className:"stats"},D(x.favs,"font-details.statistics.counts.favorites","fa-heart")),n.createElement("th",{className:"stats"},D(x.downloads,"font-details.statistics.counts.downloads","fa-download")))),n.createElement("tbody",null,k.map(((e,t)=>n.createElement("tr",{key:t},n.createElement("td",null,e.position),n.createElement("td",null,n.createElement("a",{href:(0,b.a8)(e.slug)},e.name)),n.createElement("td",{className:"text-right"},(0,h.i)(e.favs)),n.createElement("td",{className:"text-right"},(0,h.i)(e.downloads))))))),(O||R||P)&&n.createElement(i.c,{ref:q,className:"mx-auto",animation:"border",role:"status"}))};w.propTypes={author_slug:l().string.isRequired};const C=w},82052:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AdminFilter:()=>p,init:()=>h});a(29708),a(34088);var n=a(11504),r=a(28352),s=a(32479),i=a(97540),c=a(26460),l=a(3268),o=a.n(l),d=a(76104);const u=n.forwardRef((function(e,t){let{children:a,style:r,className:s,"aria-labelledby":c,onSubmit:l,onReset:o}=e;return n.createElement(i.c,{style:r,className:s,"aria-labelledby":c,onSubmit:l,onReset:o,ref:t,"data-testid":"adminFilterForm"},a)}));u.propTypes={children:o().node.isRequired,style:o().object.isRequired,className:o().string.isRequired,"aria-labelledby":o().string.isRequired,onSubmit:o().func.isRequired,onReset:o().func.isRequired};const m=n.forwardRef((function(e,t){let{children:a,id:r,checked:s}=e;return n.createElement(i.c.Check,{ref:t,type:"checkbox",label:a,id:r,name:"admin-filter",value:r,defaultChecked:s})}));m.propTypes={children:o().node.isRequired,id:o().string.isRequired,checked:o().bool.isRequired};const p=()=>{const e=n.useRef(null),t=(0,n.useCallback)((e=>{e.preventDefault();const t=new FormData(e.target).getAll("admin-filter").filter((e=>"allFonts"!==e)).join(",");d.aA.applyFilter(t)}),[]),a=(0,n.useCallback)((()=>{d.aA.applyFilter()}),[]),r=(0,n.useMemo)((()=>{var e;return(null!==(e=new URLSearchParams(window.location.search).get("filter"))&&void 0!==e?e:"").split(",")}),[]);return n.createElement(s.c,null,n.createElement(s.c.Toggle,{size:"sm"},n.createElement("i",{className:"fas fa-cog"}),n.createElement("span",null,"Admin")),n.createElement(s.c.Menu,{as:u,onSubmit:t,onReset:a,ref:e},n.createElement(s.c.Item,{as:m,checked:r.includes("unpublished"),id:"unpublished"},"Never published"),n.createElement(s.c.Item,{as:m,checked:r.includes("new-activity"),id:"new-activity"},"New activity"),n.createElement(s.c.Divider,null),n.createElement(s.c.Item,{as:m,checked:r.includes("awaiting-approval"),id:"awaiting-approval"},"Awaiting approval"),n.createElement(s.c.Item,{as:m,checked:r.includes("fully-approved"),id:"fully-approved"},"Fully approved"),n.createElement(s.c.Item,{as:m,checked:r.includes("semi-approved"),id:"semi-approved"},"Semi approved"),n.createElement(s.c.Item,{as:m,checked:r.includes("on-hold"),id:"on-hold"},"On hold"),n.createElement(s.c.Item,{as:m,checked:r.includes("banned"),id:"banned"},"Banned"),n.createElement(s.c.Divider,null),n.createElement(s.c.Item,{as:m,checked:r.includes("private"),id:"private"},"Private"),n.createElement(s.c.Item,{as:m,checked:r.includes("public"),id:"public"},"Public"),n.createElement("div",{id:"admin-filter__actions"},n.createElement(c.c,{size:"sm",variant:"secondary",type:"reset"},"Reset"),n.createElement(c.c,{size:"sm",variant:"primary",type:"submit"},"Submit"))))},h=()=>{const e=document.querySelector("#admin-filter-fonts-select");e&&r.createRoot(e).render(n.createElement(p,null))}},68992:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ColorPicker:()=>v,init:()=>g});a(54004),a(29708);var n=a(11504),r=a(37588),s=a.n(r),i=a(28352),c=a(76104),l=a(20404),o=a(348),d=a(33568),u=a(53660),m=a(2704);const p="#000000",h="#ffffff",v=()=>{const[e,t]=(0,n.useState)("#".concat(c.GW.fg)),[r,i]=(0,n.useState)("#".concat(c.GW.bg)),[v,g]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),{reload:E}=(0,l.useFontPreviews)(),b=(0,n.useRef)((0,d.debounce)((e=>{w(e.hex),(0,c.Ul)()}),1e3)).current,A=(0,n.useCallback)((e=>{c.GW.bg=e.replace("#",""),s()(".font-list-item .txt-preview-wrapper").css("background-color",e)}),[]),w=(0,n.useCallback)((e=>{c.GW.fg=e.replace("#",""),E(c.GW)}),[E]),C=(0,n.useCallback)((()=>{t(p),i(h),A(h),w(p),(0,c.Ul)()}),[A,w]),k=(0,n.useCallback)((()=>{const a=e,n=r;t(n),i(a),A(a),w(n),(0,c.Ul)()}),[r,e,A,w]),S=(0,n.useCallback)((e=>{"fg"===e?g(!0):y(!0)}),[]),x=(0,n.useCallback)(((e,a)=>{"fg"===e?t(a.hex):(i(a.hex),A(a.hex))}),[A]),T=(0,n.useCallback)((e=>{"Escape"===e.key&&(f||v)&&(g(!1),y(!1))}),[f,v]),_=(0,n.useMemo)((()=>{if(v||f)return n.lazy((()=>a.e(7408).then(a.bind(a,87408))))}),[f,v]);return(0,n.useEffect)((()=>()=>{b.cancel()}),[b]),(0,n.useEffect)((()=>(document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)})),[T]),(0,n.useEffect)((()=>(u.a.addEventListener(m._.RESET_COLORS,C),()=>{u.a.removeEventListener(m._.RESET_COLORS,C)})),[C]),n.createElement("div",null,n.createElement("div",{id:"bgSwatch",className:"swatch",title:"Background color",onClick:()=>{S("bg")},style:{backgroundColor:r}}),n.createElement("div",{id:"fgSwatch",className:"swatch",title:"Foreground color",onClick:()=>{S("fg")},style:{backgroundColor:e}}),n.createElement("span",{id:"switchPickers",title:"Swap colors",className:"swatchController",onClick:k}),n.createElement("span",{id:"resetPickers",title:"Reset colors",className:"swatchController",onClick:C}),v&&n.createElement("div",{className:"colorPicker"},n.createElement("div",{"data-testid":"colorPickerOutside",className:"colorPickerOutside",onClick:()=>{g(!1)}}),n.createElement(n.Suspense,{fallback:n.createElement(o.Spinner,null)},n.createElement(_,{disableAlpha:!0,color:e,onChange:e=>{x("fg",e),b(e)}}))),f&&n.createElement("div",{className:"colorPicker"},n.createElement("div",{className:"colorPickerOutside","data-testid":"colorPickerOutside",onClick:()=>{y(!1)}}),n.createElement(n.Suspense,{fallback:n.createElement(o.Spinner,null)},n.createElement(_,{disableAlpha:!0,color:r,onChange:e=>{x("bg",e)},onChangeComplete:()=>{(0,c.Ul)()}}))))};let g=()=>{const e=document.querySelector("#colorPickers");e&&i.createRoot(e).render(n.createElement(l.FontPreviewsProvider,null,n.createElement(v,null)))}},20404:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FontPreviewsProvider:()=>m,useFontPreviews:()=>p});var n=a(11504),r=a(3268),s=a.n(r),i=a(37588),c=a.n(i),l=a(27336),o=a(53660),d=a(20304);const u=n.createContext(void 0),m=e=>{let{children:t}=e;const a=(0,n.useMemo)((()=>new l.y(c(),o.a)),[]),r=(0,n.useCallback)((e=>{a.reload(e)}),[a]);return n.createElement(u.Provider,{value:{reload:r}},t)};m.propTypes={children:s().object};const p=()=>(0,d.useValidContext)(u,"FontPreviewsContext")},12944:(e,t,a)=>{"use strict";a.r(t),a.d(t,{settings:()=>n});const n={columnColor:"#8E151E",width:"100%",height:"300px",chartVersion:49}},22104:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Comment:()=>v});var n=a(11504),r=a(17412),s=a.n(r),i=a(76060),c=a(95416),l=a(6464),o=a(5472),d=a(3268),u=a.n(d),m=a(86888),p=a(53660),h=a(2704);const v=e=>{const t=e.comment;return n.createElement("li",{className:"d-flex mb-3"},n.createElement("div",{className:"flex-shrink-0"},n.createElement(l.Avatar,{size:"64",slug:t.username,alt:t.author})),n.createElement("div",{className:"flex-grow-1 ms-3"},!0===(e.allow_delete||(0,m.k)(e.comment.username))&&n.createElement("button",{type:"button",className:"btn btn-sm-alt btn-danger editable-btn comment__delete",onClick:()=>{(0,o.WC)(c.O.trans("font-details.comment.delete-confirm"),(()=>{(0,o.Yp)(),i.mk.deleteComment(e.typeface,e.comment.id,(t=>{e.on_delete(t),p.a.dispatchEvent(h._.COMMENT_DELETED,t)}))}))}},n.createElement("i",{className:"fas fa-times"})),n.createElement(g,{comment:t}),n.createElement("small",{title:t.created_at},s()(t.created_at).fromNow()),n.createElement(f,{comment:t})))};v.propTypes={on_delete:u().func,comment:u().object.isRequired,allow_delete:u().bool.isRequired,typeface:u().string.isRequired};const g=e=>n.createElement("h6",null,n.createElement("a",{href:e.comment.profileUrl},e.comment.author));g.propTypes={comment:u().object.isRequired};const f=e=>n.createElement("div",{dangerouslySetInnerHTML:{__html:e.comment.body}});f.propTypes={comment:u().object.isRequired}},56280:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Counter:()=>d,SimpleCounter:()=>o});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(43565),c=a(348),l=a(35032);const o=e=>{const t=!e.count||isNaN(e.count)?e.count:(0,l.i)(e.count);return n.createElement("span",{role:"counter",id:e.id||null,className:"counter"},t)};o.propTypes={count:s().oneOfType([s().string,s().number]).isRequired,id:s().string};const d=e=>{const[t,a]=(0,n.useState)(e.count||0),[r,s]=(0,n.useState)(e.show_spinner||!1),i=e=>{a(e.data.count),s(!1)};(0,n.useEffect)((()=>{e.counter.registerCallback(i)}),[e.counter]);const l=void 0===e.with_brackets||e.with_brackets,d=void 0!==e.render_zero&&e.render_zero;let u,m,p;return 0===t&&!0===r?n.createElement(c.Spinner,null):(u=m=p="",!0===l&&(u="(",m=")"),(t>0||!0===d)&&(p="".concat(u).concat(t).concat(m)),n.createElement(o,{count:p,id:e.id||null}))};d.propTypes={count:s().number,with_brackets:s().bool,render_zero:s().bool,show_spinner:s().bool,counter:s().instanceOf(i.C).isRequired,id:s().string}},35664:(e,t,a)=>{"use strict";a.r(t),a.d(t,{EditModeProvider:()=>d,useEditMode:()=>u});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(20304),c=a(37588),l=a.n(c);const o=n.createContext(void 0),d=e=>{let{children:t}=e;const[a,r]=(0,n.useState)(!0),[s,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(a){l()("#toggle-edit-mode").on("click",(e=>{e.preventDefault(),i((e=>!e))})),r(!1)}}),[a]),n.createElement(o.Provider,{value:{editMode:s}},t)};d.propTypes={children:s().node.isRequired};const u=()=>(0,i.useValidContext)(o,"EditModeContext")},63672:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FlashMessage:()=>g,FlashMessageProvider:()=>u,showFlashMessage:()=>h,useFlashMessageDispatch:()=>p,useFlashMessageState:()=>m});a(29708);var n=a(11504),r=a(6992),s=a(66704),i=a(20304);const c={show:!1,type:"light",message:""},l=(0,n.createContext)(),o=(0,n.createContext)(),d=(e,t)=>({show:void 0===t.show||t.show,type:t.type,message:t.message}),u=e=>{let{children:t}=e;const[a,r]=(0,n.useReducer)(d,c);return n.createElement(l.Provider,{value:a},n.createElement(o.Provider,{value:r},t))},m=()=>(0,i.useValidContext)(l,"FlashMessageStateContext"),p=()=>(0,i.useValidContext)(o,"FlashMessageDispatchContext"),h=(e,t,a)=>{e({message:t,type:a}),setTimeout((()=>{v(e)}),s.y)},v=e=>{e(c)},g=()=>{const e=m(),t=p();return(0,n.useEffect)((()=>{!0===e.show&&setTimeout((()=>v(t)),s.y)}),[t,e.show]),n.createElement("div",{id:"react-flash-container",className:"d-flex justify-content-center"},e.show&&n.createElement(r.c,{show:e.show,variant:e.type,onClose:()=>v(t),dismissible:!0},e.message))}},208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useCount:()=>i});a(29708);var n=a(11504),r=a(68188),s=a.n(r);const i=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count";const[i,c]=(0,n.useState)(0),l=s().generate(e,{slug:t}),o=(0,n.useCallback)((e=>{c(e),a.count=e}),[a]);return(0,n.useEffect)((()=>{fetch(l).then((e=>e.json())).then((e=>o(e[r])))}),[r,o,l]),i}},26224:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDropbox:()=>r});a(29708);var n=a(11504);const r=()=>{const e=(0,n.useRef)(null),[t,a]=(0,n.useState)(!1),r=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?a(!0):"dragleave"===e.type&&a(!1)}),[]),s=(0,n.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),a(!1),e.dataTransfer){const t=e.dataTransfer.files;if(t.length>0)return Array.from(t)}return[]}),[]),i=(0,n.useCallback)((e=>{if(e.preventDefault(),e.target){const t=e.target.files;if(t.length>0)return Array.from(t)}return[]}),[]),c=(0,n.useCallback)((()=>{e.current.click()}),[]);return{dragActive:t,handleDrag:r,handleDrop:s,handleInputChange:i,inputRef:e,handleUploadButton:c}}},34936:(e,t,a)=>{"use strict";a.r(t),a.d(t,{init:()=>u});a(29708);var n=a(3268),r=a.n(n),s=a(11504),i=a(28352),c=a(32479),l=a(4880),o=a(95416);const d=e=>{let{input:t,data:a}=e;const n=a.choices,r=(0,s.useRef)(t),[i,d]=(0,s.useState)(a.value);function u(e){return n.find((t=>t.value===e))}return s.createElement(c.c,{onSelect:e=>{d(e),r.current.value=e}},s.createElement(c.c.Toggle,{variant:"light",id:"dropdown-basic",className:"text-start"},s.createElement(l.FontawesomeIcon,{faNamespace:"fas",faIcon:o.O.trans((e=>{const t=u(e);return t?t.attr["data-icon"]:""})(i))})," ",o.O.trans((e=>{const t=u(e);return t?t.label:""})(i)),s.createElement(l.FontawesomeIcon,{faNamespace:"fas",faIcon:"fa-caret-down",extraClass:"float-end mt-1"})),s.createElement(c.c.Menu,null,n.map(((e,t)=>s.createElement(c.c.Item,{as:"button",type:"button",key:t,eventKey:e.value},s.createElement(l.FontawesomeIcon,{faNamespace:"fas",faIcon:e.attr["data-icon"]})," ",o.O.trans(e.label))))))};d.propTypes={input:r().instanceOf(HTMLInputElement).isRequired,data:r().object.isRequired};const u=e=>{document.querySelectorAll(e).forEach((e=>{const t=document.getElementById(e.dataset.ref);i.createRoot(e).render(s.createElement(d,{input:t,data:JSON.parse(e.dataset.data)}))}))}},93116:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LazyImage:()=>i});var n=a(11504),r=a(3268),s=a.n(r);const i=e=>{let{className:t,src:a,alt:r}=e;const s=(0,n.useRef)(),i=(0,n.useCallback)((()=>{const e=s.current;e.setAttribute("src",a),e.removeAttribute("data-src")}),[a]);return n.createElement("img",{"data-src":a,src:"data:image/gif;base64,R0lGODlhKwALAPEAAP///wAAAIKCggAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAKwALAAACMoSOCMuW2diD88UKG95W88uF4DaGWFmhZid93pq+pwxnLUnXh8ou+sSz+T64oCAyTBUAACH5BAkKAAAALAAAAAArAAsAAAI9xI4IyyAPYWOxmoTHrHzzmGHe94xkmJifyqFKQ0pwLLgHa82xrekkDrIBZRQab1jyfY7KTtPimixiUsevAAAh+QQJCgAAACwAAAAAKwALAAACPYSOCMswD2FjqZpqW9xv4g8KE7d54XmMpNSgqLoOpgvC60xjNonnyc7p+VKamKw1zDCMR8rp8pksYlKorgAAIfkECQoAAAAsAAAAACsACwAAAkCEjgjLltnYmJS6Bxt+sfq5ZUyoNJ9HHlEqdCfFrqn7DrE2m7Wdj/2y45FkQ13t5itKdshFExC8YCLOEBX6AhQAADsAAAAAAAAAAAA=",alt:r,ref:s,className:t,onLoad:()=>i()})};i.propTypes={className:s().string.isRequired,src:s().string.isRequired,alt:s().string}},77356:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AvatarEditIcon:()=>i});var n=a(11504),r=a(3268),s=a.n(r);const i=e=>{let{onClick:t}=e;return n.createElement("button",{type:"button",className:"edit-icon-stack btn btn-primary rounded-circle position-absolute",onClick:t},n.createElement("i",{className:"fas fa-camera fa-inverse fa-1x","data-testid":"camera-icon"}))};i.propTypes={onClick:s().func.isRequired}},50656:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AvatarModalProvider:()=>l,useAvatarModal:()=>o});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(20304);const c=n.createContext(void 0),l=e=>{let{children:t}=e;const[a,r]=(0,n.useState)(!1),[s,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),d=(0,n.useCallback)((()=>{i(null),o(null)}),[]),u=(0,n.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=document.querySelector("#avatar-modal form");t&&!e&&t.reset(),r(!1),d()}),[d]),m=(0,n.useMemo)((()=>({content:s,setContent:i,extraButton:l,setExtraButton:o,resetModal:d,showEditModal:a,closeModal:u,setShowEditModal:r})),[u,s,l,d,a]);return n.createElement(c.Provider,{value:m},t)};l.propTypes={children:s().node.isRequired};const o=()=>(0,i.useValidContext)(c,"AvatarModalContext")},14040:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AvatarServices:()=>n});const n={Local:"local",Google:"google",Gravatar:"gravatar",Facebook:"facebook"}},21108:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AvatarService:()=>c});var n=a(11504),r=a(3268),s=a.n(r),i=a(97540);const c=e=>{let{icon:t,id:a,defaultChecked:r,clickable:s=!1,label:c,children:l}=e;return n.createElement(n.Fragment,null,n.createElement("div",{className:"service-info d-flex align-items-center row-part rounded-left avatar-service"},n.createElement(i.c.Check,{type:"radio",id:a,custom:!0,className:"d-flex justify-content-center align-items-center gap-1"},n.createElement(i.c.Check.Input,{name:"service",value:a,defaultChecked:r,type:"radio"}),n.createElement(i.c.Check.Label,{className:"d-flex align-items-center gap-1"},t,n.createElement("span",null,c)))),n.createElement("div",{className:"service-avatar row-part rounded-right ".concat(s?"clickable":"")},l))};c.propTypes={icon:s().node.isRequired,id:s().string.isRequired,defaultChecked:s().bool.isRequired,clickable:s().bool,label:s().string.isRequired,children:s().node}},24872:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FacebookAvatarService:()=>u});var n=a(11504),r=a(21108),s=a(14040),i=a(3268),c=a.n(i),l=a(80872),o=a(73568),d=a(33568);const u=e=>{let{defaultChecked:t}=e;const{userSlug:a}=(0,l.useProfileAvatar)();return n.createElement(r.AvatarService,{id:s.AvatarServices.Facebook,label:(0,d.capitalize)(s.AvatarServices.Facebook),icon:n.createElement("i",{className:"fab fa-facebook-f"}),defaultChecked:t,clickable:!1},n.createElement("img",{src:(0,o.ee)(a,"s",s.AvatarServices.Facebook,!0),alt:s.AvatarServices.Facebook}))};u.propTypes={defaultChecked:c().bool.isRequired}},68988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GoogleAvatarService:()=>u});var n=a(11504),r=a(21108),s=a(73568),i=a(3268),c=a.n(i),l=a(14040),o=a(80872),d=a(33568);const u=e=>{let{defaultChecked:t}=e;const{userSlug:a}=(0,o.useProfileAvatar)();return n.createElement(r.AvatarService,{id:l.AvatarServices.Google,label:(0,d.capitalize)(l.AvatarServices.Google),icon:n.createElement("i",{className:"fab fa-google"}),defaultChecked:t,clickable:!1},n.createElement("img",{src:(0,s.ee)(a,"s",l.AvatarServices.Google,!0),alt:l.AvatarServices.Google}))};u.propTypes={defaultChecked:c().bool.isRequired}},49896:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GravatarAvatarService:()=>u});var n=a(11504),r=a(21108),s=a(73568),i=a(3268),c=a.n(i),l=a(14040),o=a(80872),d=a(33568);const u=e=>{let{defaultChecked:t}=e;const{userSlug:a}=(0,o.useProfileAvatar)();return n.createElement(r.AvatarService,{id:l.AvatarServices.Gravatar,label:(0,d.capitalize)(l.AvatarServices.Gravatar),icon:n.createElement("i",{className:"fa fo-gravatar"}),defaultChecked:t,clickable:!1},n.createElement("img",{src:(0,s.ee)(a,"s",l.AvatarServices.Gravatar),alt:l.AvatarServices.Gravatar}))};u.propTypes={defaultChecked:c().bool.isRequired}},49632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LocalAvatarCroppingModal:()=>E,LocalAvatarCroppingModalButton:()=>b});a(79768),a(54004),a(29708);var n=a(11504),r=a(97540),s=a(26460),i=a(50656),c=a(78264),l=a.n(c),o=a(76060),d=a(63672),u=a(26224),m=a(3268),p=a.n(m),h=a(73568),v=a(95416),g=a(80872),f=a(14040),y=a(72480);const E=e=>{let{username:t}=e;const a=(0,n.useRef)(null),c=(0,n.useRef)(null),m=(0,n.useRef)(null),[p,E]=(0,n.useState)(null),[b,A]=(0,n.useState)(1),[w,C]=(0,n.useState)(!0),{socialAuthServices:k,addLocalToServices:S,removeLocalFromServices:x,setCurrentAvatarProvider:T,updateAvatar:_,currentAvatarProvider:O,avifSupport:R}=(0,g.useProfileAvatar)(),{closeModal:I,resetModal:j}=(0,i.useAvatarModal)(),{handleDrag:P,dragActive:N,handleDrop:q,handleInputChange:D,inputRef:L,handleUploadButton:F}=(0,u.useDropbox)(),M=(0,d.useFlashMessageDispatch)(),U=(0,n.useMemo)((()=>{const e=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];return R&&e.push("image/avif"),e}),[R]),z=(0,n.useCallback)((e=>{E(e[0]),m.value=1,A(1)}),[]),H=(0,n.useCallback)((e=>{A(parseFloat(e.target.value))}),[]),B=(0,n.useCallback)((()=>{o.mk.deleteAvatar(t).then((()=>{E(null),a.current.reset(),A(1),(0,y.I)(),_(),O!==f.AvatarServices.Local?j():(x(),I())})).catch((()=>{M({message:v.O.trans("errors.generic"),type:"danger"})}))}),[I,O,M,x,j,_,t]),G=(0,n.useCallback)((async()=>{const e=p?p.type:void 0,t=c.current.getImage().toDataURL(e),a=await fetch(t);return await a.blob()}),[p]),W=(0,n.useCallback)((async e=>{e.preventDefault();const a=await G(),n=new FormData;n.append("blob",a),n.append("extension",p.name.split(".").pop()),o.mk.uploadAvatar(t,n).then((()=>{T(f.AvatarServices.Local),(0,y.I)(),S(),_(),I(),M({type:"info",message:v.O.trans("user-profile.avatar.alert.success")})})).catch((()=>{M({message:v.O.trans("errors.generic"),type:"danger"})}))}),[S,I,M,G,p,T,_,t]);return(0,n.useEffect)((()=>{w&&!p&&k.includes(f.AvatarServices.Local)&&fetch((0,h.ae)(t)).then((e=>{e.ok&&e.blob().then((e=>{E(new File([e],"".concat(t,".").concat(e.type.replace("image/",""))))}))})).catch((()=>{M({message:v.O.trans("errors.generic"),type:"danger"})})).finally((()=>{C(!1)}))}),[M,p,w,k,t]),(0,n.useEffect)((()=>{const e=document.querySelector('.modal-footer button[type="submit"]');if(e)return e.addEventListener("click",W),()=>{e.removeEventListener("click",W)}}),[W]),(0,n.useEffect)((()=>{const e=document.querySelector('.modal-footer button[type="submit"]');if(e)return p?e.removeAttribute("disabled"):e.setAttribute("disabled","true"),()=>{e.removeAttribute("disabled")}}),[p]),n.createElement(r.c,{ref:a,id:"local-avatar-form",onDragEnter:P},n.createElement("input",{"data-testid":"file-input",name:"images",ref:L,id:"dropbox-input",className:"dropbox-input",type:"file",accept:U.join(","),onChange:e=>{z(D(e))}}),!p&&n.createElement("div",{className:"dropbox-form","data-testid":"dropbox"},n.createElement("label",{className:"dropbox-label ".concat(N&&"dropbox-drag-active"),htmlFor:"dropbox-input"},n.createElement("div",null,n.createElement("p",null,v.O.trans("user-profile.avatar.modal.body.services.local.cropping.text")),n.createElement("button",{className:"dropbox-upload-button",type:"button",onClick:F},v.O.trans("user-profile.avatar.modal.body.services.local.cropping.button")))),N&&n.createElement("div",{className:"dropbox-drag-file-element",onDragEnter:P,onDragLeave:P,onDragOver:P,onDrop:e=>{z(q(e))}})),p&&n.createElement("div",{id:"avatar-cropping"},n.createElement(l(),{ref:c,width:250,height:250,image:p,borderRadius:125,scale:b,border:0}),n.createElement("div",{id:"cropping-actions"},n.createElement(r.c.Group,{controlId:"zoomRange"},n.createElement(r.c.Label,null,v.O.trans("user-profile.avatar.modal.body.services.local.cropping.zoom")),n.createElement(r.c.Range,{min:1,max:3,step:.01,value:b,onChange:H})),k.includes(f.AvatarServices.Local)&&n.createElement(n.Fragment,null,n.createElement(s.c,{variant:"link",type:"button",id:"upload-button",onClick:F},v.O.trans("user-profile.avatar.modal.body.services.local.cropping.button")),n.createElement(s.c,{variant:"link",type:"button",id:"delete-button",onClick:B},v.O.trans("user-profile.avatar.modal.body.services.local.cropping.delete"))))))};E.propTypes={username:p().string.isRequired};const b=()=>{const{resetModal:e}=(0,i.useAvatarModal)(),t=(0,n.useCallback)((()=>{e()}),[e]);return n.createElement(s.c,{className:"btn-outline-dark",id:"avatar-back",onClick:t},v.O.trans("modal.action.back"))}},58488:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LocalAvatarService:()=>p});var n=a(11504),r=a(21108),s=a(50656),i=a(49632),c=a(3268),l=a.n(c),o=a(77356),d=a(80872),u=a(14040),m=a(6464);const p=e=>{let{defaultChecked:t}=e;const{userSlug:a,avatarUpdated:c}=(0,d.useProfileAvatar)(),{setContent:l,setExtraButton:p}=(0,s.useAvatarModal)(),h=(0,n.useCallback)((()=>{l(n.createElement(i.LocalAvatarCroppingModal,{username:a})),p(n.createElement(i.LocalAvatarCroppingModalButton,null))}),[l,p,a]);return n.createElement(r.AvatarService,{id:u.AvatarServices.Local,icon:n.createElement("img",{src:"/img/1001fonts-avatar-48x48.png",alt:"1001Fonts"}),defaultChecked:t,label:"1001Fonts"},n.createElement(m.Avatar,{size:"85",slug:a,alt:"local-image",provider:u.AvatarServices.Local,withTimestamp:c}),n.createElement("div",{className:"avatar-overlay",onClick:h,"data-testid":"avatar-overlay"},n.createElement(o.AvatarEditIcon,{onClick:h})))};p.propTypes={defaultChecked:l().bool.isRequired}},95276:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ProfileAvatarModalBody:()=>v});var n=a(11504),r=a(3268),s=a.n(r),i=a(42704),c=a(97540),l=a(58488),o=a(49896),d=a(50656),u=a(68988),m=a(14040),p=a(80872),h=a(24872);const v=e=>{let{changeAvatarService:t}=e;const{socialAuthServices:a,currentAvatarProvider:r}=(0,p.useProfileAvatar)(),s=(0,n.useRef)(null),{content:v}=(0,d.useAvatarModal)(),g=(0,n.useCallback)((e=>{t(e.target.value)}),[t]);return n.createElement(i.c.Body,null,v||n.createElement(c.c,{ref:s,id:"service-form",onChange:g,"data-testid":"service-form"},n.createElement(l.LocalAvatarService,{defaultChecked:r===m.AvatarServices.Local}),a.includes(m.AvatarServices.Google)&&n.createElement(u.GoogleAvatarService,{defaultChecked:r===m.AvatarServices.Google}),a.includes(m.AvatarServices.Facebook)&&n.createElement(h.FacebookAvatarService,{defaultChecked:r===m.AvatarServices.Facebook}),n.createElement(o.GravatarAvatarService,{defaultChecked:r===m.AvatarServices.Gravatar})))};v.propTypes={changeAvatarService:s().func.isRequired,avatarService:s().string.isRequired}},72216:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ProfileAvatarModalFooter:()=>h});var n=a(11504),r=a(3268),s=a.n(r),i=a(42704),c=a(26460),l=a(50656),o=a(76060),d=a(80872),u=a(95416),m=a(63672),p=a(72480);const h=e=>{let{avatarService:t}=e;const{extraButton:a,closeModal:r}=(0,l.useAvatarModal)(),{userSlug:s,setCurrentAvatarProvider:h,updateAvatar:v}=(0,d.useProfileAvatar)(),g=(0,m.useFlashMessageDispatch)(),f=(0,n.useCallback)((async e=>{e.preventDefault(),o.mk.updateAvatarService(s,t).then((()=>{h(t),(0,p.I)(),v(),r(t)})).catch((e=>{console.error(e),g({type:"danger",message:u.O.trans("errors.generic")})}))}),[t,r,g,h,v,s]);return(0,n.useEffect)((()=>{if(!a){const e=document.querySelector('.modal-footer button[type="submit"]');return e.addEventListener("click",f),()=>{e.removeEventListener("click",f)}}}),[a,f]),n.createElement(i.c.Footer,null,a,n.createElement(c.c,{className:"btn-outline-dark",onClick:r},u.O.trans("modal.action.cancel")),n.createElement(c.c,{variant:"primary",type:"submit"},u.O.trans("modal.action.save")))};h.propTypes={avatarService:s().string.isRequired}},57360:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ProfileAvatarModalHeader:()=>i});var n=a(11504),r=a(42704),s=a(95416);const i=()=>n.createElement(r.c.Header,{closeButton:!0},n.createElement(r.c.Title,null,s.O.trans("user-profile.avatar.modal.headline")))},28208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ProfileAvatarModal:()=>d});a(29708);var n=a(11504),r=a(42704),s=a(57360),i=a(72216),c=a(95276),l=a(80872),o=a(50656);const d=()=>{const{showEditModal:e,closeModal:t}=(0,o.useAvatarModal)(),{currentAvatarProvider:a}=(0,l.useProfileAvatar)(),[d,u]=(0,n.useState)(a);return n.createElement(r.c,{show:e,onHide:t,backdrop:"static",id:"avatar-modal"},n.createElement(s.ProfileAvatarModalHeader,null),n.createElement(c.ProfileAvatarModalBody,{changeAvatarService:u,avatarService:d}),n.createElement(i.ProfileAvatarModalFooter,{avatarService:d}))}},80872:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ProfileAvatarProvider:()=>l,useProfileAvatar:()=>o});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(20304);const c=n.createContext(void 0),l=e=>{let{userSlug:t,src:a,socialAuthServices:r,currentAvatarProvider:s,avifSupport:i,children:l}=e;const[o,d]=(0,n.useState)(r),[u,m]=(0,n.useState)(s),[p,h]=(0,n.useState)(null),v=(0,n.useCallback)((()=>{h((new Date).getTime())}),[]),g=(0,n.useCallback)((()=>{d((e=>[...e,"local"]))}),[]),f=(0,n.useCallback)((()=>{d((e=>e.filter((e=>"local"!==e))))}),[]);return n.createElement(c.Provider,{value:{userSlug:t,src:a,socialAuthServices:o,addLocalToServices:g,removeLocalFromServices:f,currentAvatarProvider:u,setCurrentAvatarProvider:m,avatarUpdated:p,updateAvatar:v,avifSupport:i}},l)};l.propTypes={children:s().node.isRequired,src:s().string.isRequired,userSlug:s().string.isRequired,currentAvatarProvider:s().string.isRequired,socialAuthServices:s().arrayOf(s().string).isRequired,avifSupport:s().bool.isRequired};const o=()=>(0,i.useValidContext)(c,"ProfileAvatarContext")},55264:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ProfileAvatar:()=>m,default:()=>h});var n=a(11504),r=a(3268),s=a.n(r),i=a(6464),c=a(50656),l=a(63672),o=a(77356),d=a(28208),u=a(80872);const m=()=>{const{setShowEditModal:e}=(0,c.useAvatarModal)(),{userSlug:t}=(0,u.useProfileAvatar)(),a=(0,n.useCallback)((()=>{e(!0)}),[e]);return n.createElement("div",null,n.createElement(i.Avatar,{size:"s",slug:t,alt:t,id:"profile-avatar",className:"d-flex align-self-start avatar rounded-circle avatar-s"}),n.createElement("div",{className:"avatar-overlay",onClick:a},n.createElement(o.AvatarEditIcon,{onClick:a})),n.createElement(d.ProfileAvatarModal,null))},p=e=>{let{src:t,userSlug:a,socialAuthServices:r,currentAvatarProvider:s,avifSupport:i}=e;return n.createElement(c.AvatarModalProvider,null,n.createElement(l.FlashMessageProvider,null,n.createElement(l.FlashMessage,null),n.createElement(u.ProfileAvatarProvider,{src:t,userSlug:a,socialAuthServices:JSON.parse(r),currentAvatarProvider:s,avifSupport:"true"===i},n.createElement(m,null))))};p.propTypes={src:s().string.isRequired,userSlug:s().string.isRequired,currentAvatarProvider:s().string.isRequired,socialAuthServices:s().string.isRequired,avifSupport:s().string.isRequired};const h=p},46112:(e,t,a)=>{"use strict";a.r(t),a.d(t,{init:()=>r});a(29708);const n=(e,t)=>(e.forEach((e=>{e.found=e.count>0&&e.slug!==t.slug})),e),r=async()=>{const e=document.querySelectorAll(".query-tag.sibling-tag");e.length&&await async function(e){const{default:t}=await Promise.resolve().then(a.t.bind(a,28352,19)),{default:r}=await Promise.resolve().then(a.t.bind(a,11504,19)),{SiblingTag:s}=await Promise.resolve().then(a.bind(a,69960));e.forEach((e=>{const a=JSON.parse(e.dataset.siblings),i=JSON.parse(e.dataset.tag),c=e.dataset.href,l=e.dataset.delete;n(a,i),a.filter((e=>!0===e.found)).length&&t.createRoot(e).render(r.createElement(s,{tag:i,siblings:a,href:c,deleteHref:l,menuParent:document.getElementById("react-body-helper")}))}))}(e)}},82012:(e,t,a)=>{"use strict";a.r(t),a.d(t,{init:()=>m});var n=a(11504),r=a(28352),s=a(37588),i=a.n(s),c=a(83040),l=a(76104),o=a(27336),d=a(53660);const u=new o.y(i(),d.a),m=()=>{document.querySelectorAll(".btn-sample-text").forEach((e=>{const t=e.closest(".font-list-item").querySelector(".txt-preview"),a=a=>{p(a,t),e.dataset.text=a};r.createRoot(e).render(n.createElement(c.SampleTextEditor,{name:e.dataset.name,slug:e.dataset.font,text:e.dataset.text,onKeyUp:a,onSubmitSuccess:a}))}))},p=(e,t)=>{const a=Object.assign({},l.GW);a.text=e,t.setAttribute("alt",e),u.reloadImage(t,a)}},3020:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SampleTextButton:()=>o});var n=a(11504),r=a(95416),s=a(3268),i=a.n(s),c=a(26460),l=a(4880);const o=e=>{let{onClick:t}=e;return n.createElement(c.c,{variant:"secondary",size:"xs",className:"text-white",onClick:t},n.createElement(l.FontawesomeIcon,{faIcon:"fa-pencil-alt",extraClass:"text-warning mr-1"})," ",r.O.trans("font-details.sample_text.edit"))};o.propTypes={onClick:i().func.isRequired}},83040:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SampleTextEditor:()=>d});a(29708);var n=a(11504),r=a(3020),s=a(77512),i=a(3268),c=a.n(i),l=a(76060),o=a(71088);const d=e=>{let{slug:t,text:a,name:i,onSubmitSuccess:c=o.noop,onKeyUp:d=o.noop}=e;const[u,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)(a),[v,g]=(0,n.useState)(a),f=()=>{y(),d(p)},y=()=>{m(!u)},E=e=>{y(),l.Sk.updateFontSampleText(t,e,(e=>{const t=e.text;g(t),h(t),c(t)}))};return!0===u?n.createElement(s.SampleTextForm,{name:i,text:v,onKeyUp:d,onCancel:f,onSubmit:E}):n.createElement(r.SampleTextButton,{onClick:f})};d.propTypes={slug:c().string.isRequired,text:c().string.isRequired,name:c().string.isRequired,onSubmitSuccess:c().func,onKeyUp:c().func}},77512:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SampleTextForm:()=>m});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(33568),c=a(97540),l=a(26460),o=a(70784),d=a(18248),u=a(95416);const m=e=>{let{text:t,name:a,onCancel:r,onSubmit:s,onKeyUp:m}=e;const[p,h]=(0,n.useState)(t);return n.createElement(c.c,null,n.createElement(o.c,null,n.createElement(d.c,{xs:4},n.createElement(c.c.Control,{placeholder:a,size:"sm",value:p,onKeyUp:(0,i.debounce)((()=>{p.length&&m(p)}),250),onChange:e=>{h(e.target.value)}})),n.createElement(d.c,null,n.createElement(l.c,{type:"submit",size:"sm",variant:"primary",onClick:e=>{e.preventDefault(),s(p)},className:"me-1"},u.O.trans("font-details.sample_text.save")),n.createElement(l.c,{type:"button",size:"sm",variant:"secondary",onClick:r,className:"me-1"},u.O.trans("font-details.sample_text.cancel")))))};m.propTypes={onSubmit:s().func.isRequired,onCancel:s().func.isRequired,onKeyUp:s().func.isRequired,text:s().string.isRequired,name:s().string.isRequired}},35932:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TagCloud:()=>o,init:()=>d});a(54004);var n=a(11504),r=a(28352),s=a(3268),i=a.n(s),c=a(33568),l=a(65516);const o=e=>{let{container:t,tags:a,baseTags:r,baseUrl:s}=e;const i=(0,n.useRef)(t.offsetWidth),o=(0,n.useMemo)((()=>((e,t)=>((e=e.filter((e=>!1===t.includes(e.slug)))).forEach((e=>{e.value=e.count})),e))(a,r)),[r,a]),d=(0,n.useMemo)((()=>(0,c.minBy)(o,"count").count),[o]),u=(0,n.useMemo)((()=>(0,c.maxBy)(o,"count").count),[o]),m=(0,n.useCallback)((e=>{const t=u-d,a=e.count/t*100;return u/100*a}),[u,d]),p=(0,n.useCallback)((e=>(0,c.clamp)(10.6*m(e),38,106)),[m]),h=(0,n.useCallback)((()=>90*~~(2*Math.random())-45),[]);return n.createElement(l.c,{data:o,fontSize:p,spiral:"rectangular",font:'"Roboto Slab", Helvetica, Arial, sans-serif',rotate:h,width:i.current,onWordClick:(e,t)=>{const a=(e=>r.concat([e.slug]))(t);window.location.href=s.replace("__PLACEHOLDER__",a.join("+"))}})};o.propTypes={tags:i().array.isRequired,container:i().object.isRequired,baseTags:i().array,baseUrl:i().string.isRequired};const d=e=>{const t=document.getElementById(e);t&&r.createRoot(t).render(n.createElement(o,{tags:JSON.parse(t.dataset.tags),baseTags:JSON.parse(t.dataset.baseTags),container:t,baseUrl:t.dataset.baseUrl}))}},69960:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SiblingTag:()=>d,SiblingsMenu:()=>u});a(54004),a(29708);var n=a(11504),r=a(28352),s=a(3268),i=a.n(s),c=a(4880);const l="btn btn-xs btn-danger clear-filter-tag",o="fas fa-times text-white",d=e=>{const[t,a]=(0,n.useState)(!1),s=(0,n.useRef)(),i=e.menuParent,d=r.createRoot(i),m=()=>{d.unmount(),a(!1)};return n.createElement("span",{className:"badge bg-light",ref:s,onClick:r=>{if((e=>{const t=e.target.className;return t===o||t===l})(r))return;r.preventDefault();const i=n.createElement(u,{tag:e.tag,siblings:e.siblings,href:e.href,hideHandler:m,badge:s.current});t?d.unmount():d.render(i),a(!t)}},n.createElement("a",{href:e.href},e.tag.text),n.createElement(c.FontawesomeIcon,{customClass:"caret fas fa-caret-down text-black-50"}),n.createElement("a",{href:e.deleteHref,className:l},n.createElement(c.FontawesomeIcon,{customClass:o})))};d.propTypes={tag:i().object.isRequired,siblings:i().array.isRequired,href:i().string.isRequired,deleteHref:i().string.isRequired,menuParent:i().object.isRequired};const u=e=>{const[t,a]=(0,n.useState)([]),r=(0,n.useRef)(),s=t=>e.href.replace(e.tag.slug,t.slug),i=e=>{let t="tag-sibling";return!0===e.current?t+=" current":!1===e.found&&(t+=" inactive"),t};(0,n.useEffect)((()=>{const t=t=>{r.current&&!r.current.contains(t.target)&&e.badge&&!e.badge.contains(t.target)&&e.hideHandler()};return document.addEventListener("mousedown",t,{passive:!0}),document.addEventListener("scroll",t,{passive:!0}),a((t=>(t.forEach((t=>{t.slug===e.tag.slug&&(t.current=!0)})),t))(e.siblings)),function(){document.removeEventListener("mousedown",t,{passive:!0}),document.removeEventListener("scroll",t,{passive:!0})}}),[e]);const c=e.badge.getBoundingClientRect(),l={position:"fixed",display:"block",left:c.x,top:c.top+c.height,minWidth:c.width};return n.createElement("ul",{id:"siblings-menu",className:"list-unstyled",style:l,ref:r},t.map(((e,t)=>n.createElement("li",{key:t,className:i(e)},(e=>{const t=e.slug;return e.found?n.createElement("a",{href:s(e)},t):t})(e)))))};u.propTypes={tag:i().object.isRequired,href:i().string.isRequired,siblings:i().array.isRequired,hideHandler:i().func.isRequired,badge:i().object.isRequired}},69932:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TagFormProvider:()=>l,useTagForm:()=>o});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(20304);const c=n.createContext(void 0),l=e=>{let{children:t}=e;const[a,r]=(0,n.useState)("");return n.createElement(c.Provider,{value:{query:a,setQuery:r}},t)};l.propTypes={children:s().node.isRequired};const o=()=>(0,i.useValidContext)(c,"TagFormContext")},19864:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TagForm:()=>f});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(97540),c=a(95416),l=a(67944),o=(a(43456),a(13624)),d=a.n(o),u=a(68188),m=a.n(u),p=a(37588),h=a.n(p),v=a(69932),g=a(29926);const f=e=>{let{fontUserTagSlug:t,tagsType:a,renderAntiSpam:r,hasSiteAdminPrivileges:s,createUri:o,tabIndex:u,tags:p}=e;const{toggleAdminMode:f,adminMode:y,handleCreateTag:E,handleDeleteAllTags:b}=(0,l.useTags)(),{setQuery:A}=(0,v.useTagForm)(),[w,C]=(0,n.useState)(!0),[k,S]=(0,n.useState)(""),x=(0,n.useCallback)((e=>{A(e),S(e)}),[A]),T=(0,n.useMemo)((()=>new(d())({remote:{cache:!1,url:m().generate("filter_tags",{filter:"WILDCARD"}),wildcard:"WILDCARD",rateLimitWait:300},datumTokenizer:d().tokenizers.whitespace,queryTokenizer:d().tokenizers.whitespace})),[]),_=(0,n.useMemo)((()=>({async:!0,hint:!0,highlight:!0,minLength:2})),[]),O=(0,n.useMemo)((()=>({name:"tags",displayKey:"text",source:T,limit:25})),[T]),R=(0,n.useMemo)((()=>"typefacefont"===a?"input[id$='add-tag-typefacefont-".concat(t,"']"):"input[id$='add-tag-typeface-".concat(t,"']")),[t,a]);(0,n.useEffect)((()=>{w&&(C(!1),h()(R).typeahead(_,O).keyup((function(){h()(this).tooltip("hide")})))}),[O,t,w,R,_]),(0,n.useEffect)((()=>{const e={delay:{show:500,hide:0}};h()(".add-tag-form-container").find('[data-toggle="tooltip"]').each(((t,a)=>{new g.o5(a,e)}))}),[]);const I=(0,n.useCallback)((e=>{if("Escape"===e.key){const t=h()(R);e.preventDefault(),x(""),t.typeahead("val","")}}),[R,x]),j=(0,n.useCallback)((e=>{if(e.some((e=>!p.some((t=>"typeface"===a?t.tag===e&&1===t.level:t.tag===e)))))return!0;if(s){const t=p.find((t=>e.includes(t.tag)));return y?!t.users.anonymousUser:!t.users.author||!t.users.anonymousUser}return!1}),[y,s,p,a]),P=(0,n.useCallback)((e=>{e.preventDefault();const t=h()(R);if(k.length>0){const e=t.typeahead("val").trim().split(",");e.length&&j(e)&&("typefacefont"===a?E(e,o):E(e)),x(""),t.typeahead("val","")}}),[R,k.length,j,x,a,E,o]),N=(0,n.useCallback)((e=>{x(e.target.value)}),[x]);return n.createElement("li",{className:"d-flex justify-content-start editable mb-2 flex-column"},n.createElement("div",{className:"add-tag-form-container"},n.createElement(i.c,{onSubmit:P,onKeyDown:I,className:"add-tag-form"},n.createElement(i.c.Label,{htmlFor:"add-tag-".concat(a,"-").concat(t),className:"sr-only"},c.O.trans("font-details.tags.placeholder")),n.createElement(i.c.Control,{id:"add-tag-".concat(a,"-").concat(t),type:"text",name:"tags",className:"form-control form-control-sm add-tag mb-1",placeholder:c.O.trans("font-details.tags.placeholder"),title:c.O.trans("font-details.tags.tooltip"),"data-toggle":"tooltip",autoComplete:"off","data-placement":"bottom",value:k,onChange:N,tabIndex:u}),n.createElement("button",{type:"submit",value:c.O.trans("font-details.tags.placeholder")})),r&&s&&n.createElement(i.c.Check,{id:"tag-admin-mode",onChange:e=>f(e.target.checked),label:c.O.trans("font-details.tags.anti-spam-mode")}),y&&n.createElement("button",{className:"btn btn-sm btn-danger",id:"btn-delete-all-tags",onClick:b},n.createElement("i",{className:"fas fa-bomb"}),c.O.trans("font-details.tags.delete-all-tags"))))};f.propTypes={tagsType:s().string.isRequired,tags:s().array.isRequired,fontUserTagSlug:s().string.isRequired,renderAntiSpam:s().bool.isRequired,hasSiteAdminPrivileges:s().bool.isRequired,createUri:s().string,tabIndex:s().number.isRequired}},34992:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TagList:()=>m});var n=a(11504),r=a(3268),s=a.n(r),i=a(68188),c=a.n(i),l=a(67944),o=a(6464),d=a(35664),u=a(69932);const m=e=>{let{tags:t,canEdit:a,deleteUri:r,hasTagAdminPrivileges:s}=e;const{handleDeleteTags:i,adminMode:m}=(0,l.useTags)(),{query:p}=(0,u.useTagForm)(),{editMode:h}=(0,d.useEditMode)(),v=(0,n.useCallback)((e=>!(h&&e.users&&!e.users.anonymousUser)),[h]),g=(0,n.useCallback)((e=>!!a&&!(h||m&&e.users&&!e.users.anonymousUser)),[m,a,h]),f=(0,n.useCallback)((e=>{const t=p.trim().toLowerCase();return!h&&s&&t.length>=2&&e.tag.startsWith(t)}),[h,s,p]);return t.filter((e=>null!==e)).map(((e,t)=>{if(v(e))return n.createElement("li",{key:t,className:"tags__list-item me-2 mb-2"},n.createElement("a",{href:c().generate("index-tagged",{tags:e.slug})},n.createElement("span",{className:"badge rounded-pill tags__tag text-black l".concat(e.level," ").concat(f(e)&&"highlighted"," ").concat(s&&"t".concat(e.type))},e.users&&!h&&n.createElement("div",{className:"tags__avatar-container"},e.users.anonymousUser&&n.createElement(o.Avatar,{size:"16",slug:e.users.anonymousUser,alt:"Anonymous User"}),e.users.author&&n.createElement(o.Avatar,{size:"16",slug:e.users.author,alt:"Author"})),e.tag,n.createElement("span",{className:"tags__tag--separator"},","))),g(e)&&n.createElement("button",{type:"button","data-tag":e.slug,"data-testid":"delete-tag-button",onClick:()=>{i([e.slug],r)},className:"btn btn-sm btn-danger delete-tag-btn"},n.createElement("i",{className:"fas fa-times","data-testid":"delete-tag-button-icon"})))}))};m.propTypes={tags:s().array.isRequired,canEdit:s().bool.isRequired,hasTagAdminPrivileges:s().bool.isRequired,deleteUri:s().string}},67944:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TagsProvider:()=>f,useTags:()=>y});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(20304),c=a(76060),l=a(63672),o=a(95416),d=a(5472),u=a(53660),m=a(2704);const p=n.createContext(void 0),h=()=>{u.a.dispatchEvent(m._.UPDATE_WALKTHROUGH)},v=e=>{u.a.dispatchEvent(m._.UPDATE_ADDED_TAGS_COUNT,e)},g=e=>{u.a.dispatchEvent(m._.UPDATE_ADDED_FONT_TAGS_COUNT,e)},f=e=>{let{children:t,initData:a,createUri:r,deleteUri:s}=e;const[i,u]=(0,n.useState)(!0),[m,f]=(0,n.useState)(a.tags),[y,E]=(0,n.useState)(a.fonts),[b,A]=(0,n.useState)(!1),w=(0,l.useFlashMessageDispatch)(),C=(0,n.useCallback)((e=>{f(e.typeface.tags),E(e.typeface.fonts)}),[]),k=(0,n.useCallback)((e=>{w({message:e,type:"danger"})}),[w]),S=(0,n.useCallback)((e=>{A(e)}),[]),x=(0,n.useCallback)(((e,t)=>{c.mk.deleteTypefaceTag(t||s,e,b).then((a=>{C(a),void 0===t?v(-e.length):g(-e.length),h()})).catch((()=>{k(o.O.trans("font-details.tags.error.remove"))}))}),[b,s,k,C]),T=(0,n.useCallback)(((e,t)=>{c.mk.createTypefaceTag(t||r,e,b).then((a=>{C(a),void 0===t?v(e.length):g(e.length),h()})).catch((()=>{k(o.O.trans("font-details.tags.error.add"))}))}),[b,r,k,C]),_=(0,n.useCallback)((()=>{(0,d.WC)(o.O.trans("font-details.tags.confirm.delete-all-tags"),(async()=>{(0,d.Yp)();const e=m.map((e=>e.slug));x(e)}))}),[x,m]);return(0,n.useEffect)((()=>{i&&u(!1)}),[i]),n.createElement(p.Provider,{value:{tags:m,fonts:y,handleDeleteTags:x,adminMode:b,toggleAdminMode:S,handleCreateTag:T,handleDeleteAllTags:_}},t)};f.propTypes={children:s().node.isRequired,initData:s().shape({fonts:s().arrayOf(s().any),slug:s().string.isRequired,tags:s().arrayOf(s().any)}).isRequired,createUri:s().string.isRequired,deleteUri:s().string.isRequired};const y=()=>(0,i.useValidContext)(p,"TagsContext")},12640:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Tags:()=>h,init:()=>v});a(54004);var n=a(11504),r=a(97104),s=a(28352),i=a(3268),c=a.n(i),l=a(67944),o=a(34992),d=a(19864),u=a(63672),m=a(35664),p=a(69932);const h=e=>{let{fontUserTagSlug:t,tagsType:a,renderAntiSpam:s,canEdit:i,hasSiteAdminPrivileges:c,hasTagAdminPrivileges:u}=e;const{tags:m,fonts:p}=(0,l.useTags)(),h=(0,n.useCallback)(((e,a)=>{const s=e.slug.replace("".concat(t,"."),"").replace(".","-"),l=document.querySelector('div[data-font-user-tag-slug="'.concat(s,'"]'));return(0,r.createPortal)(n.createElement("ul",{className:"list-unstyled tags m-0"},n.createElement(o.TagList,{canEdit:i,tags:e.tags,deleteUri:l.dataset.deleteUri,hasTagAdminPrivileges:u}),n.createElement(d.TagForm,{tagsType:"typefacefont",tags:e.tags,fontUserTagSlug:s,createUri:l.dataset.createUri,hasSiteAdminPrivileges:c,renderAntiSpam:!1,tabIndex:100+a})),l)}),[i,t,c,u]),v=(0,n.useCallback)((e=>e.map(((e,t)=>h(e,t+1)))),[h]);return n.createElement("ul",{className:"list-unstyled tags m-0"},m&&n.createElement(o.TagList,{canEdit:i,tags:m,hasTagAdminPrivileges:u}),p&&v(p),n.createElement(d.TagForm,{tagsType:a,fontUserTagSlug:t,hasSiteAdminPrivileges:c,renderAntiSpam:s,tabIndex:100,tags:m}))};h.propTypes={fontUserTagSlug:c().string.isRequired,tagsType:c().string.isRequired,renderAntiSpam:c().bool.isRequired,canEdit:c().bool.isRequired,hasSiteAdminPrivileges:c().bool.isRequired,hasTagAdminPrivileges:c().bool.isRequired};let v=()=>{const e=document.querySelector('.react-tag-root[data-type="typeface"]');if(e){const t=window.taggedTypeface?JSON.parse(window.taggedTypeface):[],a=e.dataset.fontUserTagSlug,r=e.dataset.createUri,i=e.dataset.deleteUri,c=e.dataset.type,o=e.dataset.renderAntiSpam,d=e.dataset.canEdit,v=e.dataset.hasSiteAdminPrivileges,g=e.dataset.hasTagAdminPrivileges;s.createRoot(e).render(n.createElement(m.EditModeProvider,null,n.createElement(u.FlashMessageProvider,null,n.createElement(u.FlashMessage,null),n.createElement(l.TagsProvider,{initData:t,createUri:r,deleteUri:i},n.createElement(p.TagFormProvider,null,n.createElement(h,{fontUserTagSlug:a,tagsType:c,renderAntiSpam:!!o,canEdit:!!d,hasSiteAdminPrivileges:!!v,hasTagAdminPrivileges:!!g}))))))}}},37628:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceCommentForm:()=>f});var n=a(11504),r=a(76060),s=a(95416),i=a(68188),c=a.n(i),l=a(76340),o=a(3268),d=a.n(o),u=a(13392),m=a(53660),p=a(2704),h=a(6464);function v(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g="new-typeface-comment";class f extends n.Component{constructor(e){super(e),v(this,"onSubmitComment",(e=>{const t=e.getData();t.length&&r.mk.addComment(this.state.typeface,t,(t=>{this.hideHiddenElements(),this.props.on_submit(t),this.clearEditor(e),m.a.dispatchEvent(p._.COMMENT_CREATED,t)}))})),v(this,"clearEditor",(e=>{this.setState({comment:""}),e.setData("")})),v(this,"showHiddenElements",(()=>{this.avatar.classList.contains("d-none")&&(this.avatar.classList.remove("d-none"),this.setState({btnClass:u.defaultBtnContainerClass}))})),v(this,"hideHiddenElements",(()=>{this.state.comment.length||(this.avatar.classList.add("d-none"),this.setState({btnClass:"d-none"}))})),this.state={user_slug:e.user_slug,comment:"",typeface:e.typeface,btnClass:"d-none"},this.editor=n.createRef()}focus(){this.isAuthenticated()&&(this.editor.current.focus(),this.showHiddenElements(),document.getElementById(g).scrollIntoView({block:"end"}))}render(){return this.isAuthenticated()?n.createElement("li",{className:"mb-3",id:g},n.createElement("div",{className:"d-flex"},n.createElement("div",{className:"flex-shrink-0"},n.createElement(h.Avatar,{size:"64",alt:"Your avatar",slug:this.state.user_slug,extraClasses:"mr-3 d-none",ref:e=>{this.avatar=e}})),n.createElement("div",{className:"flex-grow-1 ms-3"},n.createElement(u.MaxfontsEditor,{ref:this.editor,data:"",toolsType:"comment",onSubmit:this.onSubmitComment,onFocus:this.showHiddenElements,onCancel:this.hideHiddenElements,btnContainerClass:this.state.btnClass,placeholder:s.O.trans("font-details.comments.new.placeholder")})))):n.createElement("li",{className:"mb-3"},n.createElement(l.LoginButton,{text:s.O.trans("font-details.comments.new.new"),target:c().generate("typeface_details",{slug:this.state.typeface})+"#comment"}))}isAuthenticated(){return!!this.state.user_slug}}f.propTypes={user_slug:d().string,on_submit:d().func.isRequired,typeface:d().string.isRequired,comment_mode:d().bool.isRequired}},5980:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceComments:()=>y,init:()=>E});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(68188),c=a.n(i),l=a(76060),o=a(22104),d=a(37628),u=a(43565),m=a(37588),p=a.n(m),h=a(50904),v=a(28352),g=a(56280),f=a(348);const y=e=>{let{typeface:t,userSlug:a,allowDelete:r,commentMode:s,counter:i}=e;const[u,m]=(0,n.useState)([]),[p,h]=(0,n.useState)(!1),v=(0,n.useRef)(),g=(0,n.useCallback)((()=>{!0===s&&v.current.focus()}),[s]),y=(0,n.useCallback)((e=>{const t=e.comments;t.forEach((e=>e.profileUrl=c().generate("user_profile",{slug:e.username}))),m(t),i.count=t.length}),[i]),E=(0,n.useCallback)((e=>y(e)),[y]),b=e=>"comment-".concat(e.id);return(0,n.useEffect)((()=>{l.mk.getComments(t).then((e=>{y(e),h(!0),g()}))}),[g,t,y]),p?n.createElement("ul",{className:"list-unstyled"},u.map((e=>n.createElement(o.Comment,{comment:e,on_delete:E,allow_delete:r,typeface:t,key:b(e)}))),n.createElement(d.TypefaceCommentForm,{ref:v,typeface:t,user_slug:a,on_submit:E,comment_mode:s})):n.createElement(f.Spinner,null)};y.propTypes={userSlug:s().string,allowDelete:s().bool.isRequired,typeface:s().string.isRequired,commentMode:s().bool.isRequired,counter:s().instanceOf(u.C).isRequired};const E=()=>{const e=p()("#typeface-comments");if(e.length){const t=new u.C,a=p()("#typeface-comment-count"),r=e.data("typeface"),s=e.data("allow-delete")||!1,i=e.data("user-slug")||null,c=(0,h.a)("comment"),l=a.data("count");v.createRoot(e[0]).render(n.createElement(y,{typeface:r,allowDelete:s,userSlug:i,commentMode:c,counter:t})),v.createRoot(a[0]).render(n.createElement(g.Counter,{count:l,counter:t}))}}},32931:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceDescription:()=>h,init:()=>v});a(29708);var n=a(11504),r=a(28352),s=a(3268),i=a.n(s),c=a(76060),l=a(13392),o=a(95360),d=a(51126),u=a(53660),m=a(2704);let p=!1;const h=e=>{let{typeface:t,editable:a,html:r,markdown:s=null}=e;const[i,o]=(0,n.useState)(!1),[h,v]=(0,n.useState)(r),[g,f]=(0,n.useState)(s),y=(0,n.useRef)(null);(0,n.useEffect)((()=>{!0===i&&y.current.focus()}),[i]);const E=()=>{o(!1),d.y.current&&p&&(d.y.current.setStep({index:++d.y.current.step.index,isRunning:!0}),p=!1)},b=e=>{var a;c.mk.updateTypefaceDescription(t,{description:e.getData()}).then((e=>A(e))),a=e.getData(),u.a.dispatchEvent(m._.UPDATE_WALKTHROUGH_DESCRIPTION_STEP,a)},A=e=>{v(e.description),f(e.markdown),E()};let w=n.createElement("p",{dangerouslySetInnerHTML:{__html:h}}),C=n.createElement("button",{type:"button",className:"editable-btn btn btn-primary",onClick:e=>{e.preventDefault(),d.y.current&&d.y.current.step.isRunning&&(d.y.current.setStep({isRunning:!1}),p=!0),o(!0)}},n.createElement("i",{className:"fas fa-pencil-alt"})," Edit the description");return!0===i&&(w=n.createElement(l.MaxfontsEditor,{ref:y,data:g||h,onSubmit:b,onCancel:E,toolsType:"description"}),C=null),n.createElement(n.Fragment,null,w,a&&C)};function v(){const e=document.getElementById("typeface-description");if(e){const t={slug:e.dataset.typeface,description:(0,o._A)(e.dataset.d),markdown:(0,o._A)(e.dataset.m),editable:!!e.dataset.editable,isMarkdown:(0,o.sf)(e.dataset.isM)};r.createRoot(e).render(n.createElement(h,{typeface:t.slug,editable:t.editable,html:t.description,markdown:t.isMarkdown?t.markdown:null}))}}h.propTypes={editable:i().bool.isRequired,typeface:i().string.isRequired,html:i().string.isRequired,markdown:i().string}},99356:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceStatistics:()=>g,init:()=>f});var n=a(11504),r=a(28352),s=a(3268),i=a.n(s),c=a(42760),l=a(59324),o=a(71272),d=a(70784),u=a(18248),m=a(76500),p=a(71893),h=a(4880),v=a(95416);const g=e=>{let{typeface:t}=e;return n.createElement(c.c,{className:"px-0",fluid:!0},n.createElement(d.c,{className:"mb-3"},n.createElement(u.c,null,n.createElement(l.c,{horizontal:"sm"},n.createElement(l.c.Item,{className:"d-flex align-items-center w-100 w-sm-50"},n.createElement(h.FontawesomeIcon,{extraClass:"mr-1",faIcon:"fa-download"}),n.createElement("span",{className:"mx-1"},v.O.trans("font-details.statistics.counts.downloads")),n.createElement(o.c,{bg:"danger",className:"ms-auto"},n.createElement(m.TypefaceDownloadCount,{typeface:t}))),n.createElement(l.c.Item,{className:"d-flex align-items-center w-100 w-sm-50"},n.createElement(h.FontawesomeIcon,{extraClass:"mr-1",faIcon:"fa-heart"}),n.createElement("span",{className:"mx-1"},v.O.trans("font-details.statistics.counts.favorites")),n.createElement(o.c,{bg:"danger",className:"ms-auto"},n.createElement(p.TypefaceFavoritedByCount,{typeface:t})))))))};g.propTypes={typeface:i().string.isRequired};let f=()=>{const e=document.querySelector("#typeface-statistics");if(e){const t=e.dataset.typeface;r.createRoot(e).render(n.createElement(g,{typeface:t}))}}},76012:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LastActivityOverview:()=>u});var n,r,s,i,c=a(17412),l=a.n(c),o=a(95416),d=a(95360);class u{}n=u,s=e=>{const t=[];let a=null,n=null;return e.sort(((e,t)=>l()(e).diff(l()(t)))),e.forEach((e=>{e.username!==a&&(n={username:e.username,latestLogDate:l()(e.logged_at),actions:[]},a=e.username,t.push(n));const r=e.action,s=o.O.trans("activity.action.".concat(r,".icon"));if(n){const e=n.actions.findIndex((e=>e.icon===s));if(-1===e)n.actions.push({icon:s,title:o.O.trans("activity.action.".concat(r,".title"))});else{const t=o.O.trans("activity.action.".concat(r,".title"));!1===(0,d.ec)(t,n.actions[e].title)&&(n.actions[e].title=(0,d.uC)(n.actions[e].title+", "+t,","))}}})),t},(r="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r="getOverview","string"))?i:String(i))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s},83884:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceActivityInfo:()=>g});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(33964),c=a(76012),l=a(62452),o=a(73568),d=a(6464),u=a(71336),m=a(4880),p=a(348),h=a(14028);const v=e=>e,g=e=>{let{filter:t=v}=e;const{typeface:a,activities:r,loaded:s,error:o}=(0,i.useTypefaceActivities)(),[d,m]=(0,n.useState)([]),[h,g]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(s&&!o){const e=c.LastActivityOverview.getOverview(r),n=e.map((e=>a.author_name===e.username?Promise.resolve(!0):l.S.findForActivity(e.username).then((e=>e.is_admin))));Promise.all(n).then((a=>{m(t(e.filter(((e,t)=>a[t])))),g(!0)}))}o&&g(!0)}),[a,r,s,t,o]),!1===h?n.createElement(p.SmallSpinner,null):o?n.createElement(y,{error:o}):d.length?n.createElement("ol",{reversed:!0},d.map(((e,t)=>n.createElement(f,{key:t,item:e})))):n.createElement(u.NoActivitiesFound,null)};g.propTypes={filter:s().func};const f=e=>{let{item:t}=e;const[a,r]=(0,n.useState)(null);(0,n.useEffect)((()=>{l.S.findForActivity(t.username).then(r).catch((e=>r(new l.M(e))))}),[t.username]);let s;return s=a?n.createElement("div",{className:"info-item"},n.createElement(h.ActivityErrorBoundary,null,n.createElement(n.Suspense,{fallback:n.createElement(u.Loading,null)},n.createElement(d.Avatar,{size:"16",slug:a.slug,alt:a.name}),n.createElement("a",{href:(0,o._G)(a.slug)},a.name),n.createElement("ul",null,t.actions.map(((e,t)=>{const[a,r]=(e=>e.icon.split(" "))(e);return n.createElement("li",{key:t,className:"mx-1"},n.createElement(m.FontawesomeIcon,{faIcon:r,faNamespace:a,title:e.title}))}))),n.createElement(u.ActivityDate,{date:t.latestLogDate})))):n.createElement(p.SmallSpinner,null),n.createElement("li",null,s)};f.propTypes={item:s().object.isRequired};const y=e=>{let{error:t}=e;return n.createElement("p",{className:"text-danger"},n.createElement("strong",null,"Error:")," ",t.message)};y.propTypes={error:s().object.isRequired}},76704:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CharBoxEditor:()=>o});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(90248),c=a(2832),l=a(89324);const o=e=>{let{char:t,fontFamily:a,fontData:r,fontSize:s=l.defaultFontSize}=e;const{selected:o,removeSelection:d,addSelection:u}=(0,c.useCharmapAdmin)(),[m,p]=(0,n.useState)(!1);(0,n.useEffect)((()=>{p(o.includes(t))}),[t,o,o.length]);const h=(0,n.useCallback)((e=>{if(e.shiftKey){const e=[...r.chars];u(e.slice(e.indexOf(o[o.length-1]),e.indexOf(t)+1))}else m?d(t):u(t),p((e=>!e))}),[u,t,r.chars,m,d,o]);let v="editor";return r.validChars.includes(t)&&(v+=" valid"),r.bogusChars.includes(t)&&(v+=" bogus"),r.potentiallyBogusChars.includes(t)&&(v+=" potentially-bogus"),m&&(v+=" selected"),n.createElement(i.CharBox,{char:t,fontFamily:a,className:v,onClick:h,fontSize:s})};o.propTypes={char:s().string.isRequired,fontFamily:s().string.isRequired,fontData:s().object.isRequired,fontSize:s().number}},75656:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceIllustrationInvalidTypeException:()=>n});class n extends Error{constructor(e,t){super("The file ".concat(e," with type ").concat(t," is not allowed."))}}},21992:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceLinkForm:()=>v});a(29708),a(544),a(34088);var n=a(11504),r=a(3268),s=a.n(r),i=a(97540),c=a(21940),l=a(26460),o=a(4880),d=a(95416),u=a(6424),m=a(40996);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p.apply(this,arguments)}const h={form:!1,url:!1},v=e=>{let{onCreate:t,typeface:a}=e;const[r,s]=(0,n.useState)(""),[v,g]=(0,n.useState)(h),[f,y]=(0,n.useState)(!1),E=(0,n.useRef)(null),b=(0,n.useCallback)((e=>{s(e.target.value.trim()),g({form:!1,url:!1})}),[]),A=(0,n.useCallback)((()=>{s(""),g({form:!1,url:!1}),y(!1)}),[]),w=(0,n.useCallback)((async e=>{e.preventDefault();let a,n=r;r.length&&!r.match(/^https?:\/\//)&&(n="https://"+n);try{new URL(n),a=n.match(/((https?:\/\/)|(www\.)|())[^.]+\..{2,}/)&&!!n.length}catch(e){a=!1}E.current.setCustomValidity(a?"":d.O.trans("font-details.links.form.errors.url"));const s={form:!!n.length,url:a};a&&(y(!0),t({url:n}).then(A)),g(s)}),[t,A,r]),C=(0,n.useCallback)((e=>n.createElement(u.c,p({id:"add-typeface-link-tooltip"},e),d.O.trans("font-details.links.form.help-text",{typeface:a}))),[a]);return n.createElement(i.c,{noValidate:!0,validated:v.form,onSubmit:w},n.createElement(c.c,{className:"editable",size:"lg"},n.createElement(m.c,{overlay:C,placement:"top"},n.createElement(i.c.Control,{ref:E,type:"text",value:r,placeholder:d.O.trans("font-details.links.form.placeholder"),onChange:b,isValid:v.form&&v.url,isInvalid:v.form&&!v.url,disabled:f})),n.createElement(i.c.Control.Feedback,{type:"invalid",className:"invalid-tooltip"},d.O.trans("font-details.links.form.errors.url")),n.createElement(l.c,{variant:"primary",type:"submit",className:"btn-showcase",size:"lg",disabled:f},n.createElement(o.FontawesomeIcon,{faIcon:"fa-plus"}))))};v.propTypes={onCreate:s().func.isRequired,typeface:s().string.isRequired}},57112:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceLink:()=>m});a(29708),a(544),a(34088);var n=a(11504),r=a(3268),s=a.n(r),i=a(95416),c=a(26460),l=a(4880),o=a(6424),d=a(40996);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}const m=e=>{const t=e.typefaceLink,a=e=>"".concat(e.typeface," @ ").concat(r(e)),r=e=>"custom"===e.type?new URL(e.url).hostname:i.O.trans("links.type.".concat(e.type));return n.createElement(d.c,{overlay:e=>n.createElement(o.c,u({id:"add-typeface-link-tooltip"},e),a(t)),placement:"top"},n.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer nofollow",className:"btn btn-lg btn-showcase btn-outline-dark","aria-label":a(t)},n.createElement(l.FontawesomeIcon,{customClass:i.O.trans("links.class.".concat(t.type))}),t.editable&&n.createElement(c.c,{variant:"danger",size:"sm-alt",className:"editable-btn",onClick:a=>{a.preventDefault(),e.onDelete(t)}},n.createElement(l.FontawesomeIcon,{faIcon:"fa-times"}))))};m.propTypes={typefaceLink:s().object.isRequired,onDelete:s().func}},51044:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceLinks:()=>g,init:()=>f});a(29708);var n=a(11504),r=a(28352),s=a(3268),i=a.n(s),c=a(57112),l=a(73568),o=a(5472),d=a(95416),u=a(21992),m=a(63672),p=a(53660),h=a(2704);const v=e=>{p.a.dispatchEvent(h._.UPDATE_ADDED_LINKS_COUNT,e)},g=e=>{const t=!!e.token,[a,r]=(0,n.useState)(e.links),s=(0,m.useFlashMessageDispatch)();(0,n.useEffect)((()=>{const e=a.some((e=>!0===e.scraper));document.querySelectorAll(".scrape-marketplaces-form").forEach((t=>{t.style.display=e?"block":"none"}))}),[a]);const i=t=>{(0,o.WC)(d.O.trans("font-details.links.delete-confirm"),(async()=>{(0,o.Yp)(),(async t=>fetch((0,l.q8)(e.slug,t.id),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e.token})}))(t).then((e=>((e,t)=>{if(204!==e.status)throw new Error(d.O.trans("font-details.links.form.errors.delete"));v(-1),r(a.filter((e=>e.id!==t.id)))})(e,t))).catch((e=>g(e)))}))},p=(e,t)=>e.id===t.id||"custom"!==t.type&&t.type===e.type,h=e=>(!a.filter((t=>p(t,e))).length?(r((t=>[...t,e])),(0,m.showFlashMessage)(s,d.O.trans("font-details.links.form.messages.added"),"success")):((e=>{const t=a.map((t=>p(t,e)?e:t));r(t)})(e),(0,m.showFlashMessage)(s,d.O.trans("font-details.links.form.messages.updated",{type:"custom"===e.type?"":d.O.trans("links.type.".concat(e.type))+" "}),"warning")),e),g=e=>(0,m.showFlashMessage)(s,e,"danger");return n.createElement(n.Fragment,null,n.createElement("div",{className:"typeface__linklist typeface__linklist--author-shops"},a.map((e=>{return n.createElement(c.TypefaceLink,{key:e.id,typefaceLink:(a=e,a.editable=t,a),onDelete:i});var a}))),t&&n.createElement(u.TypefaceLinkForm,{onCreate:async t=>fetch((0,l.uw)(e.slug),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({typeface_link:{url:t.url,_token:e.createToken}})}).then((e=>(e=>{if([200,201].includes(e.status))return v(1),e.json();throw new Error(d.O.trans("font-details.links.form.errors.add"))})(e))).then((e=>h(e))).catch((e=>g(e))),typeface:e.typeface}),n.createElement(m.FlashMessage,null))};function f(){const e=document.getElementById("typeface-links");if(e){const t={slug:e.dataset.slug,typeface:e.dataset.typeface,links:JSON.parse(atob(e.dataset.links)),token:e.dataset.token,createToken:e.dataset.ctoken};r.createRoot(e).render(n.createElement(m.FlashMessageProvider,null,n.createElement(g,{slug:t.slug,typeface:t.typeface,links:t.links,token:t.token,createToken:t.createToken})))}}g.propTypes={links:i().array.isRequired,slug:i().string.isRequired,typeface:i().string.isRequired,token:i().string,createToken:i().string}},37916:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LastTypefaceActivity:()=>p,init:()=>u});a(29708);var n=a(11504),r=a(97104),s=a(28352),i=a(33964),c=a(83884),l=a(3268),o=a.n(l),d=a(85075);const u=()=>{const e=document.getElementById("typeface-browsing-list");if(e){const t=e.querySelectorAll("li.font-preview .activity-info");t.length&&(0,s.createRoot)(document.getElementById("react-list-root")).render(n.createElement(h,{elements:t}))}},m=e=>e.length?[e[0]]:[],p=()=>n.createElement(n.Fragment,null,n.createElement("p",null,"Last activity:"),n.createElement(c.TypefaceActivityInfo,{filter:m})),h=e=>{let{elements:t}=e;const a=(0,n.useCallback)((e=>{const t=(0,d.getTypefaceFromDataset)(e);return(0,r.createPortal)(n.createElement(i.TypefaceActivitiesProvider,{typeface:t},n.createElement(p,null)),e)}),[]),s=[...t];return n.createElement(n.Fragment,null,s.map((e=>a(e))))};h.propTypes={elements:o().objectOf(o().instanceOf(Element)).isRequired}},88832:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PublishingHistoryLegacyFallback:()=>d});a(29708);var n=a(65536),r=a(17412),s=a.n(r);function i(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var o=new WeakSet;class d{constructor(e){i(this,o),c(this,"decorate",(e=>{if(0===e.length)return l(this,o,u).call(this,e),e;return(e=e.sort(((e,t)=>e.date.valueOf()<t.date.valueOf())))[e.length-1].action===n.actions.TYPEFACE_UNPUBLISHED.name&&l(this,o,u).call(this,e),e})),this.typeface=e}}function u(e){this.typeface.published_at&&e.push({action:n.actions.TYPEFACE_UPDATE_PUBLISHER.name,date:s()(this.typeface.published_at),user:{slug:this.typeface.publisher_slug,name:this.typeface.publisher_name}})}},14788:(e,t,a)=>{"use strict";a.r(t),a.d(t,{isFullyToSemiChange:()=>s,isLegacyPosterUpdateItem:()=>c,isPublishedItem:()=>i});var n=a(65536),r=a(64499);const s=e=>{var t,a;return e.action===n.actions.TYPEFACE_LEVEL_CHANGED.name&&2===r.C.getIdByLabel(null===(t=e.data)||void 0===t||null===(t=t.level)||void 0===t?void 0:t.to)&&1===r.C.getIdByLabel(null===(a=e.data)||void 0===a||null===(a=a.level)||void 0===a?void 0:a.from)},i=(e,t)=>{var a;return"published"===e&&!!(null!==(a=t.data)&&void 0!==a&&null!==(a=a.level)&&void 0!==a&&a.to&&r.C.getIdByLabel(t.data.level.to)>0)},c=e=>{var t;return!!(null!==(t=e.data)&&void 0!==t&&null!==(t=t.level)&&void 0!==t&&t.to&&r.C.getIdByLabel(e.data.level.to)<=0)}},98096:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PublishingHistory:()=>m});a(29708);var n,r=a(65536),s=a(17412),i=a.n(s),c=a(62452),l=a(14788);const o=[r.actions.TYPEFACE_UPDATE_PUBLISHER.name,r.actions.TYPEFACE_UPDATE_POSTER.name,r.actions.TYPEFACE_UNPUBLISHED.name];class d{constructor(e,t){this.action=e.action,this.user=t,this.date=i()(e.logged_at),this.data=e.data}}const u=e=>o.includes(e.action)||(0,l.isFullyToSemiChange)(e);class m{static async getUser(e){try{return await c.S.findForActivity(e.username)}catch(e){return new c.M(e)}}}var p,h,v,g;n=m,p=m,v=async e=>{e=e.filter(u);const t=[];for(const a of e){const e=await n.getUser(a);t.push(new d(a,e))}return t},(h="symbol"==typeof(g=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(h="getHistory","string"))?g:String(g))in p?Object.defineProperty(p,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):p[h]=v},98584:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PublishHistoryItem:()=>y,TypefacePublishingHistory:()=>E});a(29708);var n=a(11504),r=a(3268),s=a.n(r),i=a(33964),c=a(348),l=a(98096),o=a(73568),d=a(6464),u=a(95416),m=a(4880),p=a(71336),h=a(64499),v=a(88832),g=a(14028),f=a(14788);const y=e=>{let{historyItem:t}=e;(0,f.isLegacyPosterUpdateItem)(t)&&(t.action="typeface.unpublish");const a=t.user,r=u.O.trans("activity.action.".concat(t.action,".action")),s=(e=>"published"===e?"text-success":"text-danger")(r),i=((e,t)=>{let a;return a=(0,f.isPublishedItem)(e,t)||(0,f.isFullyToSemiChange)(t)?u.O.trans("font.level.icon.".concat(h.C.getIdByLabel(t.data.level.to))):u.O.trans("activity.action.".concat(t.action,".icon")),a.split(" ")})(r,t),c=(e=>e.data&&Object.keys(e.data).length?n.createElement("small",null,(e=>{let t=[];return e.level&&e.level.from!==e.level.to&&void 0!==e.level.from&&t.push("level: ".concat(e.level.from," => ").concat(e.level.to)),e.privacy&&e.privacy.from!==e.privacy.to&&void 0!==e.privacy.from&&t.push("privacy: ".concat(e.privacy.from," => ").concat(e.privacy.to)),t.join(", ")})(e.data)):null)(t),l=((e,t)=>(0,f.isPublishedItem)(e,t)||(0,f.isFullyToSemiChange)(t)?"".concat(t.data.level.to.split(" ")[0].toLowerCase()," ").concat(e):e)(r,t);return n.createElement("li",{className:"info-item"},n.createElement(g.ActivityErrorBoundary,null,n.createElement(n.Suspense,{fallback:n.createElement(p.Loading,null)},n.createElement(m.FontawesomeIcon,{faIcon:i[1],faNamespace:i[0],title:u.O.trans("activity.action.".concat(t.action,".title")),extraClass:s}),n.createElement("span",null," ",l," by "),n.createElement(d.Avatar,{size:"16",slug:a.slug,alt:a.name}),n.createElement("a",{href:(0,o._G)(a.slug)},a.name),n.createElement(p.ActivityDate,{date:t.date}),c)))};y.propTypes={historyItem:s().object.isRequired};const E=()=>{const{activities:e,loaded:t,typeface:a}=(0,i.useTypefaceActivities)(),[r,s]=(0,n.useState)([]),[o,d]=(0,n.useState)(!t),u=(0,n.useCallback)((e=>new v.PublishingHistoryLegacyFallback(a).decorate(e)),[a]);return(0,n.useEffect)((()=>{(async()=>{if(t){let t=await l.PublishingHistory.getHistory(e);t=u(t),s(t),d(!1)}})()}),[e,u,t,a]),!0===o?n.createElement(c.SmallSpinner,null):0===r.length?n.createElement(p.NoPublishingActivityFallback,{typeface:a}):n.createElement("ol",{reversed:!0},r.map(((e,t)=>n.createElement(y,{key:t,historyItem:e}))))}},85075:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceActivities:()=>p,getTypefaceFromDataset:()=>h});a(29708);var n=a(11504),r=a(348),s=a(72632),i=a(26460),c=a(4880),l=a(33964),o=a(71336),d=a(78288),u=a(2696),m=a(86888);const p=()=>{const{activities:e,loaded:t,typeface:a}=(0,l.useTypefaceActivities)(),[p,h]=(0,n.useState)(!1),v=(0,n.useCallback)((()=>{h(!0)}),[]);if((0,n.useEffect)((()=>{const e=document.querySelector("[data-toggle=typeface-activities]");e&&e.addEventListener("click",v)}),[v]),!1===p)return n.createElement(i.c,{variant:"primary",onClick:v},n.createElement(c.FontawesomeIcon,{faIcon:"fa-sync"})," Show Activities");if(!1===t)return n.createElement(r.Spinner,{className:"ml-1"});if(!e.length)return n.createElement(o.NoActivitiesFound,null);const g={...d.emptyActivitiesFilterSkeleton,typefaces:[a.slug]};return n.createElement(d.ActivitiesFilterProvider,{whoami:(0,m.I)(),initialFilter:g},n.createElement(u.ActivitiesProvider,{initialActivitites:e},n.createElement(s.ActivityList,{activities:e})))},h=e=>JSON.parse(atob(e.dataset.typeface))},76500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceDownloadCount:()=>o});var n=a(11504),r=a(43565),s=a(56280),i=a(3268),c=a.n(i),l=a(208);const o=e=>{let{typeface:t}=e;const a=new r.C,i=(0,l.useCount)("typeface_total_downloads",t,a);return n.createElement(s.Counter,{id:"downloads_counter",count:i,with_brackets:!1,render_zero:!0,show_spinner:!0,counter:a})};o.propTypes={typeface:c().string.isRequired}},71893:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceFavoritedByCount:()=>o});var n=a(11504),r=a(43565),s=a(56280),i=a(3268),c=a.n(i),l=a(208);const o=e=>{let{typeface:t}=e;const a=new r.C,i=(0,l.useCount)("typeface_favorites_count",t,a,"favorited_by");return n.createElement(s.Counter,{id:"favorites_counter",count:i,with_brackets:!1,render_zero:!0,show_spinner:!0,counter:a})};o.propTypes={typeface:c().string.isRequired}},72904:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceIllustrationGalleryDropbox:()=>g,init:()=>f});var n=a(11504),r=a(28352),s=a(3268),i=a.n(s),c=a(53660),l=a(2704),o=a(76060),d=a(75656),u=a(63672),m=a(33568),p=a.n(m),h=a(95416),v=a(26224);const g=e=>{let{slug:t,avifSupport:a}=e;const r=(0,n.useRef)(null),s=(0,u.useFlashMessageDispatch)(),{handleInputChange:i,handleDrop:m,dragActive:g,handleDrag:f,inputRef:y,handleUploadButton:E}=(0,v.useDropbox)(),b=(0,n.useMemo)((()=>{const e=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];return a&&e.push("image/avif"),e}),[a]);(0,n.useEffect)((()=>{c.a.addEventListener(l._.ILLUSTRATION_UPLOAD,(e=>{let{data:a}=e;const n=new FormData;let r=a.img;const s=a.order;n.append("images[]",r),n.append("order[]",s),o.mk.uploadIllustrations(t,n).then((e=>{e.illustrations.forEach((e=>{c.a.dispatchEvent(l._.ILLUSTRATION_START_POLLING,{uuid:e,tempUuid:a.uniqueId})}))})).catch((()=>{c.a.dispatchEvent(l._.ILLUSTRATION_UPLOAD_ERROR,{error:h.O.trans("font-details.illustration.dropbox.server-error"),fileName:r.name,tempUuid:a.uniqueId})}))}))}),[t]);const A=(0,n.useCallback)((e=>{const t=e.type;if(!b.includes(t))throw new d.TypefaceIllustrationInvalidTypeException(e.name,t)}),[b]),w=(0,n.useCallback)((e=>{e.forEach((e=>{try{A(e);const a=p().uniqueId("illustration_");c.a.dispatchEvent(l._.ILLUSTRATION_ADDED_TEMP,{img:e,uniqueId:a,slug:t})}catch(e){e instanceof d.TypefaceIllustrationInvalidTypeException&&s({message:e.message,type:"danger"})}}))}),[s,t,A]);return n.createElement(n.Fragment,null,n.createElement("form",{ref:r,className:"dropbox-form",onDragEnter:f,method:"POST",action:"".concat(t,"/illustration/upload-files"),encType:"multipart/form-data"},n.createElement("input",{name:"images",ref:y,id:"dropbox-input",className:"dropbox-input",type:"file",accept:b.join(","),multiple:!0,onChange:e=>{w(i(e))}}),n.createElement("label",{className:"dropbox-label ".concat(g&&"dropbox-drag-active"),htmlFor:"dropbox-input"},n.createElement("div",null,n.createElement("p",null,h.O.trans("font-details.illustration.dropbox.drag-and-drop")),n.createElement("button",{className:"dropbox-upload-button",type:"button",onClick:E},h.O.trans("font-details.illustration.dropbox.upload-image")))),g&&n.createElement("div",{className:"dropbox-drag-file-element",onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:e=>{w(m(e))}})))};g.propTypes={slug:i().string.isRequired,avifSupport:i().bool.isRequired};const f=()=>{const e=document.querySelector("#gallery__dropbox");e&&r.createRoot(e).render(n.createElement(u.FlashMessageProvider,null,n.createElement(u.FlashMessage,null),n.createElement(g,{slug:e.dataset.slug,avifSupport:"true"===e.dataset.avifSupport})))}},6832:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});a(29708);var n=a(11504),r=a(96236),s=a(68964),i=a(3268),c=a.n(i);const l=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--zindex-tags-autocompete")),o=(0,n.forwardRef)(((e,t)=>{let{steps:a,restart:i}=e;const[c,o]=(0,n.useState)({index:0,isRunning:!0}),[d,u]=(0,n.useState)(0),[m,p]=(0,n.useState)(a),h=(0,n.useRef)(!1),v=document.querySelector(".dropbox-form"),g=()=>{o((e=>({...e,index:-1,isRunning:!1})))},f=()=>{o((e=>({...e,isRunning:!0})))},y=()=>{u((e=>e+1)),h.current=!0,window.dispatchEvent(new Event("scroll"))},E=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bottom";p((s=>s.map((s=>s.id===e?null!==a&&null!==n?{...s,content:t,title:a,target:n,placement:r}:null!==a?{...s,content:t,title:a}:null!==n?{...s,content:t,target:n}:{...s,content:t}:s))))};(0,n.useEffect)((()=>{void 0!==i&&o((e=>({...e,isRunning:i>0}))),h.current=!1}),[i]),(0,n.useImperativeHandle)(t,(()=>({setStep:o,step:c,stop:g,refresh:f,updateStep:E,reRender:y})));return n.createElement(r.cp,{key:d,callback:e=>{const{action:t,index:a,status:n,type:s}=e,i=document.querySelector(e.step.target),c=document.querySelector(".__floater");if(i&&c){const e=i.getBoundingClientRect(),t=c.getBoundingClientRect(),a=window.innerHeight;let n;n=e.top<window.pageYOffset?e.top-t.height-150:Math.max(0,e.top+t.height-a/2),h.current||window.scrollTo({top:window.pageYOffset+n,behavior:"smooth"})}if(i&&e.step.id&&"add-illustrations"===e.step.id?(e=>{e&&(e.style.zIndex=l.toString())})(v):""!==v.style.zIndex&&(e=>{e&&(e.style.zIndex="")})(v),[r.UH.TOUR_END].includes(s))o((e=>({...e,index:0,isRunning:!1})));else if([r.UH.STEP_AFTER,r.UH.TARGET_NOT_FOUND].includes(s)){const e=a+(t===r.uU.PREV?-1:1);o((t=>({...t,index:e})))}else([r.bL.FINISHED,r.bL.SKIPPED].includes(n)||[r.uU.CLOSE].includes(t))&&o((e=>({...e,index:0,isRunning:!1})))},steps:m,debug:s.i4.debug,run:c.isRunning,stepIndex:c.index,continuous:!0,showProgress:!0,scrollOffset:150,scrollDuration:150,disableScrolling:!1,styles:{options:{zIndex:l-1},buttonNext:{backgroundColor:"#c02631"},beacon:{color:"#c02631"},tooltipTitle:{fontWeight:"bold"}},locale:{back:"Back",close:"Close",last:"Done",next:"Next",skip:"Skip"}})}));o.propTypes={steps:c().array.isRequired,restart:c().number},o.displayName="Walkthrough";const d=o},65060:(e,t,a)=>{"use strict";var n=a(18504),r=a(712);(0,n.c)(a(96704));(0,r.z)(a(74276));var s=a(66704),i=a(27404),c=a(37588),l=a.n(c),o=a(29926);const d=l()("#font-categories"),u=l()("#nav-font-categories"),m=l()("#show-font-categories");let p;class h{static toggleFontCategories(e){e.preventDefault(),l()(e.target).blur(),p.toggle(),h.isVisible()&&h.scrollToCategories()}static isVisible(){return d.is(":visible")}static scrollToCategories(){l()("html, body").animate({scrollTop:0},200,"linear")}static showFontCategories(e){h.isVisible()?h.scrollToCategories():h.toggleFontCategories(e)}static init(){if(d.length){const e=d[0];p=o.aS.getOrCreateInstance(e,{toggle:!1}),e.addEventListener("show.bs.collapse",(()=>{u.addClass("aActive")})),e.addEventListener("hidden.bs.collapse",(()=>{u.removeClass("aActive")}))}[u,m].forEach((e=>{e.on("click",h.showFontCategories)}))}}var v=a(95360);var g=a(76104),f=a(99448),y=a.n(f),E=a(53660),b=a(2704),A=a(15192),w=a(55248);const C=e=>S(new(y())(e)),k=e=>{const t=l()(e),a=e=>{var a;a=e.data.delta,t.hasClass("is-sticky")&&window.scrollBy(0,-1*a)};return E.a.addEventListener(b._.MORE_TAGS_OPEN,a),E.a.addEventListener(b._.MORE_TAGS_CLOSE,a),S(new(y())(e,{scrollClass:{down:"headroom-scroll-down",up:"headroom-scroll-up",persist:!0}}))},S=e=>(e.on("sticky:on",(e=>E.a.dispatchEvent(b._.STICKY_ON,{target:e.target}))).on("sticky:off",(e=>E.a.dispatchEvent(b._.STICKY_OFF,{target:e.target}))),e),x=(e,t)=>{const a=("function"==typeof(n=e).width?n.width():n.width)<=576;var n;t.disable(a),l()(t.target).toggleClass("sticky sticky-headroom stickynav-offset",!a)};var T=a(95416),_=a(28768),O=a(96056),R=a(6468),I=a(76060),j=a(37588);const P="fas fa-heart",N="toggle-favorite",q=(e,t,a)=>{let n="far fa-heart",r="site.list.action.favorite.add";!0===a.is_favorite&&(r="site.list.action.favorite.remove",n=P),r=T.O.trans(r),e.attr("class",n),(0,_.A)(t,r),(0,i.G4)(t,r),E.a.dispatchEvent(N,{is_favorite:a.is_favorite})},D=e=>{e.preventDefault();const t=j(e.currentTarget),a=t.prop("href"),n=t.find("i");a&&(n.data("favorite",(e=>e.hasClass(P.split(" ")[0]))(n)),n.prop("class","fas fa-spinner fa-spin"),I.Sk.toggleFavorite(a,q.bind(null,n,t),(()=>{q(n,t,{is_favorite:n.data("favorite")}),(0,R.cz)()})))};var L=a(5472),F=a(46112),M=a(33568);class U{constructor(e,t,a){this.$control=e(t),this.$list=e(a),this.$lastTag=this.$list.find("li:last-child"),this.$window=e(window),this.isOpen=!1;const n={more:T.O.trans("toolbar.tags.toggle.more"),less:T.O.trans("toolbar.tags.toggle.less")};this.open=()=>{this.$control.html(n.less),this.isOpen=!0,E.a.dispatchEvent(b._.MORE_TAGS_OPEN,{delta:this.getDelta()})},this.close=()=>{this.$control.html(n.more),this.isOpen=!1,E.a.dispatchEvent(b._.MORE_TAGS_CLOSE,{delta:this.getDelta()})},this.toggle=()=>{this.setControlHeight(),this.$list.toggleClass("open"),this.isOpen?this.close():this.open()},this.showButton=()=>{this.$control.show(),this.$list.addClass("with-btn")},this.hideButton=()=>{this.$control.hide(),this.$list.removeClass("with-btn")},this.setControlHeight=()=>{this.controlHeight=this.$control.height()},this.getDelta=()=>this.$control.height()-this.controlHeight,this.refresh=this.refresh.bind(this),this.init=this.init.bind(this),this.setControlHeight()}refresh(){this.$lastTag.position().top>0?this.showButton():this.hideButton()}init(){this.$lastTag.length&&(this.$control.on("click",this.toggle),this.$window.on("resize",(0,M.debounce)((()=>{this.refresh()}),250)),this.refresh())}}s.g.initAlertFadeOut(),i.kT.init(),h.init(),(()=>{const e=document.querySelector("#searchForm");e&&e.addEventListener("invalid",v.Kw,!0)})(),g.aA.init(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".sticky";const t=document.querySelectorAll(e),a=document.querySelectorAll("".concat(e,"-headroom"));let n;a.length&&(n=k(a),(0,A.U)((e=>x(e,n)),100,!1),x(w.O.getViewportSize(),n)),t.length&&C(t)}(),(()=>{const e=j(".typeface-favorite-btn");e.length&&(e.on("click",D),E.a.addEventListener(N,(e=>(0,O.O)("favorites_counter",e.data.is_favorite))))})(),(0,R.UR)(),(0,L._6)(),(0,F.init)(),new U(l(),"#tag-control","#tag-list").init()},6468:(e,t,a)=>{"use strict";a.d(t,{UR:()=>p,_k:()=>c,cz:()=>u});var n=a(37588),r=a.n(n),s=a(66704),i=a(33568);const c=()=>r()("#ajax-error"),l=(e,t)=>{let a=e.message||t.statusText;if(t.responseJSON){const e=t.responseJSON;e.errors&&e.errors.form&&(a=(e=>{const t=[];return(0,i.each)(e.children,((e,a)=>{e.errors&&e.errors.length&&t.push("<li><strong>".concat(a,": </strong>").concat(e.errors.join(""),"</li>"))})),"<ul>".concat(t.join(""),"</ul>")})(e.errors.form))}return a},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.length&&r()("#ajax-error-message").html(e),c().show(),s.g.initAlertFadeOut()},d=(e,t)=>{let a={};t.status>=400&&(a=t.responseJSON||t.responseText,o(l(a,t)))},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o(e)},m=()=>{r()("[data-hide]").on("click",(function(){r()("."+r()(this).attr("data-hide")).hide()}))},p=()=>{c().length&&r()(document).ajaxError(d),m()}},76104:(e,t,a)=>{"use strict";a.d(t,{aA:()=>Je,GW:()=>pe,Ul:()=>ke});a(29708),a(34088);var n=a(37588),r=a.n(n),s=a(54312),i=a.n(s),c=a(68964),l=a(33568),o=a(68188),d=a.n(o),u=a(95360);const m="",p="new-and-fresh",h="trending",v="most-popular",g="alphabetic",f="most-styled",y="free-for-commercial-use",E="recently-published",b="last-edit";var A=a(75672),w=a(29926);const C=(e,t,a,n)=>{const r=()=>{const r=function(){let r=(0,l.reduce)(e,(function(e,a,n){return(0,l.isEqual)(a,t[n])?e:e.concat(n)}),[]);const s=window.location.pathname===d().generate("typeface-search"),i=[a.length?void 0:"order",n.length?void 0:"items",s?"order":void 0];return(0,l.remove)(r,(e=>(0,l.includes)(i,e))),r}();let i=window.location.origin+window.location.pathname,c=[];return(0,l.each)(r,(t=>{c.push("".concat(t,"=").concat(encodeURIComponent(e[t])))})),s(["search"],(e=>c.push(e))),c.length&&(i="".concat(i,"?").concat(c.join("&"))),i},s=(e,t)=>{window.location.search.split(/[?&]/).forEach((a=>{const n=a.split("=");(0,l.includes)(e,n[0])&&t(a)}))},i=document.querySelector("#permalink-btn"),c=document.querySelector("#permalink-modal");if(i&&c){const e=document.querySelector("#permalink-href"),t=()=>{e.value=r(),e.select(),e.focus()};i.addEventListener("click",(e=>{(0,u.aY)(e),c.removeEventListener("shown.bs.modal",t),c.addEventListener("shown.bs.modal",t),w.wJ.getOrCreateInstance(c).show()}))}};var k=a(53660),S=a(2704),x=a(27336),T=(a(54004),a(49272));const _=e=>d().generate("index-tagged",{tags:e}),O=()=>d().generate("homepage"),R=()=>_(p),I=()=>_(h),j=()=>_(v),P=()=>_(g),N=()=>_(f),q=()=>_(y),D=()=>_(E),L=()=>_(b),F=()=>d().generate("legacy_free-fonts-for-commercial-use");var M=a(27404);const U=r()("#font-size-selector"),z=r()("#font-size-selector-mobile"),H=r()("#font-sample-text"),B=r()("#sort-fonts-select"),G=r()("#per-page-fonts-select"),W=r()("#commercial-only-btn"),K=r()("#colorPickers"),V=new class{constructor(e){this.$button=e,this.replaceTooltip=()=>{},this.$button.length&&(this.replaceTooltip=e=>{(0,M.y6)(this.$button,/:(.*)$/,": "+e)})}click(){this.$button.trigger("click")}replaceTooltipText(e){this.replaceTooltip(e)}onClick(e){this.$button.on("click",e)}show(){this.$button.show(),w.o5.getInstance(this.$button[0]).show()}hide(){this.$button.hide()}visible(){return(0,u.AV)(this.$button)}}(r()("#subset-only-btn"));var Y;const $=(e,t)=>Q(e,"page",t>1?t:null),Q=(e,t,a)=>{let n=e.split(/[?&]/);n=(0,l.filter)(n,(e=>e.indexOf("".concat(t,"="))<0)),a&&n.push("".concat(t,"=").concat(a));const r=n.length>1?"?":"";return"".concat(n[0]).concat(r).concat(n.splice(1).join("&"))};class J{constructor(e,t){this.items=e,this.page=t}calculatePage(e){const t=(this.page-1)*this.items+1;let a=1,n=1;for(;a<=t;)a+=e,n++;return n-1}}var Z,X,ee,te;Y=J,Z=J,ee=e=>{const t=e.items,a=window.location.href.match(/[?&]page=(\d+)/);let n=1;return a&&(n=parseInt(a[1],10)),new Y(t,n)},(X="symbol"==typeof(te=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(X="create","string"))?te:String(te))in Z?Object.defineProperty(Z,X,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Z[X]=ee;a(544);var ae,ne=a(15192);function re(e,t){ie(e,t),t.add(e)}function se(e,t,a){ie(e,t),t.set(e,a)}function ie(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ce(e,t,a){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function le(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}function oe(e,t){var a=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,a)}const de=e=>{let t=(0,A.iY)();return e&&Ae&&Ae.exists()&&Ae.get().size&&(t=(0,A.G2)(Ae.get().size)),t},ue=(e,t)=>{const a=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});if(e&&a.size&&!isNaN(a.size)){const e=parseInt(a.size,10);return e>23?(0,A.y4)(e):e}return t&&Ae&&Ae.exists()&&Ae.get().size?Ae.get().size:0},me=()=>({text:"",size:ue(),items:10,order:m,commercial:!1,fg:"000000",bg:"ffffff",subset:!1});let pe=me();const he=r()("#font-size-increase"),ve=r()("#font-size-decrease"),ge=r()(".browsing-options"),fe=r()("#font-sample-text-delete"),ye=r()("#form-browsing-options"),Ee=["text","size","items","fg","bg","order","commercial","subset","page"],be=r()("#reset-browsing-cookie"),Ae=new class{constructor(e,t){this.name=t,this.domainOptions={domain:e.replace(/^\./,""),secure:!0,sameSite:"lax"}}get(e){return!1===this.exists()?e:JSON.parse(T.c.get(this.name))}save(e){T.c.set(this.name,JSON.stringify(e),this.domainOptions)}reset(){T.c.remove(this.name,this.domainOptions)}exists(){return!!T.c.get(this.name)}changedKeys(e){if(!this.exists())throw new Error("No browsing cookie exists");const t=this.get(),a=[];return Object.keys(t).forEach((n=>{t[n]!==e[n]&&a.push(n)})),a}}(c.i4.cookieDomain,c.i4.cookieName),we=[{order:p,route:R()},{order:h,route:I()},{order:v,route:j()},{order:g,route:P()},{order:f,route:N()},{order:E,route:D()},{order:b,route:L()}],Ce=()=>{const e=r()(".page-item").find("a.page-link");e.length&&e.each(((e,t)=>{const a=r()(t);let n=a.prop("href")+"";n.length&&a.prop("href",(e=>{const t=new URL(e);return["text","size","items","fg","bg","order","commercial","subset"].forEach((e=>{t.searchParams.delete(e)})),t.toString()})(n))}))},ke=()=>{Ce(),(0,l.isEqual)(pe,me())?Ae.reset():Ae.save(pe),xe()},Se=()=>{let e=!1;try{const t=Ae.changedKeys(me()),a={text:(0,u.AV)(H),size:(0,u.AV)(z)||(0,u.AV)(U),items:(0,u.AV)(G),fg:(0,u.AV)(K),bg:(0,u.AV)(K),order:(0,u.AV)(B),commercial:(0,u.AV)(W),subset:V.visible()};let n=t.length;Object.keys(a).forEach((e=>{t.includes(e)&&!1===a[e]&&n--})),e=Math.abs(n)>0}catch(e){}return e},xe=()=>be.toggle(Se());var Te=new WeakMap,_e=new WeakMap,Oe=new WeakMap,Re=new WeakMap,Ie=new WeakMap,je=new WeakMap,Pe=new WeakMap,Ne=new WeakMap,qe=new WeakMap,De=new WeakMap,Le=new WeakMap,Fe=new WeakMap,Me=new WeakMap,Ue=new WeakMap,ze=new WeakSet,He=new WeakSet,Be=new WeakSet,Ge=new WeakSet,We=new WeakMap;class Ke{constructor(e){var t=this;re(this,Ge),re(this,Be),re(this,He),re(this,ze),se(this,Te,{writable:!0,value:()=>{const e=pe.text,t=H.val();e!==t&&(pe.text=t,V.replaceTooltipText(t),ke(),pe.subset?this.reloadPage():this.fontPreviews.reload(pe))}}),se(this,_e,{writable:!0,value:()=>{this.fontPreviews.init()}}),se(this,Oe,{writable:!0,value:()=>{let e=this.slider.noUiSlider.options.range;return e=Object.values(e),e.sort(((e,t)=>(0,u.Ab)(e)-(0,u.Ab)(t))),e}}),se(this,Re,{writable:!0,value:()=>{this.handleTooltip.tip||this.handleTooltip.show()}}),se(this,Ie,{writable:!0,value:()=>{this.handleTooltip.tip&&this.handleTooltip.hide()}}),se(this,je,{writable:!0,value:function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&oe(t,Ie).call(t),t.handleTooltip.setContent({".tooltip-inner":"".concat(e,"pt")}),a&&oe(t,Re).call(t)}}),ce(this,"getFontStepSize",(()=>{const e=de(),t=de(!0),a=Math.abs(A.QT.indexOf(t)-A.QT.indexOf(e));return e>t?-a:a})),se(this,Pe,{writable:!0,value:()=>{ve.length&&(ve.hover((()=>oe(this,Re).call(this)),(()=>oe(this,Ie).call(this))),ve.on("click",(e=>{const t=this.slider.noUiSlider.get(),a=oe(this,Oe).call(this);let n=a.length-1,s=a[n];for(;s>=t&&n>=0;)s=a[n--];this.slider.noUiSlider.set(s),r()(e.currentTarget).blur()}))),he.length&&(he.hover((()=>oe(this,Re).call(this)),(()=>oe(this,Ie).call(this))),he.on("click",(e=>{const t=this.slider.noUiSlider.get(),a=oe(this,Oe).call(this);let n=0,s=a[n];for(;s<=t&&n<a.length;)s=a[n++];this.slider.noUiSlider.set(s),r()(e.currentTarget).blur()})))}}),se(this,Ne,{writable:!0,value:()=>{if(z.length){z.val(de(!0)),z.on("change",(e=>this.slider.noUiSlider.set(r()(e.target).val()))),this._dispatcher.addEventListener(S._.SET_FONT_SIZE,(e=>{z.val(e.data.size),e.stopPropagation()}));const e=()=>{const e=de(),t=this.slider.noUiSlider.get(!0),a=(0,l.clamp)(A.QT.indexOf(e)+this.fontStepSize,0,A.QT.length-1),n=A.QT[a];t!==n&&(this.slider.noUiSlider.setHandle(0,n,!1),oe(this,je).call(this,n),z.val(n),this._dispatcher.dispatchEvent(S._.SET_FONT_SIZE,{size:n,browsingOptions:pe,setBrowsingCookie:!1,setStepSize:!1}))};(0,ne.U)((()=>e()),250,!1)}}}),ce(this,"init",(()=>{ge.length&&(pe=(()=>{let e=Ae.get(pe);const t=(0,u.mC)(window.location.search);return!1===(0,u.t7)(t)&&((0,l.merge)(e,t),e=(0,l.pick)(e,Ee)),e})(),oe(this,_e).call(this),oe(this,We).call(this),oe(this,Pe).call(this),oe(this,Ne).call(this),oe(this,Ue).call(this),a.e(8992).then(a.bind(a,68992)).then((e=>{let{init:t}=e;t()})),document.querySelector("#admin-filter-fonts-select")&&Promise.all([a.e(2479),a.e(2052)]).then(a.bind(a,82052)).then((e=>{let{init:t}=e;t()})),oe(this,Me).call(this),oe(this,qe).call(this),oe(this,De).call(this),oe(this,Le).call(this),oe(this,Fe).call(this),C(pe,me(),B,G))})),se(this,qe,{writable:!0,value:()=>{const e=e=>{pe.order=e,ke()};B.length&&(B.on("change",(t=>{const a=r()(t.currentTarget).val();e(a);const n=[d().generate("homepage")].concat(we.map((e=>e.route)));if((0,l.includes)(n,window.location.pathname)){const e=Object.fromEntries(new URLSearchParams(window.location.search).entries());Ke.changePage(d().generate("index-tagged",{...e,tags:a}))}else Ke.changePage()})),we.forEach((t=>{window.location.href.indexOf(t.route)>-1&&e(t.order)})))}}),se(this,De,{writable:!0,value:()=>{if(G.length){const e=e=>{const t=J.create(pe),a=parseInt(r()(e.currentTarget).val(),10),n=t.calculatePage(a);pe.items=parseInt(r()(e.currentTarget).val(),10),ke(),Ke.changePage($(window.location.href,n))};G.on("change",e)}}}),se(this,Le,{writable:!0,value:()=>{W.length&&W.on("click",(()=>{pe.commercial=!pe.commercial,ke(),this.isCommercialOnlyRoute()?Ke.changePage(O()):this.reloadPage()}))}}),se(this,Fe,{writable:!0,value:()=>{V.onClick((()=>{pe.subset=!pe.subset,ke(),this.reloadPage()}))}}),ce(this,"reloadPage",(()=>{Ke.queryStringContainsKey("search")?Ke.changePage(!0):(Ke.changePage(!0),history.replaceState(null,null," "))})),ce(this,"applyFilter",(e=>{e?Ke.changePage($(Q(window.location.href,"filter",e),0)):Ke.changePage($(Q(window.location.href,"filter",void 0),0))})),se(this,Me,{writable:!0,value:()=>{if(H.length){const e=e=>13===e.which,t=()=>{oe(this,Te).call(this),H.val().length&&(V.show(),H.tooltip("hide"))},a=()=>fe.css("display","flex");H.on("input",(()=>{0===H.val().length?(fe.hide(),V.hide(),t()):a()})).on("keyup change paste input",(0,l.debounce)(t,1200)).on("keydown",(a=>{e(a)&&t()})),fe.on("click",(()=>{le(this,Be,$e).call(this),pe.subset&&V.click()}));const n=H.val();!n.length&&(0,l.get)(pe,"text",0)?H.val(pe.text).trigger("change"):n.length&&a()}}}),se(this,Ue,{writable:!0,value:()=>{be.on("click",(()=>{const e=["items","order","commercial","subset"],t=Ae.changedKeys(me()).some((t=>e.includes(t)));k.a.dispatchEvent(S._.DELETE_BROWSING_COOKIE,{});let a=!0;this.isCommercialOnlyRoute()&&(a=R()),t?Ke.changePage(a):(le(this,ze,Ve).call(this),xe())})),xe()}}),ce(this,"isCommercialOnlyRoute",(()=>{const e=[q(),F()];return(0,l.includes)(e,window.location.pathname)})),se(this,We,{writable:!0,value:()=>{const e=ue(!0,!0);let t=(0,A.G2)(e);i().create(this.slider,{start:[t],range:(0,A.iw)(A.QT),snap:!0,animate:!1,format:{to:u.Ab,from:u.Ab}}),this.handle=r()(this.slider).find(".noUi-handle"),this.handle.prop("title","".concat(t,"pt")),this.handleTooltip=new w.o5(this.handle[0],Object.assign({},M.Ou,{animation:!1})),this.slider.noUiSlider.on("slide",((e,t)=>{const a=e[t];this._dispatcher.dispatchEvent(S._.UPDATE_FONT_SIZE,{size:a})})),this.slider.noUiSlider.on("end",(()=>{this.handle.blur()})),this.slider.noUiSlider.on("set",((e,t)=>{const a=e[t];this._dispatcher.dispatchEvent(S._.SET_FONT_SIZE,{size:a,browsingOptions:pe,setBrowsingCookie:!0,setStepSize:!0})}))}}),this._dispatcher=e,this.slider=U[0],this.fontStepSize=ue(!0,!0),this.handle=null,this.handleTooltip=null,this.fontPreviews=new x.y(r(),e),ye.length&&ye.on("submit",(e=>{e.preventDefault()})),e.addEventListener(S._.UPDATE_FONT_SIZE,(e=>oe(this,je).call(this,e.data.size))),e.addEventListener(S._.SET_FONT_SIZE,(e=>{oe(this,je).call(this,e.data.size),pe.size=(0,A.y4)(e.data.size),e.data.setBrowsingCookie&&ke(),e.data.setStepSize&&(this.fontStepSize=this.getFontStepSize())})),e.addEventListener(S._.DELETE_BROWSING_COOKIE,(()=>Ae.reset()))}}function Ve(){le(this,He,Ye).call(this),le(this,Be,$e).call(this),le(this,Ge,Qe).call(this)}function Ye(){k.a.dispatchEvent(S._.RESET_COLORS,{})}function $e(){r()("#subset-only-btn").tooltip("hide"),H.val(""),H.trigger("input")}function Qe(){this.slider.noUiSlider.set((0,A.G2)(0))}ae=Ke,ce(Ke,"queryStringContainsKey",(e=>window.location.search.includes(e+"=")>0)),ce(Ke,"disableToolbar",(()=>{ye.find("fieldset").prop("disabled",!0)})),ce(Ke,"changePage",(e=>{ae.disableToolbar(),!e||(0,l.isBoolean)(e)?window.location.reload():window.location.href=e}));const Je=new Ke(k.a)},75672:(e,t,a)=>{"use strict";a.d(t,{G2:()=>l,QT:()=>s,iY:()=>c,iw:()=>i,y4:()=>o});a(29708);var n=a(33568),r=a(55248);const s=[24,26,28,32,36,40,44,48,54,60,66,72,80,88,96,106,116,128,142,158,178,198,218,240],i=e=>{e.sort(((e,t)=>e-t));let t={min:Math.min(...e),max:Math.max(...e)};for(let a=0,n=(e=e.slice(0,e.length-1)).length;a<n;a++){t[100/n*a+"%"]=e[a]}return delete t["0%"],t},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.O.getViewportSize().width;const t=[{limit:376,size:44},{limit:576,size:54},{limit:768,size:72},{limit:992,size:80},{limit:1280,size:88},{limit:1400,size:96},{limit:1920,size:106}];let a=40;return t.forEach((t=>{let{limit:n,size:r}=t;e>n&&(a=r)})),a},l=e=>{let t=c();return e>=24?e:s[(0,n.clamp)(s.indexOf(t)+e,0,s.length-1)]},o=e=>{const t=c(),a=Math.abs(s.indexOf(e)-s.indexOf(t));return t>e?-a:a}},28768:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,s:()=>r});const n=(e,t)=>{e.contents().last()[0].textContent&&(e.contents().last()[0].textContent=" ".concat(t))},r=(e,t)=>{let a=e.find("i");a.removeClass(),a.addClass(t)}},43565:(e,t,a)=>{"use strict";a.d(t,{C:()=>r});var n=a(61948);class r{constructor(){this.reset(),this.update=()=>{this._dispatcher.dispatchEvent("update",{count:this._count})}}increase(){this._count++,this.update()}decrease(){this._count--,this.update()}registerCallback(e){this._dispatcher.addEventListener("update",e)}reset(){this._dispatcher=new n.Q5,this._count=0}get count(){return this._count}set count(e){this._count=e,this.update()}}},27336:(e,t,a)=>{"use strict";a.d(t,{y:()=>d});var n=a(76104),r=a(2704),s=(a(54004),a(58692)),i=a(68964),c=a(75672);const l="?cache=0",o=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n="source"===e.tagName.toLowerCase()?e.srcset:e.src;n=n.split(", ");const r=n.map((n=>{let r=n.replace(l,"").split("/");const o=r.length-2,d=r[o],u=s.Q1.decode(d).split(".");var m;(u[1]=(0,c.G2)(t.size),u[2]=t.fg,0===t.text.length)?(u[3]=s.Q1.encodeURI(null!==(m=e.dataset.alt)&&void 0!==m?m:e.alt),r=r.map((e=>e===i.i4.txtDomain?i.i4.staticDomain:e))):(u[3]=s.Q1.encodeURI(t.text),r=r.map((e=>e===i.i4.staticDomain?i.i4.txtDomain:e)));r[o]=s.Q1.encodeURI(u.join("."));let p=r.join("/");return a&&(p=p.replace(/\.(png|webp)$/,".".concat(a))),p}));return r.join(", ")};class d{constructor(e,t){this._$=e,this._dispatcher=t,this.fontPreviews=document.querySelectorAll(".txt-preview"),this.findImageSize=e=>e.prop("width")||e.width("auto").width(),this.registerPreviewSize=e=>{const t=this._$(e);e.dataset.previewSize=this.findImageSize(t.find("img"))},this.updateImageSize=(e,t)=>{var a;const r=this._$(t).find("img");let s=null!==(a=t.dataset.previewSize)&&void 0!==a?a:r.width("auto").width();r.width("".concat((0,c.G2)(e.data.size)/(0,c.G2)(n.GW.size)*s,"px"))},this.resetStyleWidth=e=>{e.style.width=null},this.reload=this.reload.bind(this),this.reloadImage=this.reloadImage.bind(this)}init(){this.fontPreviews.length&&this.fontPreviews.forEach((async e=>{const t=e.querySelector("img");e.dataset.alt=t.alt,t.addEventListener("load",(()=>this.registerPreviewSize(e))),t.addEventListener("load",(()=>this.resetStyleWidth(t))),this._dispatcher.addEventListener(r._.UPDATE_FONT_SIZE,(t=>this.updateImageSize(t,e))),this._dispatcher.addEventListener(r._.SET_FONT_SIZE,(t=>{this.reloadImage(e,t.data.browsingOptions)}))}))}reload(e){this.fontPreviews.forEach((async t=>{this.reloadImage(t,e)}))}reloadImage(e,t){let a=this._$(e);const n=a.find("img"),r='\n      <source srcset="'.concat(o(n[0],t,"webp"),'" type="image/webp">\n      <source srcset="').concat(o(n[0],t,"png"),'" type="image/png">\n    ');a.empty(),a.append(r),n.prop("src",o(n[0],t,"png")),n.data("alt",n.prop("alt")),n.removeAttr("width height"),a.append(n)}}},66704:(e,t,a)=>{"use strict";a.d(t,{g:()=>l,y:()=>s});var n=a(37588),r=a.n(n);const s=5e3;let i=null;const c=()=>{const e=r()("#alert-container").find(".alert");e.length&&e.fadeOut(),i=null};class l{static initAlertFadeOut(){i&&window.clearTimeout(i),i=window.setTimeout(c,s)}}},72480:(e,t,a)=>{"use strict";a.d(t,{I:()=>r});a(29708),a(544),a(34088);const n=e=>{const t=new URL(e);return t.searchParams.set("t",(new Date).getTime().toString(10)),t.toString()},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=window.document);const t=e.querySelectorAll(".user-avatar-container");t.forEach((e=>{e.querySelectorAll("source, img").forEach((e=>{"SOURCE"===e.tagName&&(e.srcset=n(e.srcset)),"IMG"===e.tagName&&(e.src=n(e.src))}))}))}},15192:(e,t,a)=>{"use strict";a.d(t,{U:()=>i});var n=a(37588),r=a.n(n),s=a(33568);const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e)return;let i=0,c=0;const l=r()(window),o=e=>{i=e.width(),c=e.height()};let d=function(e){return!!n&&e.width()!==i},u=function(e){return!!a&&e.height()!==c};const m=e=>d(e)||u(e);o(l),l.on("resize",(0,s.debounce)((()=>{m(l)&&(o(l),e(l))}),t))}},27404:(e,t,a)=>{"use strict";a.d(t,{G4:()=>i,Ou:()=>r,kT:()=>s,y6:()=>c});a(54004),a(29708);var n=a(29926);const r={container:"body",boundary:"window"};class s{static init(){const e=Object.assign({},r,{delay:{show:500,hide:0}});[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((t=>new n.o5(t,e)))}}function i(e,t){"tooltip"===e.data("bs-toggle")&&n.o5.getInstance(e[0]).setContent({".tooltip-inner":t})}function c(e,t,a){var n;i(e,(null!==(n=e.data("bs-original-title"))&&void 0!==n?n:"").replace(t,a))}},33964:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TypefaceActivitiesProvider:()=>f,init:()=>E,useTypefaceActivities:()=>y});a(29708);var n=a(11504),r=a(28352),s=a(97104),i=a(3268),c=a.n(i),l=a(85075),o=a(83884),d=a(98584),u=a(44472),m=a(892);const p=()=>s.createPortal(n.createElement(l.TypefaceActivities,null),document.querySelector("#typeface-activities-container")),h=()=>s.createPortal(n.createElement(o.TypefaceActivityInfo,null),document.querySelector("#typeface-activity-info")),v=()=>s.createPortal(n.createElement(d.TypefacePublishingHistory,null),document.querySelector("#typeface-publishing-history")),g=(0,n.createContext)({}),f=e=>{let{children:t,typeface:a}=e;const[r,s]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1),[l,o]=(0,n.useState)(null);return(0,n.useEffect)((()=>{u.G.setForActivity(a.slug,a),m.s.find(a.slug).then((e=>{s(e.activities),c(!0)})).catch((e=>{o(e),c(!0)}))}),[a]),n.createElement(g.Provider,{value:{loaded:i,typeface:a,activities:r,error:l}},t)};f.propTypes={children:c().node.isRequired,typeface:c().object.isRequired};const y=()=>{const e=(0,n.useContext)(g);if(!e)throw new Error("Could not find TypefaceActivityState.");return e},E=()=>{(()=>{const e=document.querySelector("#activity-react-root");if(e){const t=(0,l.getTypefaceFromDataset)(e);r.createRoot(e).render(n.createElement(f,{typeface:t},n.createElement(p,null),n.createElement(h,null),n.createElement(v,null)))}})()}},48324:(e,t,a)=>{"use strict";a.d(t,{G:()=>r,_:()=>s});var n=a(50904);const r=()=>document.querySelector("#typeface-detail-title").dataset.slug,s=(e,t)=>{(0,n.a)(e)&&("function"==typeof window.history.replaceState?history.replaceState({},document.title,t):window.location.hash="")}},64499:(e,t,a)=>{"use strict";a.d(t,{C:()=>r});const n=[{id:1,label:"Fully Approved"},{id:2,label:"Semi Approved"},{id:0,label:"No Level"},{id:-2,label:"Suspended"},{id:-1,label:"Banned"}];class r{static getIdByLabel(e){try{return n.find((t=>t.label===e)).id}catch(e){return 0}}}},55248:(e,t,a)=>{"use strict";a.d(t,{O:()=>n});class n{static getViewportSize(){return new r(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)}}function r(e,t){return{width:e,height:t}}},86888:(e,t,a)=>{"use strict";a.d(t,{I:()=>n,k:()=>r});const n=()=>{const e=document.getElementById("nav-avatar");if(e)return e.dataset.username},r=e=>n()===e},51126:(e,t,a)=>{"use strict";a.d(t,{y:()=>M});var n=a(11504),r=a(28352),s=(a(96236),a(95416)),i=a(6832),c=a(892),l=a(48324),o=a(65536),d=a(87908),u=a(1648),m=a(73568);function p(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h=new class{constructor(){p(this,"isPublished",(e=>(console.log("route",(0,m.i8)(e)),new Promise(((t,a)=>{fetch((0,m.i8)(e)).then((e=>e.json())).then((e=>{t(e.isPublished)})).catch((e=>{a(e)}))})))))}};var v=a(53660),g=a(2704),f=a(37588);const y="#typeface-privacy-modal",E=f("#typeface-privacy-btn");let b=0,A=0,w=0,C=0,k=s.O.trans("walkthrough.steps.add-illustrations.content");const S=(e,t,a,n,r,i,c,l,o,d)=>{let u=[];const m=[!t,!a,!n,!i,!c].filter(Boolean).length;return e&&m>0?o&&l?u.push({target:"body",placement:"center",title:s.O.trans("walkthrough.steps.intro-fullyapproved.title"),content:s.O.trans("walkthrough.steps.intro-fullyapproved.content"),id:"intro-step",disableBeacon:!0}):u.push({content:"".concat(e[1]),placement:"center",target:"body",title:"".concat(e[0]),id:"intro-step",disableBeacon:!0}):e&&0===m&&u.push({placement:"center",target:"body",title:s.O.trans("walkthrough.steps.congratulations.title"),content:s.O.trans("walkthrough.steps.congratulations.content"),id:"intro-step",disableBeacon:!0}),a||u.push({target:"#typeface-description .editable-btn",title:s.O.trans("walkthrough.steps.description.title"),content:s.O.trans("walkthrough.steps.description.content"),disableBeacon:!0,spotlightClicks:!0,id:"add-description"}),n||u.push({target:"#change-license-btn",title:s.O.trans("walkthrough.steps.license.title"),content:s.O.trans("walkthrough.steps.license.content"),spotlightClicks:!0,disableBeacon:!0,id:"add-license"}),c||(u.push({target:".dropbox-form",title:s.O.trans("walkthrough.steps.add-illustrations.title"),content:k,spotlightClicks:!0,disableBeacon:!0,id:"add-illustrations"}),u.push({target:"#create-illustrations-toolbar .create-btn-group",title:s.O.trans("walkthrough.steps.create-illustrations.title"),content:s.O.trans("walkthrough.steps.create-illustrations.content"),spotlightClicks:!0,disableBeacon:!0})),i||u.push({target:"#typeface-links .input-group",title:s.O.trans("walkthrough.steps.links.title"),content:s.O.trans("walkthrough.steps.links.content"),spotlightClicks:!0,disableBeacon:!0,id:"add-links"}),t||(u.push({target:"#tags",title:s.O.trans("walkthrough.steps.typeface-tags.title"),content:s.O.trans("walkthrough.steps.typeface-tags.content"),spotlightClicks:!0,disableBeacon:!0,placement:"left",id:"add-tags"}),u.push({target:".typeface-fonts .font-tags .tags",title:s.O.trans("walkthrough.steps.font-tags.title"),content:s.O.trans("walkthrough.steps.font-tags.content"),spotlightClicks:!0,disableBeacon:!0,placement:"right-start",id:"add-font-tags"})),o&&l?u.push({target:"body",title:s.O.trans("walkthrough.steps.finished-fullyapproved.title"),content:s.O.trans("walkthrough.steps.finished-fullyapproved.content"),disableBeacon:!0,spotlightClicks:!0,placement:"center",id:"change-privacy"}):r&&!l?u.push({target:".typeface-privacy-btn",title:s.O.trans("walkthrough.steps.finished-privacy.title"),content:s.O.trans("walkthrough.steps.finished-privacy.content"),spotlightClicks:!0,disableBeacon:!0,id:"change-privacy"}):r&&l?d?u.push({target:".typeface-approvement-btn",title:s.O.trans("walkthrough.steps.finished-semiapproved.title"),content:s.O.trans("walkthrough.steps.finished-semiapproved.content"),spotlightClicks:!0,disableBeacon:!0,id:"change-privacy"}):u.push({target:".typeface-approvement-btn",title:s.O.trans("walkthrough.steps.finished-semiapproved-noactivity.title"),content:s.O.trans("walkthrough.steps.finished-semiapproved-noactivity.content"),spotlightClicks:!0,disableBeacon:!0,id:"change-privacy"}):u.push({target:".typeface-approvement-btn",title:s.O.trans("walkthrough.steps.finished-approvement.title"),content:s.O.trans("walkthrough.steps.finished-approvement.content"),disableBeacon:!0}),u},x=()=>{const e=()=>({license:document.getElementById("change-license-btn"),privacy:document.getElementById("typeface-privacy-btn"),gallery:document.querySelector(".gallery__list"),links:document.querySelector(".typeface__linklist")});return{all:e,ready:()=>{const t=e();return t.license&&t.privacy&&t.gallery&&t.links}}},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.filter((e=>t!==[]?n?t.includes(e.action)&&"unknown-author"!==e.username:t.includes(e.action):!n||"unknown-author"!==e.username)).length>a},_=async(e,t)=>{const a=t.all();await c.s.clearCache((0,l.G)());const n=(await c.s.find((0,l.G)())).activities,r=T(n,[o.actions.ILLUSTRATION_CREATED.name]),i=null!==a.gallery.querySelector(".gallery__item");if(r&&i)return[];const d=await h.isPublished((0,l.G)()),u="1"===R.dataset.isFullyApproved,m=U(n);return k=s.O.trans("walkthrough.steps.add-illustrations.content"),S(e,!0,!0,!0,!0,!0,i&&r,d,u,m)},O=async(e,t)=>{const a=t.all();await c.s.clearCache((0,l.G)());const n=(await c.s.find((0,l.G)())).activities,r=T(n,[o.actions.TYPEFACE_DESCRIPTION_CHANGED.name]),i=T(n,[o.actions.TYPEFACE_LICENSE_CHANGED.name]),d=!a.privacy.classList.contains("d-none"),u=await h.isPublished((0,l.G)()),m=T(n,[o.actions.TYPEFACE_FONT_TAG_ADD.name],0,!0),p=T(n,[o.actions.ILLUSTRATION_CREATED.name],0,!0),v=a.gallery.querySelectorAll(".gallery__item").length>1,g=T(n,[o.actions.TYPEFACE_LINK_CREATED.name]),f=p||v,y="1"===R.dataset.isFullyApproved;if(!f){const e=(e=>e.filter((e=>o.actions.ILLUSTRATION_CREATED.name===e.action)).map((e=>e.data.label)))(n);(e=>{k=e.includes("extracted")?s.O.trans("walkthrough.steps.add-illustrations.content-extracted"):e.includes("created")?s.O.trans("walkthrough.steps.add-illustrations.content-created"):s.O.trans("walkthrough.steps.add-illustrations.content")})(e)}const E=U(n);return m&&r&&i&&!d&&g&&f?[]:S(e,m,r,i,d,g,f,u,y,E)},R=document.getElementById("walkthrough-container"),I=document.getElementById("walkthrough-completion-container"),j=document.getElementById("typeface-walkthrough-btn");let P=null,N=0,q=!1;const D=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return L(j),q=!0,new Promise((s=>{const c=x(),l=window.setInterval((async()=>{if(c.ready()){window.clearInterval(l),P||(P=r.createRoot(R));const o=await a(e,c);P.render(n.createElement(i.default,{ref:M,steps:o,restart:t})),F(j),s()}}),250)}))};const L=e=>{if(e){const t=e.querySelector("i");t&&(e.dataset.oldIcon=t.className,t.className="fas fa-spinner fa-spin")}},F=e=>{if(!e)return;const t=e.querySelector("i");e.dataset.oldIcon&&t&&(t.className=e.dataset.oldIcon)},M=n.createRef();v.a.addEventListener(g._.UPDATE_WALKTHROUGH,(()=>{M.current&&M.current.step.isRunning&&M.current.refresh()})),v.a.addEventListener(g._.UPDATE_ADDED_TAGS_COUNT,(async e=>{b+=e.data,M.current&&(b<1?M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.content")):1===b?M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.success-content-singular",{count:b})):b>1&&b<=4?M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.success-content-upto-4",{count:b})):b>4&&b<=6?M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.success-content-5-6",{count:b})):b>6&&b<=9?M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.success-content-7-9",{count:b})):b>9&&b<=12?M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.success-content-10-12",{count:b})):b>12&&b<=15?M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.success-content-13-15",{count:b})):b>15&&M.current.updateStep("add-tags",s.O.trans("walkthrough.steps.typeface-tags.success-content-16-above",{count:b}))),await z()})),v.a.addEventListener(g._.UPDATE_ADDED_FONT_TAGS_COUNT,(async e=>{A+=e.data,M.current&&(A<1?M.current.updateStep("add-font-tags",s.O.trans("walkthrough.steps.font-tags.content")):1===A?M.current.updateStep("add-font-tags",s.O.trans("walkthrough.steps.font-tags.success-content-singular",{count:A})):2===A?M.current.updateStep("add-font-tags",s.O.trans("walkthrough.steps.font-tags.success-content-2",{count:A})):M.current.updateStep("add-font-tags",s.O.trans("walkthrough.steps.font-tags.success-content-3-above",{count:A}))),await z()})),v.a.addEventListener(g._.UPDATE_ADDED_LINKS_COUNT,(async e=>{w+=e.data,M.current&&(w<1?(M.current.updateStep("add-links",s.O.trans("walkthrough.steps.links.content")),M.current.reRender()):1===w?(M.current.updateStep("add-links",s.O.trans("walkthrough.steps.links.success-content-singular",{count:w})),M.current.reRender()):(M.current.updateStep("add-links",s.O.trans("walkthrough.steps.links.success-content",{count:w})),M.current.reRender())),await z()})),v.a.addEventListener(g._.UPDATE_ADDED_ILLUSTRATIONS_COUNT,(async e=>{C+=e.data,M.current&&(C<0?M.current.updateStep("add-illustrations",s.O.trans("walkthrough.steps.add-illustrations.content")):0===C?M.current.updateStep("add-illustrations",k):1===C?M.current.updateStep("add-illustrations",s.O.trans("walkthrough.steps.add-illustrations.success-content-singular",{count:C})):M.current.updateStep("add-illustrations",s.O.trans("walkthrough.steps.add-illustrations.success-content",{count:C}))),await z()})),v.a.addEventListener(g._.UPDATE_WALKTHROUGH_DESCRIPTION_STEP,(async e=>{M.current&&(""===e.data?M.current.updateStep("add-description",s.O.trans("walkthrough.steps.description.content")):M.current.updateStep("add-description",s.O.trans("walkthrough.steps.description.success-content"))),await z()})),v.a.addEventListener(g._.UPDATE_WALKTHROUGH_LICENSE_STEP,(async()=>{M.current&&M.current.updateStep("add-license",s.O.trans("walkthrough.steps.license.success-content")),await z()})),v.a.addEventListener(g._.UPDATE_WALKTHROUGH_PRIVACY_STEP,(async e=>{const t="1"===R.dataset.isFullyApproved;M.current&&(1===e.data.privacyLevel&&t?(M.current.updateStep("change-privacy",s.O.trans("walkthrough.steps.finished-fullyapproved.content"),s.O.trans("walkthrough.steps.finished-fullyapproved.title"),"body","center"),M.current.updateStep("intro-step",s.O.trans("walkthrough.steps.intro-fullyapproved.content"),s.O.trans("walkthrough.steps.intro-fullyapproved.title"),"body","center")):1===e.data.privacyLevel?M.current.updateStep("change-privacy",s.O.trans("walkthrough.steps.finished-semiapproved.content"),s.O.trans("walkthrough.steps.finished-semiapproved.title"),".typeface-approvement-btn"):(M.current.updateStep("change-privacy",s.O.trans("walkthrough.steps.finished-privacy.content"),s.O.trans("walkthrough.steps.finished-privacy.title"),".typeface-privacy-btn"),M.current.updateStep("intro-step",s.O.trans("walkthrough.steps.intro.content.approved"),s.O.trans("walkthrough.steps.intro.title"),"body","center")),await z())})),v.a.addEventListener(g._.ADD_COMPLETION_STEP,(()=>{if(M.current&&!(0,d.QW)()){r.createRoot(I).render(n.createElement(i.default,{steps:["1"===R.dataset.isFullyApproved?{target:"body",placement:"center",title:s.O.trans("walkthrough.steps.completion-fullyapproved.title"),content:s.O.trans("walkthrough.steps.completion-fullyapproved.content"),disableBeacon:!0,id:"completion-step"}:{target:"body",placement:"center",title:s.O.trans("walkthrough.steps.completion.title"),content:s.O.trans("walkthrough.steps.completion.content"),disableBeacon:!0,id:"completion-step"}]})),(0,d.uk)()}}));const U=e=>{const t=[o.actions.TYPEFACE_DESCRIPTION_CHANGED.name,o.actions.TYPEFACE_LICENSE_CHANGED.name,o.actions.TYPEFACE_LINK_CREATED.name,o.actions.TYPEFACE_FONT_TAG_ADD.name,o.actions.ILLUSTRATION_CREATED.name];return T(e,t,0,!0)},z=async()=>{const e="1"===R.dataset.isFullyApproved,t=await h.isPublished((0,l.G)());if(console.log(e,t),!e&&t&&M.current){const e=(await c.s.find((0,l.G)())).activities,t=U(e);console.log(t),t?M.current.updateStep("change-privacy",s.O.trans("walkthrough.steps.finished-semiapproved.content"),s.O.trans("walkthrough.steps.finished-semiapproved.title"),".typeface-approvement-btn"):M.current.updateStep("change-privacy",s.O.trans("walkthrough.steps.finished-semiapproved-noactivity.content"),s.O.trans("walkthrough.steps.finished-semiapproved-noactivity.title"),".typeface-approvement-btn")}};!async function(){if(R){(0,d.IH)();const e="1"===R.dataset.isApproved,t="1"===R.dataset.isFullyApproved,a=e?[s.O.trans("walkthrough.steps.intro.title"),s.O.trans("walkthrough.steps.intro.content.approved")]:[s.O.trans("walkthrough.steps.intro.title"),s.O.trans("walkthrough.steps.intro.content.not-approved")],n=(await c.s.find((0,l.G)())).activities,r=[o.actions.TYPEFACE_DESCRIPTION_CHANGED.name,o.actions.TYPEFACE_LICENSE_CHANGED.name,o.actions.TYPEFACE_LINK_CREATED.name,o.actions.TYPEFACE_FONT_TAG_ADD.name,o.actions.ILLUSTRATION_CREATED.name],i=E.find("i");null==j||j.addEventListener("click",(()=>D(a,++N,O))),E.on("click",(async e=>{e.stopImmediatePropagation(),e.preventDefault();const t=i.prop("class"),a=E.prop("class");E.prop("class",a+" disabled"),i.prop("class","fas fa-spinner fa-spin"),(0,d.IH)();await h.isPublished((0,l.G)())?(q&&(0,d.U9)(),(0,u.A5)({data:{modal:y}})):M.current&&M.current.step.isRunning?await m():await p(),i.prop("class",t),E.prop("class",a)}));const m=async()=>{(await _([],x())).length<1?(M.current.stop(),(0,u.A5)({data:{modal:y}})):M.current.setStep({index:1,isRunning:!1})},p=async()=>{(await _([],x())).length>1?await D([s.O.trans("walkthrough.steps.missing-illustrations.title"),s.O.trans("walkthrough.steps.missing-illustrations.content")],++N,_):!q&&(await O([],x())).length>2?(await D(a,++N,O),(0,d.U9)()):((0,d.U9)(),(0,u.A5)({data:{modal:y}}))};e&&(t||T(n,r,0,!0))||await D([s.O.trans("walkthrough.steps.intro.title"),s.O.trans("walkthrough.steps.intro.content.not-approved")],void 0,O)}}()},48396:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[8432,3568,9926,4004,4356,7560,9120,4703,1088,8952,2200,7412,6992,4980,4772,2728,2148,3856,5192,6432,2479,131,5516,7716,6404,5416,7908,7528,6356],(()=>(t(47244),t(65060))));e.O()}]);