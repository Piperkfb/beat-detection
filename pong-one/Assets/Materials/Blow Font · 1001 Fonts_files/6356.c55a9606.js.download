"use strict";(self.webpackChunk_1001fonts=self.webpackChunk_1001fonts||[]).push([[6356,5460],{47244:(t,e,s)=>{var o=s(68188),a=s.n(o);const r=JSON.parse('{"base_url":"","routes":{"admin_get_activity_typeface":{"tokens":[["text",".json"],["variable","/","[^\\\\/]+","slug",true],["text","/admin/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"admin_get_activity_user":{"tokens":[["text",".json"],["variable","/","[^/\\\\.]++","username",true],["text","/admin/user"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"thread_edit":{"tokens":[["text","/edit"],["variable","/","\\\\d+","id",true],["text","/thread"],["variable","/","[^/]++","slug",true],["text","/forums"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["GET","POST"],"schemes":[]},"get-editor-features":{"tokens":[["variable","/","[^/]++","type",true],["text","/editor-features"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_illustration_upload_status":{"tokens":[["variable","/","[^\\\\/]+","uuid",true],["text","/illustration/upload/status"]],"defaults":[],"requirements":{"uuid":"[^\\\\/]+"},"hosttokens":[],"methods":["GET"],"schemes":[]},"typeface_illustration_upload_files":{"tokens":[["text","/illustration/upload-files"],["variable","/","[^\\\\/]+","slug",true]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"typeface-search":{"tokens":[["text","/search.html"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"add_typeface_link":{"tokens":[["text","/link"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"delete_typeface_link":{"tokens":[["variable","/","-?\\\\d+","id",true],["text","/link"],["variable","/","[^/]++","typefaceSlug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+","id":"-?\\\\d+"},"hosttokens":[],"methods":["DELETE"],"schemes":[]},"typeface_favorites_count":{"tokens":[["text","/favorites/count"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_license_form":{"tokens":[["text","/form"],["variable","/","[^\\\\/]+","slug",true],["text","/licenses"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"get_typeface_activities":{"tokens":[["text","/activity/"],["variable","/","[^/]++","slug",true],["text","/typeface"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_links":{"tokens":[["text","/link"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_published_status":{"tokens":[["text","/is-published/"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_details":{"tokens":[["text","-font.html"],["variable","/","[^\\\\/]+","slug",true]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"homepage":{"tokens":[["text","/"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"index-tagged":{"tokens":[["text","-fonts.html"],["variable","/","[^\\\\/]+","tags",true]],"defaults":[],"requirements":{"tags":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_font_update_text":{"tokens":[["text","/text"],["variable","/","(?:[^\\\\/]+\\\\.){2}[^\\\\/]+","slug",true],["text","/typeface_font"]],"defaults":[],"requirements":{"slug":"([^\\\\/]+\\\\.){2}[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"typeface_charmaps":{"tokens":[["text","/chars"],["variable","/","(?:[^\\\\/]+\\\\.){2}[^\\\\/]+","slug",true],["text","/typeface_font"]],"defaults":[],"requirements":{"slug":"([^\\\\/]+\\\\.){2}[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_charmaps_update":{"tokens":[["text","/chars"],["variable","/","(?:[^\\\\/]+\\\\.){2}[^\\\\/]+","slug",true],["text","/typeface_font"]],"defaults":[],"requirements":{"slug":"([^\\\\/]+\\\\.){2}[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"author_statistics_typefaces":{"tokens":[["text","/statistics/typefaces"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"author_statistics_top10_downloaded":{"tokens":[["text","/statistics/top10/downloaded"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"author_statistics_top10_favorited":{"tokens":[["text","/statistics/top10/favorited"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"user_avatar":{"tokens":[["variable",".","[^/]++","_format",true],["text","/avatar"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":{"_format":"avif"},"requirements":[],"hosttokens":[["text","static.1001fonts.test"]],"methods":["GET"],"schemes":[]},"user_avatar_original":{"tokens":[["text","/avatar_original"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET"],"schemes":[]},"delete_user_avatar":{"tokens":[["text","/avatar"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["DELETE"],"schemes":[]},"update_user_avatar_service":{"tokens":[["text","/avatar-provider"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"upload_user_avatar":{"tokens":[["text","/avatar"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"email-check":{"tokens":[["variable","/","[^/]++","email",true],["text","/check/email"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"user_profile_json":{"tokens":[["text",".json"],["variable","/","[^/\\\\.]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"user_profile":{"tokens":[["text","/"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"username-check":{"tokens":[["variable","/","[^/]++","username",true],["text","/check/username"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"activities":{"tokens":[["text","/admin/activities"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"activities_by_day":{"tokens":[["variable","/","[^/]++","day",true],["text","/admin/activities"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"get_activity_actions":{"tokens":[["text","/admin/activity/action"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"boards_index":{"tokens":[["text","/forums/"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"board_index":{"tokens":[["text","/"],["variable","/","[^/]++","slug",true],["text","/forums"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"thread_show":{"tokens":[["text",".html"],["variable","/","\\\\d+","id",true],["variable","/","[^/]++","board_slug",true],["text","/forums"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"thread_get":{"tokens":[["variable","/","\\\\d+","id",true],["variable","/","[^/]++","board_slug",true],["text","/forums"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"update_thread":{"tokens":[["variable","/","\\\\d+","id",true],["variable","/","[^/]++","board_slug",true],["text","/forums"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["PATCH","POST"],"schemes":[]},"post_reply":{"tokens":[["text","/reply"],["variable","/","\\\\d+","id",true],["variable","/","[^/]++","board_slug",true],["text","/forums"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"delete_reply":{"tokens":[["variable","/","\\\\d+","id",true],["text","/forums/reply"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["DELETE"],"schemes":[]},"delete_thread":{"tokens":[["variable","/","\\\\d+","id",true],["variable","/","[^/]++","board_slug",true],["text","/forums"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["DELETE"],"schemes":[]},"update_reply":{"tokens":[["variable","/","\\\\d+","id",true],["text","/forums/reply"]],"defaults":[],"requirements":{"id":"\\\\d+"},"hosttokens":[],"methods":["PUT"],"schemes":[]},"typeface_comments":{"tokens":[["text","/comment"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_comment_delete":{"tokens":[["variable","/","\\\\d+","id",true],["text","/comment"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+","id":"\\\\d+"},"hosttokens":[],"methods":["DELETE"],"schemes":[]},"typeface_comment_add":{"tokens":[["text","/comment"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"typeface_change_license":{"tokens":[["text","/license"],["variable","/","[^\\\\/]+","slug",true],["text","/licenses"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"login":{"tokens":[["text","/sign-in.html"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","POST","HEAD"],"schemes":[]},"typeface_total_downloads":{"tokens":[["text","/statistics/downloads"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"filter_tags":{"tokens":[["variable","/","[^\\\\/]{2,}","filter",true],["text","/tag"]],"defaults":[],"requirements":{"filter":"[^\\\\/]{2,}"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_update_objects_order":{"tokens":[["variable","/","fonts|illustrations","objects",true],["text","/order"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+","objects":"fonts|illustrations"},"hosttokens":[],"methods":["POST"],"schemes":[]},"typeface_update_description":{"tokens":[["text","/description"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"change_typeface_author":{"tokens":[["text","/author"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"update_typeface_author":{"tokens":[["text","/author"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"filter_author":{"tokens":[["variable","/","[\\\\w\\\\W]{1,}","filter",true],["text","/typeface/author"]],"defaults":[],"requirements":{"filter":"[\\\\w\\\\W]{1,}"},"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"typeface_reupload":{"tokens":[["text","/reupload"],["variable","/","[^\\\\/]+","slug",true],["text","/typeface"]],"defaults":[],"requirements":{"slug":"[^\\\\/]+"},"hosttokens":[],"methods":["POST"],"schemes":[]},"user-tag-cloud":{"tokens":[["text","/tags.html"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"user_links":{"tokens":[["text","/link"],["variable","/","[^/]++","slug",true],["text","/users"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"bazinga_jstranslation_js":{"tokens":[["variable",".","js|json","_format",true],["variable","/","[\\\\w]+","domain",true],["text","/translations"]],"defaults":{"domain":"messages","_format":"js"},"requirements":{"_format":"js|json","domain":"[\\\\w]+"},"hosttokens":[],"methods":["GET"],"schemes":[]},"legacy_free-fonts-for-commercial-use":{"tokens":[["text","/free-fonts-for-commercial-use.html"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["GET","HEAD"],"schemes":[]},"local_avatar":{"tokens":[["variable",".","[^/]++","_format",true],["variable","_","[^/\\\\.]++","size",true],["variable","/","[^/_]++","slug",true],["text","/img/avatars"]],"defaults":[],"requirements":[],"hosttokens":[["text","static.1001fonts.test"]],"methods":["GET"],"schemes":[]},"local_avatar_old":{"tokens":[["variable",".","[^/]++","_format",true],["variable","/","[^/\\\\.]++","slug",true],["text","/img/avatars"]],"defaults":[],"requirements":[],"hosttokens":[["text","static.1001fonts.test"]],"methods":["GET"],"schemes":[]},"local_silhouette":{"tokens":[["text","/img/profile-silhouette.svg"]],"defaults":[],"requirements":[],"hosttokens":[["text","static.1001fonts.test"]],"methods":["GET"],"schemes":[]}},"prefix":"","host":"localhost","port":"","scheme":"http","locale":""}');a().setRoutingData(r)},53660:(t,e,s)=>{s.d(e,{a:()=>o});const o=new(s(61948).Q5)},2704:(t,e,s)=>{s.d(e,{_:()=>o});const o={UPDATE_FONT_SIZE:"update-font-size",SET_FONT_SIZE:"set-font-size",POST_DELETED:"board-post-deleted",DELETE_BROWSING_COOKIE:"browsing.cookie-delete",MORE_TAGS_OPEN:"more-tags.open",MORE_TAGS_CLOSE:"more-tags.close",STICKY_ON:"sticky.on",STICKY_OFF:"sticky_off",EDIT_MODE_TOGGLE:"edit-mode.toggle",ILLUSTRATION_ADDED:"illustration-added",ILLUSTRATION_ADDED_TEMP:"illustration-added-temp",ILLUSTRATION_UPLOAD:"illustration-upload",ILLUSTRATION_START_POLLING:"illustration-start-polling",ILLUSTRATION_DELETED:"illustration-deleted",ILLUSTRATION_UPLOAD_ERROR:"illustration-upload-error",ILLUSTRATION_REORDER:"illustration-reorder",COMMENT_CREATED:"comments.created",COMMENT_DELETED:"comments.deleted",RESET_COLORS:"reset-colors",UPDATE_WALKTHROUGH:"update-walkthrough",UPDATE_ADDED_TAGS_COUNT:"update-added-tags-count",UPDATE_ADDED_FONT_TAGS_COUNT:"update-added-font-tags-count",UPDATE_ADDED_LINKS_COUNT:"update-added-links-count",UPDATE_ADDED_ILLUSTRATIONS_COUNT:"update-added-illustrations-count",UPDATE_WALKTHROUGH_DESCRIPTION_STEP:"update-walkthrough-description-step",UPDATE_WALKTHROUGH_LICENSE_STEP:"update-walkthrough-license-step",ADD_COMPLETION_STEP:"add-completion-step",UPDATE_WALKTHROUGH_PRIVACY_STEP:"update-walkthrough-privacy-step"}},23304:(t,e,s)=>{s.r(e),s.d(e,{PostToolbar:()=>l});var o=s(11504),a=s(3268),r=s.n(a),i=s(95360),n=s(81944);const l=t=>{let{post:e,onClickDelete:s=i.Kw,onClickEdit:a=i.Kw,onClickQuote:r=i.Kw}=t;const l=t=>!0===e.security[t];return o.createElement("aside",{className:"post-toolbar btn-group btn-group-xs"},l("edit")&&o.createElement(n.ToolButton,{transKey:"thread.action.edit",icon:"pencil-alt",action:a}),o.createElement(n.ToolButton,{transKey:"thread.action.quote",icon:"quote-right",action:r}),l("delete")&&o.createElement(n.ToolButton,{transKey:"thread.action.delete",icon:"trash",active:!0,action:s}))};l.propTypes={onClickDelete:r().func,onClickEdit:r().func,onClickQuote:r().func,post:r().object.isRequired}},62948:(t,e,s)=>{s.r(e),s.d(e,{Post:()=>S});var o,a,r,i,n=s(11504),l=s(68188),d=s.n(l),u=s(17412),c=s.n(u),h=s(6464),m=s(23304),p=s(18916),f=s(76060),g=s(5472),E=s(95416),b=s(3268),k=s.n(b),v=s(33568),_=s(53052),T=s(13392),y=s(53660),x=s(2704),C=s(95516),D=s(40901);class S extends n.Component{constructor(t){var e;super(t),e=this,this.state={isThread:t.isThread||!1,edit:!1,post:t.post,authorProfileHref:d().generate("user_profile",{slug:t.post.author.login_name}),tag:t.tag||"li"},this.gotoEditForm=()=>{window.location.href=d().generate("thread_edit",{slug:this.post.board,id:this.post.id})},this.enableEditMode=()=>{this.setState({edit:!0})},this.onEditPost=t=>{t.preventDefault(),this.state.isThread?this.gotoEditForm():this.enableEditMode()},this.onDeletePost=t=>{t.preventDefault(),(0,g.WC)(E.O.trans("thread.post.delete-confirm",{},"board"),(()=>{(0,g.Yp)(),f.Sk.deleteReply(this.state.post.id,this.state.post.security.token,(t=>{y.a.dispatchEvent(x._.POST_DELETED,t)}))}))},this.onDeleteThread=t=>{t.preventDefault();const e=this.state.post,s=d().generate("board_index",{slug:e.board});(0,g.WC)(E.O.trans("thread.thread.delete-confirm",{},"board"),(()=>{(0,g.Yp)(),f.Sk.deleteThread(e.board,e.id,e.security.token,(()=>{window.location.href=s}))}))},this.reset=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.preventDefault(),e.setState({edit:!1})},this.onPostReplySuccess=t=>{this.setState({post:t.reply}),this.reset()},this.onPostThreadSuccess=t=>{this.setState({post:t.thread}),this.reset()},this.submit=t=>{const e={body:t.getData()};this.state.isThread?f.Sk.patchThread(this.state.post.board,this.state.post.id,e,this.onPostThreadSuccess):f.Sk.updateReply(this.state.post.id,e,this.onPostReplySuccess)},this.onQuote=()=>{const t=new _.Quote(this.state.post.author.display_name,this.state.post.body);this.context.quoteManager.quote(t)}}get post(){return this.state.post}render(){const t=this.post.author,e=c()(this.post.created_at),s=this.state.tag;let o;if((0,v.isEmpty)(this.props.currentUser)||(o=this.state.isThread?n.createElement(p.ThreadToolbar,{onClickDelete:this.onDeleteThread,onClickEdit:this.onEditPost,onUpdate:this.props.onUpdate,onClickQuote:this.onQuote,post:this.post}):n.createElement(m.PostToolbar,{onClickDelete:this.onDeletePost,onClickEdit:this.onEditPost,onClickQuote:this.onQuote,post:this.post})),!this.post.active)return null;let a=n.createElement("div",{className:"body",dangerouslySetInnerHTML:{__html:this.post.body}});return!0===this.state.edit&&(a=n.createElement("div",{className:"post-editor"},n.createElement(T.MaxfontsEditor,{data:this.state.post.body,toolsType:"post",onSubmit:this.submit,onCancel:this.reset,btnContainerClass:"thread-buttons d-flex flex-row-reverse mt-1"}))),n.createElement(s,{className:"post"},n.createElement(D.MediaContainer,null,n.createElement(D.MediaAvatarContainer,null,n.createElement(h.Avatar,{size:"80",slug:t.login_name,alt:t.display_name})),n.createElement(D.MediaContentContainer,null,n.createElement("h5",{className:"mt-0"},"unknown-author"===this.state.post.author.login_name?n.createElement(n.Fragment,null,t.display_name):n.createElement("a",{href:this.state.authorProfileHref},t.display_name)),n.createElement("small",{className:"text-muted",title:e.format("LLL"),"data-bs-toggle":"tooltip"},e.fromNow()),this.post.changed_at&&n.createElement("small",{className:"ms-1 text-muted",title:c()(this.post.changed_at).format("LLL"),"data-bs-toggle":"tooltip"},"[edited ",c()(this.post.changed_at).fromNow(),"]"),a)),o)}}o=S,a="contextType",r=C.QuoteContext,(a="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var o=s.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?i:String(i))in o?Object.defineProperty(o,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[a]=r,S.propTypes={isThread:k().bool,post:k().object.isRequired,tag:k().string,onUpdate:k().func,currentUser:k().object},S.defaultProps={isThread:!1}},95516:(t,e,s)=>{s.r(e),s.d(e,{QuoteContext:()=>l,QuoteProvider:()=>d,useQuote:()=>u});var o=s(11504),a=s(3268),r=s.n(a),i=s(53052),n=s(20304);const l=(0,o.createContext)(),d=t=>{let{children:e}=t;const s=new i.QuotesManager;return o.createElement(l.Provider,{value:{quoteManager:s}},e)},u=()=>(0,n.useValidContext)(l,"QuoteContext");d.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node]).isRequired}},53052:(t,e,s)=>{function o(t,e,s){var o;return(e="symbol"==typeof(o=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var o=s.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?o:String(o))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.r(e),s.d(e,{Quote:()=>a,QuotesManager:()=>r});class a{constructor(t,e){o(this,"author",void 0),o(this,"text",void 0),this.author=t,this.text=e}toHtml(){return'<blockquote><h4 class="quote-author">'.concat(this.author," wrote:</h4>").concat(this.text,"</blockquote>")}}class r{constructor(){this.reset()}quote(t){this.callbacks.forEach((e=>{e(t)}))}reset(){this.callbacks=[]}registerCallback(t){this.callbacks.push(t)}}},29872:(t,e,s)=>{s.r(e),s.d(e,{init:()=>u});var o=s(11504),a=s(28352),r=s(3268),i=s.n(r),n=s(13392),l=s(71088);const d=t=>{let{textarea:e}=t;const s=(0,o.useCallback)(((t,s)=>{e.value=s.getData()}),[e]);return o.createElement(n.MaxfontsEditor,{data:e.value,toolsType:"post",onSubmit:l.noop,onChange:s,btnContainerClass:"d-none"})};function u(){const t=document.getElementById("medium-thread-body");if(t){const e=document.getElementById("thread_body");a.createRoot(t).render(o.createElement(d,{textarea:e}))}}d.propTypes={textarea:i().object.isRequired}},18916:(t,e,s)=>{s.r(e),s.d(e,{ThreadToolbar:()=>c});var o=s(11504);function a(t){return!0===this[t]}var r=s(3268),i=s.n(r),n=s(76060),l=s(1648),d=s(81944),u=s(95360);class c extends o.Component{constructor(t){super(t),this.state={post:t.post},this.onClickDelete=t.onClickDelete||u.Kw,this.onClickEdit=t.onClickEdit||u.Kw,this.onClickQuote=t.onClickQuote||u.Kw,this.can=a.bind(this.state.post.security),this.modal=new l.wJ("#move-thread-modal"),this.patchThread=t=>{n.Sk.patchThread(this.thread.board,this.thread.id,t,(t=>{this.setState({post:t.thread}),this.props.onUpdate(t.thread)}))},this.toggleSticky=t=>{t.preventDefault(),this.patchThread({sticky:!this.thread.sticky})},this.toggleLock=t=>{t.preventDefault(),this.patchThread({locked:!this.thread.locked})},this.openMoveModal=t=>{t.preventDefault(),this.modal.show()}}componentDidMount(){this.modal.init()}get thread(){return this.state.post}render(){return o.createElement("aside",{className:"post-toolbar btn-group btn-group-xs"},this.can("edit")&&o.createElement(d.ToolButton,{transKey:"thread.action.edit",icon:"pencil-alt",action:this.onClickEdit}),this.can("move")&&o.createElement(d.ToolButton,{transKey:"thread.action.move",icon:"arrow-right",action:this.openMoveModal}),this.can("pin")&&o.createElement(d.ToolButton,{transKey:"thread.action.pin.".concat(this.thread.sticky),icon:"thumbtack",active:this.thread.sticky,action:this.toggleSticky}),this.can("lock")&&o.createElement(d.ToolButton,{transKey:"thread.action.lock.".concat(this.thread.locked),icon:"lock",active:this.thread.locked,action:this.toggleLock}),o.createElement(d.ToolButton,{transKey:"thread.action.quote",icon:"quote-right",action:this.onClickQuote}),this.can("delete")&&o.createElement(d.ToolButton,{transKey:"thread.action.delete",icon:"trash",active:!0,action:this.onClickDelete}))}}c.propTypes={post:i().object.isRequired,onUpdate:i().func,onClickDelete:i().func,onClickEdit:i().func,onClickQuote:i().func}},16084:(t,e,s)=>{s.r(e),s.d(e,{Thread:()=>S});s(54004);var o,a,r,i,n=s(11504),l=s(62948),d=s(17412),u=s.n(d),c=s(6464),h=s(76060),m=s(76340),p=s(68188),f=s.n(p),g=s(3268),E=s.n(g),b=s(13392),k=s(95416),v=s(53660),_=s(2704),T=s(348),y=s(6992),x=s(4880),C=s(95516),D=s(40901);class S extends n.Component{constructor(t){super(t),this.state={boardSlug:t.board,threadId:t.thread,thread:{id:0},extraClass:"",currentUser:void 0,focusReply:t.replyMode,post:""},this.editor=null,v.a.addEventListener(_._.POST_DELETED,(t=>this.onPostReplySuccess(t.data))),this.stripTags=t=>t.replace(/(<([^>]+)>)/gi,""),this.isEditorEmpty=t=>!this.stripTags(t.getData()).length,this.setExtraClass=t=>{this.state.extraClass!==t&&this.setState({extraClass:t})},this.onFocus=()=>this.setExtraClass("writing"),this.onBlur=(t,e)=>{this.isEditorEmpty(e)?this.setExtraClass(""):this.setState({post:e.getData()})},this.reset=()=>{this.setState({post:""}),this.setExtraClass("")},this.onPostReplySuccess=t=>{this.setState(t),this.reset()},this.submit=t=>{const e=t.getData(),s=this.createPost(this.state.currentUser,e);h.mk.postReply(this.state.thread.board,this.state.thread.id,s,this.onPostReplySuccess)},this.createPost=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u()().toISOString(),o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{author:t,body:e,created_at:s,active:o,security:a}},this.initEditor=t=>{t&&t.registerInitCallback(this.initCallback)},this.initCallback=t=>{this.editor=t,this.focusEditor()},this.focusEditor=()=>{!0===this.state.focusReply&&this.editor&&this.focusEditorAndScrollIntoView()},this.focusEditorAndScrollIntoView=()=>{this.editor.editing.view.focus(),this.onFocus(),document.getElementById("reply-post").scrollIntoView({block:"end",behavior:"smooth"})},this.updateThread=t=>{this.setState({thread:t})},this.addQuoteResponseParagraph=t=>e=>{const s=t.model.document.getRoot(),o=e.createElement("paragraph");e.append(o,s),e.setSelection(o,"in")},this.onQuote=t=>{const e=this.editor;e.setData(t.toHtml()),e.model.change(this.addQuoteResponseParagraph(e)),e.editing.view.focus(),this.setState({post:e.getData()},this.focusEditorAndScrollIntoView)}}componentDidMount(){h.mk.getThread(this.state.boardSlug,this.state.threadId,(t=>{var e;this.setState({thread:t.thread,currentUser:t.currentUser}),null!==(e=t.currentUser)&&void 0!==e&&e.id&&this.initQuotesManager()}))}initQuotesManager(){this.context.quoteManager.reset(),this.context.quoteManager.registerCallback(this.onQuote)}hasCurrentUser(){return this.state.currentUser&&this.state.currentUser.id}render(){const t=this.state.thread;if(!t.id)return n.createElement("section",{className:"thread"},n.createElement(T.Spinner,null)," ",k.O.trans("thread.loading",{},"board"));let e=n.createElement(m.LoginButton,{text:k.O.trans("thread.action.reply.post",{},"board"),target:f().generate("thread_show",{board_slug:t.board,id:t.id})+"#reply"});if(this.hasCurrentUser()){const t=this.state.currentUser;e=n.createElement("div",{className:"new-post ".concat(this.state.extraClass)},n.createElement(D.MediaContainer,null,n.createElement(D.MediaAvatarContainer,null,n.createElement(c.Avatar,{size:"s",slug:t.login_name,alt:t.display_name})),n.createElement(D.MediaContentContainer,{id:"reply-post"},n.createElement(b.MaxfontsEditor,{ref:this.initEditor,data:this.state.post,toolsType:"post",onSubmit:this.submit,onFocus:this.onFocus,onBlur:this.onBlur,btnContainerClass:"thread-buttons d-flex flex-row-reverse mt-1",onCancel:this.reset,placeholder:k.O.trans("thread.action.reply.placeholder",{},"board"),saveBtnText:k.O.trans("thread.action.reply.save",{},"board")}))))}return!0===t.locked&&(e=n.createElement(y.c,{variant:"dark",className:"w-100"},n.createElement(x.FontawesomeIcon,{faIcon:"fa-lock"})," ",k.O.trans("thread.locked",{},"board"))),n.createElement("section",{className:"thread"},n.createElement("h1",null,t.subject),n.createElement("ul",{className:"list-unstyled"},n.createElement(l.Post,{post:t,key:t.id,isThread:!0,onUpdate:this.updateThread,currentUser:this.state.currentUser}),t.replies.map((t=>n.createElement(l.Post,{post:t,key:t.id,currentUser:this.state.currentUser})))),e)}}o=S,a="contextType",r=C.QuoteContext,(a="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var o=s.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?i:String(i))in o?Object.defineProperty(o,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[a]=r,S.propTypes={board:E().string.isRequired,thread:E().string.isRequired,replyMode:E().bool.isRequired},S.defaultProps={replyMode:!1}},81944:(t,e,s)=>{s.r(e),s.d(e,{ToolButton:()=>u});var o=s(95416),a=s(11504),r=s(33568),i=s(3268),n=s.n(i),l=s(4880);const d=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.O.trans(t,e,"board")},u=t=>{let{icon:e,transKey:s,action:o=r.noop,active:i=!1}=t;return a.createElement("a",{role:"button",className:(()=>{let t="btn btn-light";return!0===i&&(t+=" text-danger"),t})(),title:d(s),onClick:o},a.createElement(l.FontawesomeIcon,{customClass:"fas fa-".concat(e)}))};u.propTypes={active:n().bool,action:n().func,transKey:n().string.isRequired,icon:n().string.isRequired}},78204:(t,e,s)=>{s.r(e),s.d(e,{CachedEditorButtons:()=>h,EditorButtons:()=>m,storageAvailable:()=>c});var o=s(33568),a=s(76060),r=s(66624),i=s.n(r),n=s(74560);const l=[{id:"undo",tool:"undo",plugins:[]},{id:"redo",tool:"redo",plugins:[]},{id:"bold",tool:"bold",plugins:["Bold"]},{id:"italic",tool:"italic",plugins:["Italic"]},{id:"blockquote",tool:"blockQuote",plugins:["BlockQuote"]},{id:"link",tool:"link",plugins:["Link"]},{id:"ol",tool:"numberedList",plugins:["List"]},{id:"ul",tool:"bulletedList",plugins:["List"]},{id:"hr",tool:"horizontalLine",plugins:["HorizontalLine"]},{id:"unformat",tool:"removeFormat",plugins:["RemoveFormat"]}],d=["Markdown","Essentials","Autoformat","PasteFromOffice","Paragraph","TextTransformation","Clipboard"],u=t=>0===t.indexOf("h"),c=t=>{let e;try{e=window[t];const s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}};class h{constructor(t,e){this.delegate=t,this.storage=e,this.ttl=864e5}get editorConfig(){return this.delegate.editorConfig}load(t){const e="editor-buttons-".concat(this.delegate.type),s=new n.c(e,this.ttl,this.storage),o=s.get();if(o)return t(JSON.parse(atob(o.data)));this.delegate.load((e=>(s.update(btoa(JSON.stringify(e))),t(e))))}}class m{constructor(t){this._type=t,this._buttons=[]}get type(){return this._type}get editorConfig(){const t=(0,o.intersectionWith)(l,this._buttons,((t,e)=>t.id===e)),e=t.map((t=>t.tool)),s=(0,o.flatten)(t.map((t=>t.plugins))),a=new RegExp(/h(\d+)/i);let r=(0,o.filter)(this._buttons,(t=>a.test(t)));const i=r.length;r=r.map((t=>{const e=a.exec(t),s=i>1?e[1]:"";return{model:"heading".concat(s),view:t,title:"Heading ".concat(s).trim(),class:"ck-heading_heading".concat(s)}}));const n=m.buildEditorConfig(r,e);return n.removePlugins=this.detectPluginsToBeRemoved(s),n}static buildEditorConfig(t,e){const s=[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"}];let o={toolbar:(t.length?["heading","|"]:[]).concat(e)};return t.length&&(o.heading={options:s.concat(t)}),o}load(t){this._buttons.length||a.Sk.loadButtons(this._type,(e=>{this._buttons=e,t(this.editorConfig)}))}detectPluginsToBeRemoved(t){const e=i().builtinPlugins.map((t=>t.pluginName));return this._buttons.some(u)&&d.push("Heading"),(0,o.difference)(e,d,t)}}},13392:(t,e,s)=>{s.r(e),s.d(e,{MaxfontsEditor:()=>m,defaultBtnContainerClass:()=>h});var o=s(11504),a=s(8016),r=s(3268),i=s.n(r),n=s(95360),l=s(78204),d=s(95416),u=s(66624),c=s.n(u);const h="d-flex mt-1";class m extends o.Component{constructor(t){super(t),this.state={data:t.data,editorConfig:null},this.editor=null,this.buttons=new l.EditorButtons(t.toolsType),(0,l.storageAvailable)("sessionStorage")&&(this.buttons=new l.CachedEditorButtons(this.buttons,window.sessionStorage)),this.cancel=t.onCancel||n.Kw,this.initCallback=null,this.submit=()=>{t.onSubmit(this.editor)},this.initEditor=t=>{this.initCallback&&this.initCallback(t),this.editor=t}}focus(){if(this.editor)this.editor.editing.view.focus();else{let t=t=>{t.editing.view.focus()};this.initCallback&&(t=t=>{this.initCallback(t),t.editing.view.focus()}),this.registerInitCallback(t)}}registerInitCallback(t){this.initCallback=t}static getDerivedStateFromProps(t,e){return t.data!==e.data?{data:t.data}:null}componentDidMount(){this.buttons.load((t=>{this.props.placeholder&&(t.placeholder=this.props.placeholder),this.setState({editorConfig:t})}))}render(){return this.state.editorConfig?o.createElement("section",{className:"maxfonts-editor"},o.createElement(a.CKEditor,{editor:c(),data:this.state.data,onReady:this.initEditor,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onChange:this.props.onChange,config:this.state.editorConfig}),o.createElement("div",{className:this.props.btnContainerClass},o.createElement("button",{type:"button",className:"btn btn-secondary m-1",onClick:this.cancel},this.props.cancelBtnText),o.createElement("button",{type:"button",className:"btn btn-primary m-1",onClick:this.submit},this.props.saveBtnText))):null}}m.propTypes={data:i().string.isRequired,toolsType:i().string.isRequired,onSubmit:i().func.isRequired,btnContainerClass:i().string,onCancel:i().func,onFocus:i().func,onBlur:i().func,onChange:i().func,placeholder:i().string,saveBtnText:i().string,cancelBtnText:i().string},m.defaultProps={btnContainerClass:h,saveBtnText:d.O.trans("save"),cancelBtnText:d.O.trans("cancel")}},76340:(t,e,s)=>{s.r(e),s.d(e,{LoginButton:()=>d});var o=s(11504),a=s(68188),r=s.n(a),i=s(3268),n=s.n(i),l=s(4880);class d extends o.Component{constructor(t){super(t),this.state={}}componentDidMount(){let t={};this.props.target&&(t={target:encodeURIComponent(this.props.target)}),this.setState({href:r().generate("login",t)})}render(){return o.createElement("a",{href:this.state.href,className:"btn btn-primary"},o.createElement(l.FontawesomeIcon,{faIcon:"fa-pencil-alt"})," ",this.props.text)}}d.propTypes={text:n().string.isRequired,target:n().string}},5472:(t,e,s)=>{s.d(e,{WC:()=>l,Yp:()=>d,_6:()=>u});var o=s(1648),a=s(37588),r=s.n(a);class i extends o.wJ{constructor(){super("#confirm-modal")}init(){this.modalExists()&&r()("body").on("click","[data-confirm]",((t,e)=>{const s=r()(t.currentTarget);if(e&&!0===e.dismiss)this.close();else{t.preventDefault();const e=s.attr("data-confirm"),o=()=>{"A"===s.prop("tagName")?document.location.href=s.prop("href"):s.trigger("click",{dismiss:!0})};this.showWithText(e,o)}}))}}const n=new i,l=(t,e)=>{n.showWithText(t,e)},d=()=>{n.close()},u=()=>{n.init()}},1648:(t,e,s)=>{s.d(e,{A5:()=>l,_g:()=>d,wJ:()=>i,yD:()=>n});s(54004);var o=s(29926),a=s(95360);const r=t=>{(0,a.aY)(t);const e=t.data.modal;return e?o.wJ.getOrCreateInstance(e):null};class i{constructor(t){this.id=(t=>t.replace("#",""))(t),this.modal=void 0,this.disableButtons=()=>{this.modalElement.querySelectorAll(".modal-footer button").forEach((t=>{t.disabled=!0}))},this.enableButtons=()=>{this.modalElement.querySelectorAll(".modal-footer button").forEach((t=>{t.disabled=!1}))},this.resetOkButton=()=>{const t=this.okButton.cloneNode(!0);return this.okButton.parentNode.replaceChild(t,this.okButton),t.addEventListener("click",(()=>{this.disableButtons()})),t},this.onModalShown=()=>{this.okButton.focus({focusVisible:!0})}}get modalElement(){return document.getElementById(this.id)}get $modal(){return this.modal||(this.modal=new o.wJ(this.modalElement)),this.modal}get okButton(){return this.modalElement.querySelector(".confirm-ok")}modalExists(){return null!==this.modalElement}close(){this.modalExists()&&this.$modal.hide()}init(){}showWithText(t,e){const s=this.modalElement.querySelector(".modal-body > p");this.modalElement.removeEventListener("shown.bs.modal",this.onModalShown),this.modalElement.addEventListener("shown.bs.modal",this.onModalShown),this.modalElement.removeEventListener("hide.bs.modal",this.resetOkButton),this.modalElement.addEventListener("hide.bs.modal",this.resetOkButton),this.show(e,(()=>{s.innerHTML=t}))}show(t,e){this.modalExists()&&(this.okButton&&this.resetOkButton().addEventListener("click",t),e&&this.modalElement.addEventListener("show.bs.modal",e),this.enableButtons(),this.$modal.show())}}const n=t=>({data:{modal:t}}),l=t=>{const e=r(t);e&&e.show()},d=t=>{const e=r(t);e&&e.hide()}},50904:(t,e,s)=>{s.d(e,{a:()=>o});const o=(t,e)=>(e=e||window).location.hash.substr(1)===t}}]);